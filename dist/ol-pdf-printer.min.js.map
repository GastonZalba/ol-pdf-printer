{"version":3,"file":"ol-pdf-printer.min.js","sources":["../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/dom-to-image-improved/src/dom-to-image-improved.js","../src/myPragma.js","../src/components/Pdf.tsx","../node_modules/modal-vanilla/lib/modal.js","../src/components/SettingsModal.tsx","../src/components/Helpers.ts","../src/components/ProcessingModal.ts","../src/components/i18n/en.ts","../src/components/i18n/es.ts","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../src/ol-pdf-printer.ts","../node_modules/@babel/runtime/helpers/esm/inherits.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","(function(global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false,\n        // Use (existing) authentication credentials for external URIs (CORS requests)\n        useCredentials: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        toCanvas: toCanvas,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof exports === \"object\" && typeof module === \"object\")\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n     defaults to 1.0.\n     * @param {Number} options.scale - a Number multiplier to scale up the canvas before rendering to reduce fuzzy images, defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n        .then(function(node) {\n            return cloneNode(node, options.filter, true);\n        })\n        .then(embedFonts)\n        .then(inlineImages)\n        .then(applyOptions)\n        .then(function(clone) {\n            return makeSvgDataUri(clone,\n              options.width || util.width(node),\n              options.height || util.height(node)\n            );\n        });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function(property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n        .then(function(canvas) {\n            return canvas.getContext('2d').getImageData(\n              0,\n              0,\n              util.width(node),\n              util.height(node)\n            ).data;\n        });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n        .then(function(canvas) {\n            return canvas.toDataURL();\n        });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n        .then(function(canvas) {\n            return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n        });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n        .then(util.canvasToBlob);\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a canvas object\n     * */\n    function toCanvas(node, options) {\n        return draw(node, options || {});\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if (typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if (typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n\n        if(typeof(options.useCredentials) === 'undefined') {\n            domtoimage.impl.options.useCredentials = defaultOptions.useCredentials;\n        } else {\n            domtoimage.impl.options.useCredentials = options.useCredentials;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n        .then(util.makeImage)\n        .then(util.delay(100))\n        .then(function(image) {\n            var scale = typeof(options.scale) !== 'number' ? 1 : options.scale;\n            console.log('scale', scale);\n            var canvas = newCanvas(domNode, scale);\n            var ctx = canvas.getContext('2d');\n            if (image) {\n                //console.log('should be scaled', image);\n                ctx.scale(scale, scale);\n                //canvas.height = 620;\n                //ctx.drawImage(image, 150, 600, 1150, 700, 0, 0, 1150, 700);\n                // canvas.height = options.image.height + 50;\n                // //canvas.width = options.image.width - 135;// - options.image.offsetRight\n                // canvas.width = options.image.width - options.image.offsetRight - options.image.offsetLeft + 60;\n                // ctx.drawImage(image, options.image.offsetLeft, options.image.offsetTop - 50, options.image.width, options.image.height + 50, 0, 0, options.image.width, options.image.height);\n\n                if (options.canvas && options.canvas.width) {\n                    canvas.width = options.canvas.width;\n                }\n\n                if (options.canvas && options.canvas.height) {\n                    canvas.height = options.canvas.height;\n                }\n\n                if (options.canvas) {\n                    console.log('canv', options.canvas);\n                    ctx.drawImage(\n                      image,\n                      options.canvas.sx  || 0,\n                      options.canvas.sy || 0,\n                      options.canvas.sw || options.width,\n                      options.canvas.sh || options.height,\n                      options.canvas.dx || 0,\n                      options.canvas.dy || 0,\n                      options.canvas.dw || options.width,\n                      options.canvas.dh || options.height\n                    );\n                } else {\n                    ctx.drawImage(image, 0, 0);\n                }\n\n            }\n            return canvas;\n        });\n\n        function newCanvas(domNode, scale) {\n            var canvas = document.createElement('canvas');\n            canvas.width = (options.width || util.width(domNode)) * scale;\n            canvas.height = (options.height || util.height(domNode)) * scale;\n\n            console.log(canvas.width, canvas.height);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n        .then(makeNodeCopy)\n        .then(function(clone) {\n            return cloneChildren(node, clone, filter);\n        })\n        .then(function(clone) {\n            return processClone(node, clone);\n        });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.tagName === 'use' ? copyShadowChild(original) : original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n            .then(function() {\n                return clone;\n            });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function(child) {\n                    done = done\n                    .then(function() {\n                        return cloneNode(child, filter);\n                    })\n                    .then(function(childClone) {\n                        if (childClone) parent.appendChild(childClone);\n                    });\n                });\n                return done;\n            }\n        }\n\n        function copyShadowChild(original) {\n            var child = document.getElementById(original.href.baseVal.replace('#', ''));\n            return [child.cloneNode(true)];\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n            .then(cloneStyle)\n            .then(clonePseudoElements)\n            .then(copyUserInput)\n            .then(fixSvg)\n            .then(function() {\n                return clone;\n            });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                if (util.isChrome() && clone.style.marker && ( clone.tagName === 'line' || clone.tagName === 'path')) {\n                    clone.style.marker = '';\n                }\n\n                function copyStyle(source, target) {\n                    if (source.cssText) {\n                        target.cssText = source.cssText;\n                        target.font = source.font; // here, we re-assign the font prop.\n                    } else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function(name) {\n                            target.setProperty(\n                              name,\n                              source.getPropertyValue(name),\n                              source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function(element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    var currentClass = clone.getAttribute('class');\n                    if (currentClass) {\n                        clone.setAttribute('class', currentClass + ' ' + className);\n                    }\n\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                            .map(formatProperty)\n                            .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                  style.getPropertyValue(name) +\n                                  (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function(attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n        .then(function(cssText) {\n            var styleNode = document.createElement('style');\n            node.appendChild(styleNode);\n            styleNode.appendChild(document.createTextNode(cssText));\n            return node;\n        });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n        .then(function() {\n            return node;\n        });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n        .then(function(node) {\n            node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n            return new XMLSerializer().serializeToString(node);\n        })\n        .then(util.escapeXhtml)\n        .then(function(xhtml) {\n            return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n        })\n        .then(function(foreignObject) {\n            return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n              foreignObject + '</svg>';\n        })\n        .then(function(svg) {\n            return 'data:image/svg+xml;charset=utf-8,' + svg;\n        });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            isChrome: isChrome,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)(\\?|$)/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function(resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function(resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function() {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            if (uri === 'data:,') return Promise.resolve();\n            return new Promise(function(resolve, reject) {\n                var image = new Image();\n                if(domtoimage.impl.options.useCredentials) {\n                    image.crossOrigin = 'use-credentials';\n                }\n                image.onload = function() {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if (domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function(resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                if(domtoimage.impl.options.useCredentials) {\n                    request.withCredentials = true;\n                }\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if (domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if (split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if (placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function() {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if (placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function isChrome() {\n            return /chrome/i.test( navigator.userAgent );\n        }\n\n        function delay(ms) {\n            return function(arg) {\n                return new Promise(function(resolve) {\n                    setTimeout(function() {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function(url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n            .then(function(url) {\n                return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n            })\n            .then(get || util.getAndEncode)\n            .then(function(data) {\n                return util.dataAsUrl(data, util.mimeType(url));\n            })\n            .then(function(dataUrl) {\n                return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n            });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n            .then(readUrls)\n            .then(function(urls) {\n                var done = Promise.resolve(string);\n                urls.forEach(function(url) {\n                    done = done.then(function(string) {\n                        return inline(string, url, baseUrl, get);\n                    });\n                });\n                return done;\n            });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n            .then(function(webFonts) {\n                return Promise.all(\n                  webFonts.map(function(webFont) {\n                      return webFont.resolve();\n                  })\n                );\n            })\n            .then(function(cssStrings) {\n                return cssStrings.join('\\n');\n            });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n            .then(getCssRules)\n            .then(selectWebFontRules)\n            .then(function(rules) {\n                return rules.map(newWebFont);\n            });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                .filter(function(rule) {\n                    return rule.type === CSSRule.FONT_FACE_RULE;\n                })\n                .filter(function(rule) {\n                    return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function(sheet) {\n                    if (sheet.hasOwnProperty(\"cssRules\")) {\n                        try {\n                            util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                        } catch (e) {\n                            console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                        }\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function() {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                .then(get || util.getAndEncode)\n                .then(function(data) {\n                    return util.dataAsUrl(data, util.mimeType(element.src));\n                })\n                .then(function(dataUrl) {\n                    return new Promise(function(resolve, reject) {\n                        element.onload = resolve;\n                        // for any image with invalid src(such as <img src />), just ignore it\n                        element.onerror = resolve;\n                        element.src = dataUrl;\n                    });\n                });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n            .then(function() {\n                if (node instanceof HTMLImageElement)\n                    return newImage(node).inline();\n                else\n                    return Promise.all(\n                      util.asArray(node.childNodes).map(function(child) {\n                          return inlineAll(child);\n                      })\n                    );\n            });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                .then(function(inlined) {\n                    node.style.setProperty(\n                      'background',\n                      inlined,\n                      node.style.getPropertyPriority('background')\n                    );\n                })\n                .then(function() {\n                    return node;\n                });\n            }\n        }\n    }\n})(this);\n","export default function createElement(tagName, attrs = {}, ...children) {\r\n    if (tagName === 'null' || tagName === null) return children;\r\n    if (typeof tagName === 'function') return tagName(attrs, children);\r\n\r\n    const elem = document.createElement(tagName);\r\n\r\n    Object.entries(attrs || {}).forEach(([name, value]) => {\r\n        if (typeof value !== undefined && value !== null) {\r\n            if (\r\n                name.startsWith('on') &&\r\n                name.toLowerCase() in window &&\r\n                typeof value === 'function'\r\n            )\r\n                elem.addEventListener(name.toLowerCase().substr(2), value);\r\n            else {\r\n                if (name === 'className')\r\n                    elem.setAttribute('class', value.toString());\r\n                else if (name === 'htmlFor')\r\n                    elem.setAttribute('for', value.toString());\r\n                else elem.setAttribute(name, value.toString());\r\n            }\r\n        }\r\n    });\r\n\r\n    for (const child of children) {\r\n        if (!child) continue;\r\n        if (Array.isArray(child)) elem.append(...child);\r\n        else {\r\n            if (child.nodeType === undefined) elem.innerHTML += child;\r\n            else elem.appendChild(child);\r\n        }\r\n    }\r\n    return elem;\r\n}\r\n","import View from 'ol/View';\r\nimport { getPointResolution } from 'ol/proj';\r\n\r\nimport { jsPDF, TextOptionsLight } from 'jspdf';\r\nimport { getDocument, GlobalWorkerOptions, version } from 'pdfjs-dist';\r\n\r\nimport { I18n, Options, IPrintOptions, IWatermark } from '../ol-pdf-printer';\r\n\r\nimport myPragma from '../myPragma';\r\n\r\n/**\r\n * @private\r\n */\r\nexport default class Pdf {\r\n    protected _pdf: IPdf;\r\n    protected _view: View;\r\n    protected _scaleDenominator: number;\r\n    protected _form: IPrintOptions;\r\n    protected _style: Options['style'];\r\n    protected _i18n: I18n;\r\n\r\n    protected _config: Options;\r\n\r\n    constructor(params: IPdfOptions) {\r\n        const { view, form, i18n, config, height, width, scaleResolution } =\r\n            params;\r\n\r\n        this._view = view;\r\n        this._form = form;\r\n        this._i18n = i18n;\r\n        this._config = config;\r\n\r\n        this._pdf = this.create(\r\n            this._form.orientation,\r\n            this._form.format,\r\n            height,\r\n            width\r\n        );\r\n\r\n        this._scaleDenominator = this._calculateScaleDenominator(\r\n            this._form.resolution,\r\n            scaleResolution\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param orientation\r\n     * @param format\r\n     * @param width\r\n     * @param height\r\n     * @returns\r\n     * @protected\r\n     */\r\n    create(\r\n        orientation: IPrintOptions['orientation'],\r\n        format: IPrintOptions['format'],\r\n        height: number,\r\n        width: number\r\n    ): IPdf {\r\n        // UMD support\r\n        const _jsPDF =\r\n            (window as IWindow & typeof globalThis).jspdf?.jsPDF || jsPDF;\r\n\r\n        return {\r\n            doc: new _jsPDF({ orientation, format }),\r\n            height: height,\r\n            width: width\r\n        };\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param dataUrl\r\n     * @protected\r\n     */\r\n    addMapImage(dataUrl: string): void {\r\n        this._pdf.doc.addImage(\r\n            dataUrl,\r\n            'JPEG',\r\n            this._config.style.paperMargin, // Add margins\r\n            this._config.style.paperMargin,\r\n            this._pdf.width - this._config.style.paperMargin * 2,\r\n            this._pdf.height - this._config.style.paperMargin * 2\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @protected\r\n     */\r\n    addMapHelpers = async (): Promise<void> => {\r\n        const { mapElements, extraInfo, style, watermark } = this._config;\r\n\r\n        this._style = style;\r\n\r\n        if (watermark) {\r\n            await this._addWatermark(watermark);\r\n        }\r\n\r\n        if (mapElements) {\r\n            if (mapElements.compass && this._form.compass) {\r\n                await this._addCompass(mapElements.compass);\r\n            }\r\n\r\n            if (mapElements.description && this._form.description) {\r\n                this._addDescription();\r\n            }\r\n\r\n            if (mapElements.scalebar && this._form.scalebar) {\r\n                this._addScaleBar();\r\n            }\r\n\r\n            if (mapElements.attributions && this._form.attributions) {\r\n                this._addAttributions();\r\n            }\r\n        }\r\n\r\n        if (extraInfo) {\r\n            // Bottom info\r\n            if (extraInfo.url) {\r\n                this._addUrl();\r\n            }\r\n\r\n            if (extraInfo.date) {\r\n                this._addDate();\r\n            }\r\n\r\n            if (extraInfo.specs) {\r\n                this._addSpecs();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    savePdf(): Promise<void> {\r\n        const downloadURI = (uri: string, name: string): void => {\r\n            const link = <a download={name} href={uri}></a>;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        };\r\n\r\n        return new Promise((resolve, reject) => {\r\n            if (this._form.typeExport === 'pdf') {\r\n                this._pdf.doc.save(this._config.filename + '.pdf');\r\n                resolve();\r\n            } else {\r\n                const pdf = this._pdf.doc.output('dataurlstring');\r\n\r\n                // UMD support\r\n                const versionPdfJS =\r\n                    (window as IWindow & typeof globalThis)?.pdfjsLib\r\n                        ?.version || version;\r\n\r\n                GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${versionPdfJS}/pdf.worker.js`;\r\n\r\n                getDocument(pdf).promise.then(\r\n                    (pdf) => {\r\n                        pdf.getPage(1).then((page) => {\r\n                            const scale = 2;\r\n\r\n                            const viewport = page.getViewport({ scale });\r\n\r\n                            // Prepare canvas\r\n                            const canvas = <canvas />;\r\n                            canvas.style.display = 'none';\r\n                            document.body.appendChild(canvas);\r\n                            const context = canvas.getContext('2d');\r\n                            canvas.height = viewport.height;\r\n                            canvas.width = viewport.width;\r\n\r\n                            // Render PDF page into canvas context\r\n                            const task = page.render({\r\n                                canvasContext: context,\r\n                                viewport: viewport\r\n                            });\r\n                            task.promise.then(() => {\r\n                                downloadURI(\r\n                                    canvas.toDataURL(\r\n                                        `image/${this._form.typeExport}`\r\n                                    ),\r\n                                    this._config.filename +\r\n                                        `.${this._form.typeExport}`\r\n                                );\r\n                                canvas.remove();\r\n                                resolve();\r\n                            });\r\n                        });\r\n                    },\r\n                    (error: Error) => {\r\n                        reject(error);\r\n                        console.log(error);\r\n                    }\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Convert an SVGElement to an PNG string\r\n     * @param svg\r\n     * @returns\r\n     */\r\n    _processSvgImage = (svg: SVGElement): Promise<string> => {\r\n        // https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser#answer-58142441\r\n        return new Promise((resolve, reject) => {\r\n            const svgToPng = (svg: SVGElement, callback) => {\r\n                const url = getSvgUrl(svg);\r\n                svgUrlToPng(url, (imgData: string) => {\r\n                    callback(imgData);\r\n                    URL.revokeObjectURL(url);\r\n                });\r\n            };\r\n\r\n            const getSvgUrl = (svg: SVGElement) => {\r\n                return URL.createObjectURL(\r\n                    new Blob([svg.outerHTML], { type: 'image/svg+xml' })\r\n                );\r\n            };\r\n\r\n            const svgUrlToPng = (svgUrl: string, callback) => {\r\n                const svgImage = document.createElement('img');\r\n                document.body.appendChild(svgImage);\r\n\r\n                svgImage.onerror = (err) => {\r\n                    console.error(err);\r\n                    return reject(this._i18n.errorImage);\r\n                };\r\n\r\n                svgImage.onload = () => {\r\n                    try {\r\n                        const canvas = document.createElement('canvas');\r\n                        canvas.width = svgImage.clientWidth;\r\n                        canvas.height = svgImage.clientHeight;\r\n                        const canvasCtx = canvas.getContext('2d');\r\n                        canvasCtx.drawImage(svgImage, 0, 0);\r\n                        const imgData = canvas.toDataURL('image/png');\r\n                        callback(imgData);\r\n                        document.body.removeChild(svgImage);\r\n                    } catch (err) {\r\n                        return reject(err);\r\n                    }\r\n                };\r\n                svgImage.src = svgUrl;\r\n            };\r\n\r\n            svgToPng(svg, (imgData: string) => {\r\n                resolve(imgData);\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Adapted from http://hg.intevation.de/gemma/file/tip/client/src/components/Pdftool.vue#l252\r\n     * @protected\r\n     */\r\n    _calculateScaleDenominator(\r\n        resolution: number,\r\n        scaleResolution: number\r\n    ): number {\r\n        const pixelsPerMapMillimeter = resolution / 25.4;\r\n        return Math.round(\r\n            1000 *\r\n                pixelsPerMapMillimeter *\r\n                this._getMeterPerPixel(scaleResolution)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _getMeterPerPixel(scaleResolution: number): number {\r\n        const proj = this._view.getProjection();\r\n        return (\r\n            getPointResolution(proj, scaleResolution, this._view.getCenter()) *\r\n            proj.getMetersPerUnit()\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param position\r\n     * @param offset\r\n     * @param size\r\n     * @returns\r\n     * @protected\r\n     */\r\n    _calculateOffsetByPosition = (\r\n        position: string,\r\n        offset: { x: number; y: number },\r\n        size = 0\r\n    ): { x: number; y: number } => {\r\n        let x: number, y: number;\r\n\r\n        switch (position) {\r\n            case 'topleft':\r\n                x = offset.x + this._style.paperMargin;\r\n                y = offset.y + this._style.paperMargin + size;\r\n                break;\r\n\r\n            case 'topright':\r\n                x = this._pdf.width - offset.x - this._style.paperMargin;\r\n                y = offset.y + this._style.paperMargin + size;\r\n                break;\r\n\r\n            case 'bottomright':\r\n                x = this._pdf.width - offset.x - this._style.paperMargin;\r\n                y =\r\n                    this._pdf.height -\r\n                    offset.y -\r\n                    this._style.paperMargin -\r\n                    size;\r\n                break;\r\n\r\n            case 'bottomleft':\r\n                y =\r\n                    this._pdf.height -\r\n                    offset.y -\r\n                    this._style.paperMargin -\r\n                    size;\r\n                x = offset.x + this._style.paperMargin;\r\n                break;\r\n        }\r\n\r\n        return { x, y };\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     * @param bkcolor\r\n     * @param brcolor\r\n     * @protected\r\n     */\r\n    _addRoundedBox = (\r\n        x: number,\r\n        y: number,\r\n        width: number,\r\n        height: number,\r\n        bkcolor: string,\r\n        brcolor: string\r\n    ): void => {\r\n        const rounding = 1;\r\n\r\n        this._pdf.doc.setDrawColor(brcolor);\r\n        this._pdf.doc.setFillColor(bkcolor);\r\n\r\n        this._pdf.doc.roundedRect(\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            rounding,\r\n            rounding,\r\n            'FD'\r\n        );\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param fontSize\r\n     * @param color\r\n     * @param align\r\n     * @param str\r\n     * @protected\r\n     */\r\n    _addText = (\r\n        x: number,\r\n        y: number,\r\n        width: number,\r\n        fontSize: number,\r\n        color: string,\r\n        align: TextOptionsLight['align'] = 'left',\r\n        str: string\r\n    ): void => {\r\n        this._pdf.doc.setTextColor(color);\r\n        this._pdf.doc.setFontSize(fontSize);\r\n\r\n        this._pdf.doc.text(str, x, y, {\r\n            align: align\r\n        });\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param position\r\n     * @param offset\r\n     * @param width\r\n     * @param fontSize\r\n     * @param color\r\n     * @param align\r\n     * @param str\r\n     * @protected\r\n     */\r\n    _addTextByOffset = (\r\n        position: string,\r\n        offset: { x: number; y: number },\r\n        width: number,\r\n        fontSize: number,\r\n        color: string,\r\n        align: TextOptionsLight['align'],\r\n        str: string\r\n    ): void => {\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n        const fixX = align === 'center' ? x - width / 2 : x;\r\n        this._addText(fixX, y, width, fontSize, color, align, str);\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _addDescription = (): void => {\r\n        const str = this._form.description.trim();\r\n        const position = 'topleft';\r\n        const offset = { x: 2, y: 2 };\r\n        const fontSize = 8;\r\n        const maxWidth = 50;\r\n\r\n        const paddingBack = 4;\r\n\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n\r\n        this._pdf.doc.setTextColor(this._style.txcolor);\r\n        this._pdf.doc.setFontSize(fontSize);\r\n\r\n        const { w, h } = this._pdf.doc.getTextDimensions(str, {\r\n            maxWidth: maxWidth\r\n        });\r\n\r\n        this._addRoundedBox(\r\n            x,\r\n            y,\r\n            w + paddingBack * 2,\r\n            h + paddingBack,\r\n            this._style.bkcolor,\r\n            this._style.brcolor\r\n        );\r\n\r\n        this._pdf.doc.text(str, x + paddingBack, y + paddingBack, {\r\n            align: 'left',\r\n            maxWidth: maxWidth\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This functions is a mess\r\n     * @returns\r\n     * @protected\r\n     */\r\n    _addWatermark = async (watermark: IWatermark): Promise<void> => {\r\n        const position = 'topright';\r\n        const offset = { x: 0, y: 0 };\r\n        const fontSize = 14;\r\n        const imageSize = 12;\r\n        const fontSizeSubtitle = fontSize / 1.8;\r\n        let back = false;\r\n\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n\r\n        const paddingBack = 2;\r\n\r\n        let acumulativeWidth = watermark.logo ? imageSize + 0.5 : 0;\r\n\r\n        if (watermark.title) {\r\n            this._pdf.doc.setTextColor(watermark.titleColor);\r\n            this._pdf.doc.setFontSize(fontSize);\r\n            this._pdf.doc.setFont('helvetica', 'bold');\r\n\r\n            // This function works bad\r\n            let { w } = this._pdf.doc.getTextDimensions(watermark.title);\r\n\r\n            if (watermark.subtitle) {\r\n                this._pdf.doc.setFontSize(fontSizeSubtitle);\r\n                const wSub = this._pdf.doc.getTextDimensions(\r\n                    watermark.subtitle\r\n                ).w;\r\n                w = wSub - 4 > w ? wSub : w + 4; // weird fix needed\r\n                this._pdf.doc.setFontSize(fontSize);\r\n            } else {\r\n                w += 4;\r\n            }\r\n\r\n            // Adaptable width, fixed height\r\n            const height = 16;\r\n            const widthBack = w + paddingBack;\r\n\r\n            this._addRoundedBox(\r\n                x - widthBack + 4 - acumulativeWidth,\r\n                y - 4,\r\n                widthBack + acumulativeWidth,\r\n                height,\r\n                '#ffffff',\r\n                '#ffffff'\r\n            );\r\n            back = true;\r\n\r\n            this._pdf.doc.text(\r\n                watermark.title,\r\n                x,\r\n                y + paddingBack + 3 + (!watermark.subtitle ? 2 : 0),\r\n                {\r\n                    align: 'right'\r\n                }\r\n            );\r\n\r\n            acumulativeWidth += w;\r\n        }\r\n\r\n        if (watermark.subtitle) {\r\n            this._pdf.doc.setTextColor(watermark.subtitleColor);\r\n            this._pdf.doc.setFontSize(fontSizeSubtitle);\r\n            this._pdf.doc.setFont('helvetica', 'normal');\r\n\r\n            if (!back) {\r\n                const { w } = this._pdf.doc.getTextDimensions(\r\n                    watermark.subtitle\r\n                );\r\n                const widthBack = paddingBack * 2 + w;\r\n                this._addRoundedBox(\r\n                    x - widthBack + 3 - acumulativeWidth,\r\n                    y - 4,\r\n                    widthBack + acumulativeWidth,\r\n                    16,\r\n                    '#ffffff',\r\n                    '#ffffff'\r\n                );\r\n                acumulativeWidth += widthBack;\r\n                back = true;\r\n            }\r\n\r\n            const marginTop = watermark.title ? fontSize / 2 : 4;\r\n\r\n            this._pdf.doc.text(\r\n                watermark.subtitle,\r\n                x,\r\n                y + paddingBack + marginTop,\r\n                {\r\n                    align: 'right'\r\n                }\r\n            );\r\n        }\r\n\r\n        if (!watermark.logo) return;\r\n\r\n        const addImage = (image: HTMLImageElement): void => {\r\n            this._pdf.doc.addImage(\r\n                image,\r\n                'PNG',\r\n                x - acumulativeWidth + paddingBack * 2 - 1,\r\n                y - 1,\r\n                imageSize,\r\n                imageSize\r\n            );\r\n        };\r\n\r\n        if (!back) {\r\n            const widthBack = acumulativeWidth + paddingBack;\r\n            this._addRoundedBox(\r\n                x - widthBack + 4,\r\n                y - 4,\r\n                widthBack,\r\n                16,\r\n                '#ffffff',\r\n                '#ffffff'\r\n            );\r\n        }\r\n\r\n        if (watermark.logo instanceof Image) {\r\n            addImage(watermark.logo);\r\n            return;\r\n        } else {\r\n            let imgData: string;\r\n\r\n            if (typeof watermark.logo === 'string') {\r\n                imgData = watermark.logo;\r\n            } else if (watermark.logo instanceof SVGElement) {\r\n                imgData = await this._processSvgImage(watermark.logo);\r\n            } else {\r\n                throw this._i18n.errorImage;\r\n            }\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const image = new Image(imageSize, imageSize);\r\n                image.onload = () => {\r\n                    try {\r\n                        addImage(image);\r\n                        resolve();\r\n                    } catch (err) {\r\n                        return reject(err);\r\n                    }\r\n                };\r\n                image.onerror = () => {\r\n                    return reject(this._i18n.errorImage);\r\n                };\r\n                image.src = imgData;\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _addDate = (): void => {\r\n        const position = 'bottomright';\r\n        const width = 250;\r\n        const offset = {\r\n            x: 0,\r\n            y: -5\r\n        };\r\n        const fontSize = 7;\r\n        const txcolor = '#000000';\r\n        const align = 'right';\r\n\r\n        this._pdf.doc.setFont('helvetica', 'normal');\r\n        const str = new Date(Date.now()).toLocaleDateString(\r\n            this._config.dateFormat\r\n        );\r\n        this._addTextByOffset(\r\n            position,\r\n            offset,\r\n            width,\r\n            fontSize,\r\n            txcolor,\r\n            align,\r\n            str\r\n        );\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _addUrl = (): void => {\r\n        const position = 'bottomleft';\r\n        const width = 250;\r\n        const offset = {\r\n            x: 0,\r\n            y: -6.5\r\n        };\r\n        const fontSize = 6;\r\n        const txcolor = '#000000';\r\n        const align = 'left';\r\n\r\n        this._pdf.doc.setFont('helvetica', 'italic');\r\n        const str = window.location.href;\r\n        this._addTextByOffset(\r\n            position,\r\n            offset,\r\n            width,\r\n            fontSize,\r\n            txcolor,\r\n            align,\r\n            str\r\n        );\r\n    };\r\n    /**\r\n     * @protected\r\n     */\r\n    _addSpecs = (): void => {\r\n        const position = 'bottomleft';\r\n        const offset = {\r\n            x: 0,\r\n            y: -3.5\r\n        };\r\n        const fontSize = 6;\r\n        const txcolor = '#000000';\r\n        const align = 'left';\r\n\r\n        this._pdf.doc.setFont('helvetica', 'bold');\r\n        this._pdf.doc.setFontSize(fontSize);\r\n\r\n        const scale = `${\r\n            this._i18n.scale\r\n        } 1:${this._scaleDenominator.toLocaleString('de')}`;\r\n        const paper = `${this._i18n.paper} ${this._form.format.toUpperCase()}`;\r\n        const dpi = `${this._form.resolution} DPI`;\r\n\r\n        const specs = [scale, dpi, paper];\r\n        const str = specs.join(' - ');\r\n\r\n        const { w } = this._pdf.doc.getTextDimensions(str);\r\n\r\n        this._addTextByOffset(\r\n            position,\r\n            offset,\r\n            w,\r\n            fontSize,\r\n            txcolor,\r\n            align,\r\n            str\r\n        );\r\n    };\r\n\r\n    /**\r\n     * The attributions are obtained from the Control in the DOM.\r\n     * @protected\r\n     */\r\n    _addAttributions = (): void => {\r\n        const attributionsUl = document.querySelector('.ol-attribution ul');\r\n\r\n        if (!attributionsUl) return;\r\n\r\n        const ATTRI_SEPATATOR = ' · ';\r\n\r\n        const position = 'bottomright';\r\n        const offset = { x: 1, y: 1 };\r\n        const fontSize = 7;\r\n\r\n        this._pdf.doc.setFont('helvetica', 'normal');\r\n        this._pdf.doc.setFontSize(fontSize);\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n\r\n        let xPos = x;\r\n\r\n        const { w, h } = this._pdf.doc.getTextDimensions(\r\n            attributionsUl.textContent\r\n        );\r\n\r\n        const paddingBack = 4;\r\n\r\n        const whiteSpaceWidth =\r\n            this._pdf.doc.getTextDimensions(ATTRI_SEPATATOR).w;\r\n\r\n        const attributions = document.querySelectorAll('.ol-attribution li');\r\n\r\n        const sumWhiteSpaceWidth = whiteSpaceWidth * (attributions.length - 1);\r\n\r\n        this._addRoundedBox(\r\n            x - w - sumWhiteSpaceWidth - 2,\r\n            y - h,\r\n            w + paddingBack + sumWhiteSpaceWidth + 2,\r\n            h + paddingBack,\r\n            '#ffffff',\r\n            '#ffffff'\r\n        );\r\n\r\n        Array.from(attributions)\r\n            .reverse()\r\n            .forEach((attribution, index) => {\r\n                Array.from(attribution.childNodes)\r\n                    .reverse()\r\n                    .forEach((node) => {\r\n                        const content = node.textContent;\r\n\r\n                        if ('href' in node) {\r\n                            this._pdf.doc.setTextColor('#0077cc');\r\n                            this._pdf.doc.textWithLink(content, xPos, y, {\r\n                                align: 'right',\r\n                                url: (node as HTMLAnchorElement).href\r\n                            });\r\n                        } else {\r\n                            this._pdf.doc.setTextColor('#666666');\r\n                            this._pdf.doc.text(content, xPos, y, {\r\n                                align: 'right'\r\n                            });\r\n                        }\r\n\r\n                        const { w } = this._pdf.doc.getTextDimensions(content);\r\n                        xPos -= w;\r\n                    });\r\n\r\n                // Excldue last element\r\n                if (index !== attributions.length - 1) {\r\n                    // To add separation between diferents attributtions\r\n                    this._pdf.doc.text(ATTRI_SEPATATOR, xPos, y, {\r\n                        align: 'right'\r\n                    });\r\n\r\n                    xPos -= whiteSpaceWidth;\r\n                }\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Adapted from http://hg.intevation.de/gemma/file/tip/client/src/components/Pdftool.vue#l252\r\n     * @protected\r\n     */\r\n    _addScaleBar = (): void => {\r\n        const offset = { x: 2, y: 2 };\r\n\r\n        const maxWidth = 90; // in mm\r\n\r\n        // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10#Polyfill\r\n        const log10 =\r\n            Math.log10 || // more precise, but unsupported by IE\r\n            function (x) {\r\n                return Math.log(x) * Math.LOG10E;\r\n            };\r\n\r\n        let maxLength = maxWidth * this._scaleDenominator;\r\n\r\n        let unit: string;\r\n        let unitConversionFactor: number;\r\n\r\n        if (this._config.units === 'metric') {\r\n            unit = 'mm';\r\n\r\n            const millimetre = 1;\r\n            const metre = 1000;\r\n            const kilometre = metre * 1000;\r\n\r\n            unitConversionFactor = millimetre;\r\n\r\n            if (maxLength >= kilometre * 10) {\r\n                unit = 'km';\r\n                unitConversionFactor = 1e6;\r\n            } else if (maxLength >= metre * 10) {\r\n                unit = 'm';\r\n                unitConversionFactor = metre;\r\n            }\r\n        } else if (this._config.units === 'imperial') {\r\n            const inch = 25.4; // Millimetre to inch\r\n            const mile = inch * 63360;\r\n            const yard = inch * 36;\r\n\r\n            unit = 'in';\r\n            unitConversionFactor = inch;\r\n\r\n            if (maxLength >= mile * 10) {\r\n                unit = 'mi';\r\n                unitConversionFactor = mile;\r\n            } else if (maxLength >= yard * 10) {\r\n                unit = 'yd';\r\n                unitConversionFactor = yard;\r\n            }\r\n        }\r\n\r\n        maxLength /= unitConversionFactor;\r\n\r\n        const unroundedLength = maxLength;\r\n        const numberOfDigits = Math.floor(log10(unroundedLength));\r\n        const factor = Math.pow(10, numberOfDigits);\r\n        const mapped = unroundedLength / factor;\r\n\r\n        let length = Math.floor(maxLength); // just to have an upper limit\r\n\r\n        // manually only use numbers that are very nice to devide by 4\r\n        // note that this is taken into account for rounding later\r\n        if (mapped > 8) {\r\n            length = 8 * factor;\r\n        } else if (mapped > 4) {\r\n            length = 4 * factor;\r\n        } else if (mapped > 2) {\r\n            length = 2 * factor;\r\n        } else {\r\n            length = factor;\r\n        }\r\n\r\n        let size = (length * unitConversionFactor) / this._scaleDenominator / 4;\r\n\r\n        const percentageMargin = this._style.paperMargin\r\n            ? ((this._style.paperMargin * 2) / this._pdf.width) * 100\r\n            : null;\r\n\r\n        // Reduce length acording to margins\r\n        size = percentageMargin\r\n            ? (size / 100) * (100 - percentageMargin)\r\n            : size;\r\n\r\n        const fullSize = size * 4;\r\n\r\n        // x/y defaults to offset for topleft corner (normal x/y coordinates)\r\n        const x = offset.x + this._style.paperMargin;\r\n        let y = offset.y + this._style.paperMargin;\r\n\r\n        y = this._pdf.height - offset.y - 10 - this._style.paperMargin;\r\n\r\n        // to give the outer white box 4mm padding\r\n        const scaleBarX = x + 4;\r\n        const scaleBarY = y + 5; // 5 because above the scalebar will be the numbers\r\n\r\n        // draw outer box\r\n        this._addRoundedBox(\r\n            x,\r\n            y,\r\n            fullSize + 8,\r\n            10,\r\n            this._style.bkcolor,\r\n            this._style.brcolor\r\n        );\r\n\r\n        // draw first part of scalebar\r\n        this._pdf.doc.setDrawColor(this._style.brcolor);\r\n        this._pdf.doc.setFillColor(0, 0, 0);\r\n        this._pdf.doc.rect(scaleBarX, scaleBarY, size, 1, 'FD');\r\n\r\n        // draw second part of scalebar\r\n        this._pdf.doc.setDrawColor(this._style.brcolor);\r\n        this._pdf.doc.setFillColor(255, 255, 255);\r\n        this._pdf.doc.rect(scaleBarX + size, scaleBarY, size, 1, 'FD');\r\n\r\n        // draw third part of scalebar\r\n        this._pdf.doc.setDrawColor(this._style.brcolor);\r\n        this._pdf.doc.setFillColor(0, 0, 0);\r\n        this._pdf.doc.rect(scaleBarX + size * 2, scaleBarY, size * 2, 1, 'FD');\r\n\r\n        // draw numeric labels above scalebar\r\n        this._pdf.doc.setTextColor(this._style.txcolor);\r\n        this._pdf.doc.setFontSize(6);\r\n        this._pdf.doc.text('0', scaleBarX, scaleBarY - 1);\r\n        // /4 and could give 2.5. We still round, because of floating point arith\r\n        this._pdf.doc.text(\r\n            String(Math.round((length * 10) / 4) / 10),\r\n            scaleBarX + size - 1,\r\n            scaleBarY - 1\r\n        );\r\n        this._pdf.doc.text(\r\n            String(Math.round(length / 2)),\r\n            scaleBarX + size * 2 - 2,\r\n            scaleBarY - 1\r\n        );\r\n        this._pdf.doc.text(\r\n            Math.round(length).toString() + ' ' + unit,\r\n            scaleBarX + size * 4 - 4,\r\n            scaleBarY - 1\r\n        );\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param imgSrc\r\n     * @returns\r\n     * @protected\r\n     */\r\n    _addCompass = async (\r\n        imgSrc: HTMLImageElement | string | SVGElement\r\n    ): Promise<void> => {\r\n        const position = 'bottomright';\r\n        const offset = { x: 2, y: 6 };\r\n        const size = 6;\r\n        const rotationRadians = this._view.getRotation();\r\n        const imageSize = 100;\r\n\r\n        const { x, y } = this._calculateOffsetByPosition(\r\n            position,\r\n            offset,\r\n            size\r\n        );\r\n\r\n        const addRotation = (image: CanvasImageSource) => {\r\n            const canvas = document.createElement('canvas');\r\n\r\n            // Must be bigger than the image to prevent clipping\r\n            canvas.height = 120;\r\n            canvas.width = 120;\r\n            const context = canvas.getContext('2d');\r\n\r\n            context.translate(canvas.width * 0.5, canvas.height * 0.5);\r\n            context.rotate(rotationRadians);\r\n            context.translate(-canvas.width * 0.5, -canvas.height * 0.5);\r\n            context.drawImage(\r\n                image,\r\n                (canvas.height - imageSize) / 2,\r\n                (canvas.width - imageSize) / 2,\r\n                imageSize,\r\n                imageSize\r\n            );\r\n\r\n            // Add back circle\r\n            const xCircle = x - size;\r\n            const yCircle = y;\r\n            this._pdf.doc.setDrawColor(this._style.brcolor);\r\n            this._pdf.doc.setFillColor(this._style.bkcolor);\r\n            this._pdf.doc.circle(xCircle, yCircle, size, 'FD');\r\n\r\n            return canvas;\r\n        };\r\n\r\n        const addImage = (image: CanvasImageSource): void => {\r\n            const rotatedCanvas = addRotation(image);\r\n\r\n            const sizeImage = size * 1.5;\r\n            const xImage = x - sizeImage - size / 4.3;\r\n            const yImage = y - sizeImage / 2;\r\n\r\n            this._pdf.doc.addImage(\r\n                rotatedCanvas,\r\n                'PNG',\r\n                xImage,\r\n                yImage,\r\n                sizeImage,\r\n                sizeImage\r\n            );\r\n        };\r\n\r\n        let image: HTMLImageElement;\r\n\r\n        if (imgSrc instanceof Image) {\r\n            addImage(image);\r\n            return;\r\n        } else {\r\n            let imgData: string;\r\n\r\n            if (typeof imgSrc === 'string') {\r\n                imgData = imgSrc;\r\n            } else if (imgSrc instanceof SVGElement) {\r\n                imgData = await this._processSvgImage(imgSrc);\r\n            } else {\r\n                throw this._i18n.errorImage;\r\n            }\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const image = new Image(imageSize, imageSize);\r\n\r\n                image.onload = () => {\r\n                    addImage(image);\r\n                    resolve();\r\n                };\r\n\r\n                image.onerror = () => {\r\n                    reject(this._i18n.errorImage);\r\n                };\r\n\r\n                image.src = imgData;\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n * @protected\r\n */\r\ninterface IWindow extends Window {\r\n    jspdf: any;\r\n    pdfjsLib: any;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n * @protected\r\n */\r\nexport interface IPdf {\r\n    doc: jsPDF;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\ninterface IPdfOptions {\r\n    view: View;\r\n    form: IPrintOptions;\r\n    i18n: I18n;\r\n    config: Options;\r\n    height: number;\r\n    width: number;\r\n    scaleResolution: number;\r\n}\r\n","/**\n * Vanilla JS Modal compatible with Bootstrap\n * modal-vanilla 0.12.0 <https://github.com/KaneCohen/modal-vanilla>\n * Copyright 2020 Kane Cohen <https://github.com/KaneCohen>\n * Available under BSD-3-Clause license\n */\nimport EventEmitter from 'events';\n\nlet _factory = null;\n\nconst _defaults = Object.freeze({\n  el: null,               // Existing DOM element that will be 'Modal-ized'.\n  animate: true,          // Show Modal using animation.\n  animateClass: 'fade',   //\n  animateInClass: 'show', //\n  appendTo: 'body',       // DOM element to which constructed Modal will be appended.\n  backdrop: true,         // Boolean or 'static', Show Modal backdrop blocking content.\n  keyboard: true,         // Close modal on esc key.\n  title: false,           // Content of the title in the constructed dialog.\n  header: true,           // Show header content.\n  content: false,         // Either string or an HTML element.\n  footer: true,           // Footer content. By default will use buttons.\n  buttons: null,          //\n  headerClose: true,      // Show close button in the header.\n  construct: false,       // Creates new HTML with a given content.\n  transition: 300,        //\n  backdropTransition: 150 //\n});\n\nconst _buttons = deepFreeze({\n  dialog: [\n    {text: 'Cancel',\n      value: false,\n      attr: {\n        'class': 'btn btn-default',\n        'data-dismiss': 'modal'\n      }\n    },\n    {text: 'OK',\n      value: true,\n      attr: {\n        'class': 'btn btn-primary',\n        'data-dismiss': 'modal'\n      }\n    }\n  ],\n  alert: [\n    {text: 'OK',\n      attr: {\n        'class': 'btn btn-primary',\n        'data-dismiss': 'modal'\n      }\n    }\n  ],\n  confirm: [\n    {text: 'Cancel',\n      value: false,\n      attr: {\n        'class': 'btn btn-default',\n        'data-dismiss': 'modal'\n      }\n    },\n    {text: 'OK',\n      value: true,\n      attr: {\n        'class': 'btn btn-primary',\n        'data-dismiss': 'modal'\n      }\n    }\n  ]\n});\n\nconst _templates = {\n  container: '<div class=\"modal\"></div>',\n  dialog: '<div class=\"modal-dialog\"></div>',\n  content: '<div class=\"modal-content\"></div>',\n  header: '<div class=\"modal-header\"></div>',\n  headerClose: '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>',\n  body: '<div class=\"modal-body\"></div>',\n  footer: '<div class=\"modal-footer\"></div>',\n  backdrop: '<div class=\"modal-backdrop\"></div>'\n};\n\nfunction deepFreeze(obj) {\n  for (let k in obj) {\n    if (Array.isArray(obj[k])) {\n      obj[k].forEach(v => {\n        deepFreeze(v);\n      });\n    } else if (obj[k] !== null && typeof obj[k] === 'object') {\n      Object.freeze(obj[k]);\n    }\n  }\n  return Object.freeze(obj);\n}\n\nfunction guid() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16) +\n    (((1 + Math.random()) * 0x10000) | 0).toString(16);\n}\n\nfunction data(el, prop, value) {\n let prefix = 'data';\n let elData = el[prefix] || {};\n if (typeof value === 'undefined') {\n   if (el[prefix] && el[prefix][prop]) {\n     return el[prefix][prop];\n   } else {\n     var dataAttr = el.getAttribute(`${prefix}-${prop}`);\n     if (typeof dataAttr !== 'undefined') {\n       return dataAttr;\n     }\n     return null;\n   }\n } else {\n   elData[prop] = value;\n   el[prefix] = elData;\n   return el;\n }\n}\n\nfunction build(html, all) {\n  if (html.nodeName) return html;\n  html = html.replace(/(\\t|\\n$)/g, '');\n\n  if (!_factory) {\n    _factory = document.createElement('div');\n  }\n\n  _factory.innerHTML = '';\n  _factory.innerHTML = html;\n  if (all === true) {\n    return _factory.childNodes;\n  } else {\n    return _factory.childNodes[0];\n  }\n}\n\nfunction calcScrollbarWidth() {\n  let inner;\n  let width;\n  let outerWidth;\n  let outer = document.createElement('div');\n  Object.assign(outer.style, {\n    visibility: 'hidden',\n    width: '100px'\n  });\n  document.body.appendChild(outer);\n\n  outerWidth = outer.offsetWidth;\n  outer.style.overflow = 'scroll';\n\n  inner = document.createElement('div');\n  inner.style.width = '100%';\n  outer.appendChild(inner);\n\n  width = outerWidth - inner.offsetWidth;\n  document.body.removeChild(outer);\n\n  return width;\n}\n\nfunction getPath(node) {\n  let nodes = [node];\n  while (node.parentNode) {\n    node = node.parentNode;\n    nodes.push(node);\n  }\n  return nodes;\n}\n\nclass Modal extends EventEmitter {\n  static set templates(templates) {\n    this._baseTemplates = templates;\n  }\n\n  static get templates() {\n    return Object.assign({}, _templates, Modal._baseTemplates || {});\n  }\n\n  static set buttons(buttons) {\n    this._baseButtons = buttons;\n  }\n\n  static get buttons() {\n    return Object.assign({}, _buttons, Modal._baseButtons || {});\n  }\n\n  static set options(options) {\n    this._baseOptions = options;\n  }\n\n  static get options() {\n    return Object.assign({}, _defaults, Modal._baseOptions || {});\n  }\n\n  static get version() {\n    return '0.12.0';\n  }\n\n  static alert(message, _options = {}) {\n    let options = Object.assign({},\n      _defaults,\n      {\n        title:  message,\n        content: false,\n        construct: true,\n        headerClose: false,\n        buttons: Modal.buttons.alert\n      },\n      _options\n    );\n\n    return new Modal(options);\n  }\n\n  static confirm(question, _options = {}) {\n    let options = Object.assign({},\n      _defaults,\n      {\n        title:  question,\n        content: false,\n        construct: true,\n        headerClose: false,\n        buttons: Modal.buttons.confirm\n      },\n      _options\n    );\n\n    return new Modal(options);\n  }\n\n  constructor(options = {}) {\n    super();\n\n    this.id = guid();\n    this.el = null;\n    this._html = {};\n    this._events = {};\n    this._visible = false;\n    this._pointerInContent = false;\n    this._options = Object.assign({}, Modal.options, options);\n    this._templates = Object.assign({}, Modal.templates, options.templates || {});\n    this._html.appendTo = document.querySelector(this._options.appendTo);\n    this._scrollbarWidth = calcScrollbarWidth();\n\n    if (this._options.buttons === null) {\n      this._options.buttons = Modal.buttons.dialog;\n    }\n\n    if (this._options.el) {\n      let el = this._options.el;\n      if (typeof this._options.el == 'string') {\n        el = document.querySelector(this._options.el);\n        if (! el) {\n          throw new Error(`Selector: DOM Element ${this._options.el} not found.`);\n        }\n      }\n      data(el, 'modal', this);\n      this.el = el;\n    } else {\n      this._options.construct = true;\n    }\n\n    if (this._options.construct) {\n      this._render();\n    } else {\n      this._mapDom();\n    }\n  }\n\n  _render() {\n    let html = this._html;\n    let o = this._options;\n    let t = this._templates;\n    let animate = o.animate ? o.animateClass : false;\n\n    html.container = build(t.container);\n    html.dialog = build(t.dialog);\n    html.content = build(t.content);\n    html.header = build(t.header);\n    html.headerClose = build(t.headerClose);\n    html.body = build(t.body);\n    html.footer = build(t.footer);\n    if (animate) html.container.classList.add(animate);\n\n    this._setHeader();\n    this._setContent();\n    this._setFooter();\n\n    this.el = html.container;\n\n    html.dialog.appendChild(html.content);\n    html.container.appendChild(html.dialog);\n\n    return this;\n  }\n\n  _mapDom() {\n    let html = this._html;\n    let o = this._options;\n\n    if (this.el.classList.contains(o.animateClass)) {\n      o.animate = true;\n    }\n\n    html.container = this.el;\n    html.dialog = this.el.querySelector('.modal-dialog');\n    html.content = this.el.querySelector('.modal-content');\n    html.header = this.el.querySelector('.modal-header');\n    html.headerClose = this.el.querySelector('.modal-header .close');\n    html.body = this.el.querySelector('.modal-body');\n    html.footer = this.el.querySelector('.modal-footer');\n\n    this._setHeader();\n    this._setContent();\n    this._setFooter();\n\n    return this;\n  }\n\n  _setHeader() {\n    let html = this._html;\n    let o = this._options;\n\n    if (o.header && html.header) {\n      if (o.title.nodeName) {\n        html.header.innerHTML = o.title.outerHTML;\n      } else if (typeof o.title === 'string') {\n        html.header.innerHTML = `<h4 class=\"modal-title\">${o.title}</h4>`;\n      }\n      // Add header close button only to constructed modals.\n      if (this.el === null && html.headerClose && o.headerClose) {\n        html.header.appendChild(html.headerClose);\n      }\n      if (o.construct) {\n        html.content.appendChild(html.header);\n      }\n    }\n  }\n\n  _setContent() {\n    let html = this._html;\n    let o = this._options;\n\n    if (o.content && html.body) {\n      if (typeof o.content === 'string') {\n        html.body.innerHTML = o.content;\n      } else {\n        html.body.innerHTML = o.content.outerHTML;\n      }\n      if (o.construct) {\n        html.content.appendChild(html.body);\n      }\n    }\n  }\n\n  _setFooter() {\n    let html = this._html;\n    let o = this._options;\n\n    if (o.footer && html.footer) {\n      if (o.footer.nodeName) {\n        html.footer.ineerHTML = o.footer.outerHTML;\n      } else if (typeof o.footer === 'string') {\n        html.footer.innerHTML = o.footer;\n      } else if (! html.footer.children.length) {\n        o.buttons.forEach((button) => {\n          let el = document.createElement('button');\n          data(el, 'button', button);\n          el.innerHTML = button.text;\n          el.setAttribute('type', 'button');\n          for (let j in button.attr) {\n            el.setAttribute(j, button.attr[j]);\n          }\n          html.footer.appendChild(el);\n        });\n      }\n      if (o.construct) {\n        html.content.appendChild(html.footer);\n      }\n    }\n\n  }\n\n  _setEvents() {\n    let o = this._options;\n    let html = this._html;\n\n    this._events.keydownHandler = this._handleKeydownEvent.bind(this);\n    document.body.addEventListener('keydown',\n      this._events.keydownHandler\n    );\n\n    this._events.mousedownHandler = this._handleMousedownEvent.bind(this);\n    html.container.addEventListener('mousedown',\n      this._events.mousedownHandler\n    );\n\n    this._events.clickHandler = this._handleClickEvent.bind(this);\n    html.container.addEventListener('click',\n      this._events.clickHandler\n    );\n\n    this._events.resizeHandler = this._handleResizeEvent.bind(this);\n    window.addEventListener('resize',\n      this._events.resizeHandler\n    );\n  }\n\n  _handleMousedownEvent(e) {\n    this._pointerInContent = false;\n    let path = getPath(e.target);\n    path.every(node => {\n      if (node.classList && node.classList.contains('modal-content')) {\n        this._pointerInContent = true;\n        return false;\n      }\n      return true;\n    });\n  }\n\n  _handleClickEvent(e) {\n    let path = getPath(e.target);\n    path.every(node => {\n      if (node.tagName === 'HTML') {\n        return false;\n      }\n      if (this._options.backdrop !== true && node.classList.contains('modal')) {\n        return false;\n      }\n      if (node.classList.contains('modal-content')) {\n        return false;\n      }\n      if (node.getAttribute('data-dismiss') === 'modal') {\n        this.emit('dismiss', this, e, data(e.target, 'button'));\n        this.hide();\n        return false;\n      }\n\n      if (!this._pointerInContent && node.classList.contains('modal')) {\n        this.emit('dismiss', this, e, null);\n        this.hide();\n        return false;\n      }\n      return true;\n    });\n\n    this._pointerInContent = false;\n  }\n\n  _handleKeydownEvent(e) {\n    if (e.which === 27 && this._options.keyboard) {\n      this.emit('dismiss', this, e, null);\n      this.hide();\n    }\n  }\n\n  _handleResizeEvent(e) {\n    this._resize();\n  }\n\n  show() {\n    let o = this._options;\n    let html = this._html;\n    this.emit('show', this);\n\n    this._checkScrollbar();\n    this._setScrollbar();\n    document.body.classList.add('modal-open');\n\n    if (o.construct) {\n      html.appendTo.appendChild(html.container);\n    }\n\n    html.container.style.display = 'block';\n    html.container.scrollTop = 0;\n\n    if (o.backdrop !== false) {\n      this.once('showBackdrop', () => {\n        this._setEvents();\n\n        if (o.animate) html.container.offsetWidth; // Force reflow\n\n        html.container.classList.add(o.animateInClass);\n\n        setTimeout(() => {\n          this._visible = true;\n          this.emit('shown', this);\n        }, o.transition);\n      });\n      this._backdrop();\n    } else {\n      this._setEvents();\n\n      if (o.animate) html.container.offsetWidth; // Force reflow\n\n      html.container.classList.add(o.animateInClass);\n\n      setTimeout(() => {\n        this._visible = true;\n        this.emit('shown', this);\n      }, o.transition);\n    }\n    this._resize();\n\n    return this;\n  }\n\n  toggle() {\n    if (this._visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  _resize() {\n    var modalIsOverflowing =\n      this._html.container.scrollHeight > document.documentElement.clientHeight;\n\n    this._html.container.style.paddingLeft =\n      ! this.bodyIsOverflowing && modalIsOverflowing ? this._scrollbarWidth + 'px' : '';\n\n    this._html.container.style.paddingRight =\n      this.bodyIsOverflowing && ! modalIsOverflowing ? this._scrollbarWidth + 'px' : '';\n  }\n\n  _backdrop() {\n    let html = this._html;\n    let t = this._templates;\n    let o = this._options;\n    let animate = o.animate ? o.animateClass : false;\n\n    html.backdrop = build(t.backdrop);\n    if (animate) html.backdrop.classList.add(animate);\n    html.appendTo.appendChild(html.backdrop);\n\n    if (animate) html.backdrop.offsetWidth;\n\n    html.backdrop.classList.add(o.animateInClass);\n\n    setTimeout(() => {\n      this.emit('showBackdrop', this);\n    }, this._options.backdropTransition);\n  }\n\n  hide() {\n    let html = this._html;\n    let o = this._options;\n    let contCList = html.container.classList;\n    this.emit('hide', this);\n\n    contCList.remove(o.animateInClass);\n\n    if (o.backdrop) {\n      let backCList = html.backdrop.classList;\n      backCList.remove(o.animateInClass);\n    }\n\n    this._removeEvents();\n\n    setTimeout(() => {\n      document.body.classList.remove('modal-open');\n      document.body.style.paddingRight = this.originalBodyPad;\n    }, o.backdropTransition);\n\n    setTimeout(() => {\n      if (o.backdrop) {\n        html.backdrop.parentNode.removeChild(html.backdrop);\n      }\n      html.container.style.display = 'none';\n\n      if (o.construct) {\n        html.container.parentNode.removeChild(html.container);\n      }\n\n      this._visible = false;\n      this.emit('hidden', this);\n    }, o.transition);\n\n    return this;\n  }\n\n  _removeEvents() {\n    if (this._events.keydownHandler) {\n      document.body.removeEventListener('keydown',\n        this._events.keydownHandler\n      );\n    }\n\n    this._html.container.removeEventListener('mousedown',\n      this._events.mousedownHandler\n    );\n\n    this._html.container.removeEventListener('click',\n      this._events.clickHandler\n    );\n\n    window.removeEventListener('resize',\n      this._events.resizeHandler\n    );\n  }\n\n  _checkScrollbar() {\n    this.bodyIsOverflowing = document.body.clientWidth < window.innerWidth;\n  }\n\n  _setScrollbar() {\n    this.originalBodyPad = document.body.style.paddingRight || '';\n    if (this.bodyIsOverflowing) {\n      let basePadding = parseInt(this.originalBodyPad || 0, 10);\n      document.body.style.paddingRight = basePadding + this._scrollbarWidth + 'px';\n    }\n  }\n}\n\nexport default Modal;\n","import Modal from 'modal-vanilla';\r\nimport Map from 'ol/Map';\r\n\r\nimport { I18n, IValues, Options } from '../ol-pdf-printer';\r\nimport { getMapScale } from './Helpers';\r\nimport myPragma from '../myPragma';\r\n\r\n/**\r\n * @private\r\n */\r\nexport default class SettingsModal {\r\n    _modal: Modal;\r\n\r\n    constructor(\r\n        map: Map,\r\n        options: Options,\r\n        i18n: I18n,\r\n        printMap: (values: IValues, showLoading: boolean, delay: number) => void\r\n    ) {\r\n        this._modal = new Modal({\r\n            headerClose: true,\r\n            header: true,\r\n            animate: true,\r\n            title: i18n.printPdf,\r\n            content: this.Content(i18n, options),\r\n            footer: this.Footer(i18n, options),\r\n            ...options.modal\r\n        });\r\n\r\n        this._modal.on('dismiss', (modal: Modal, event: Event): void => {\r\n            const print = (event.target as HTMLElement).dataset.print;\r\n            if (!print) return;\r\n\r\n            const form = document.getElementById('printMap') as HTMLFormElement;\r\n\r\n            const formData = new FormData(form);\r\n\r\n            const values = {\r\n                format: formData.get('printFormat'),\r\n                orientation: formData.get('printOrientation'),\r\n                resolution: formData.get('printResolution'),\r\n                scale: formData.get('printScale'),\r\n                description: formData.get('printDescription'),\r\n                compass: formData.get('printCompass'),\r\n                attributions: formData.get('printAttributions'),\r\n                scalebar: formData.get('printScalebar'),\r\n                typeExport: this._modal.el.querySelector(\r\n                    'select[name=\"printTypeExport\"]'\r\n                ).value\r\n            };\r\n\r\n            printMap(\r\n                values,\r\n                /* showLoading */ true,\r\n                /* delay */ options.modal.transition\r\n            );\r\n        });\r\n\r\n        this._modal.on('shown', (): void => {\r\n            const actualScaleVal = getMapScale(map);\r\n            const actualScale = this._modal.el.querySelector('.actualScale');\r\n            (actualScale as HTMLInputElement).value = String(\r\n                actualScaleVal / 1000\r\n            );\r\n            actualScale.innerHTML = `${\r\n                i18n.current\r\n            } (1:${actualScaleVal.toLocaleString('de')})`;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param i18n\r\n     * @param options\r\n     * @returns\r\n     * @protected\r\n     */\r\n    Content(i18n: I18n, options: Options): HTMLElement {\r\n        const { scales, dpi, mapElements, paperSizes } = options;\r\n\r\n        return (\r\n            <form id=\"printMap\">\r\n                <div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printFormat\">{i18n.paperSize}</label>\r\n                        <select name=\"printFormat\" id=\"printFormat\">\r\n                            {paperSizes.map((paper) => (\r\n                                <option\r\n                                    value={paper.value}\r\n                                    {...(paper.selected\r\n                                        ? { selected: 'selected' }\r\n                                        : {})}\r\n                                >\r\n                                    {paper.value}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printOrientation\">\r\n                            {i18n.orientation}\r\n                        </label>\r\n                        <select name=\"printOrientation\" id=\"printOrientation\">\r\n                            <option value=\"landscape\" selected>\r\n                                {i18n.landscape}\r\n                            </option>\r\n                            <option value=\"portrait\">{i18n.portrait}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printResolution\">\r\n                            {i18n.resolution}\r\n                        </label>\r\n                        <select name=\"printResolution\" id=\"printResolution\">\r\n                            {dpi.map((d) => (\r\n                                <option\r\n                                    value={d.value}\r\n                                    {...(d.selected\r\n                                        ? { selected: 'selected' }\r\n                                        : {})}\r\n                                >\r\n                                    {d.value} dpi\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printScale\">{i18n.scale}</label>\r\n                        <select name=\"printScale\" id=\"printScale\">\r\n                            <option\r\n                                className=\"actualScale\"\r\n                                value=\"\"\r\n                                selected\r\n                            ></option>\r\n                            {scales.map((scale) => (\r\n                                <option value={scale}>\r\n                                    1:{(scale * 1000).toLocaleString('de')}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                {mapElements && (\r\n                    <div>\r\n                        {mapElements.description && (\r\n                            <div>\r\n                                <label htmlFor=\"printDescription\">\r\n                                    {i18n.addNote}\r\n                                </label>\r\n                                <textarea\r\n                                    id=\"printDescription\"\r\n                                    name=\"printDescription\"\r\n                                    rows=\"4\"\r\n                                ></textarea>\r\n                            </div>\r\n                        )}\r\n                        <div>{i18n.mapElements}</div>\r\n                        <div className=\"printElements\">\r\n                            {mapElements.compass && (\r\n                                <label htmlFor=\"printCompass\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"printCompass\"\r\n                                        name=\"printCompass\"\r\n                                        checked\r\n                                    />\r\n                                    {i18n.compass}\r\n                                </label>\r\n                            )}\r\n                            {mapElements.scalebar && (\r\n                                <label htmlFor=\"printScalebar\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"printScalebar\"\r\n                                        name=\"printScalebar\"\r\n                                        checked\r\n                                    />\r\n                                    {i18n.scale}\r\n                                </label>\r\n                            )}\r\n                            {mapElements.attributions && (\r\n                                <label htmlFor=\"printAttributions\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"printAttributions\"\r\n                                        name=\"printAttributions\"\r\n                                        checked\r\n                                    />\r\n                                    {i18n.layersAttributions}\r\n                                </label>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </form>\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param i18n\r\n     * @returns\r\n     * @protected\r\n     */\r\n    Footer(i18n: I18n, options: Options): string {\r\n        const { mimeTypeExports } = options;\r\n\r\n        return (\r\n            <div>\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"btn-sm btn btn-secondary\"\r\n                    data-dismiss=\"modal\"\r\n                >\r\n                    {i18n.cancel}\r\n                </button>\r\n                <div class=\"typeExportContainer\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"btn-sm btn btn-primary\"\r\n                        data-print=\"true\"\r\n                        data-dismiss=\"modal\"\r\n                    >\r\n                        {i18n.print}\r\n                    </button>\r\n                    <select\r\n                        className=\"typeExport\"\r\n                        name=\"printTypeExport\"\r\n                        id=\"printTypeExport\"\r\n                    >\r\n                        {mimeTypeExports.map((type) => (\r\n                            <option\r\n                                value={type.value}\r\n                                {...(type.selected\r\n                                    ? { selected: 'selected' }\r\n                                    : {})}\r\n                            >\r\n                                {type.value}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        ).outerHTML;\r\n    }\r\n\r\n    hide(): void {\r\n        this._modal.hide();\r\n    }\r\n\r\n    show(): void {\r\n        if (!this._modal._visible) this._modal.show();\r\n    }\r\n}\r\n","import Map from 'ol/Map';\r\nimport { METERS_PER_UNIT } from 'ol/proj/Units';\r\n\r\n/**\r\n *\r\n * @param map\r\n * @param opt_round\r\n * @returns\r\n * @protected\r\n */\r\nexport const getMapScale = (map: Map, opt_round = true): number => {\r\n    const dpi = 25.4 / 0.28;\r\n\r\n    const view = map.getView();\r\n    const unit = view.getProjection().getUnits();\r\n    const res = view.getResolution();\r\n    const inchesPerMetre = 39.37;\r\n\r\n    let scale = res * METERS_PER_UNIT[unit] * inchesPerMetre * dpi;\r\n\r\n    if (opt_round) {\r\n        scale = Math.round(scale);\r\n    }\r\n\r\n    return scale;\r\n};\r\n","import Modal from 'modal-vanilla';\r\nimport { I18n, Options } from '../ol-pdf-printer';\r\n\r\n/**\r\n * @private\r\n */\r\nexport default class ProcessingModal {\r\n    protected _modal: Modal;\r\n    protected _footer: string;\r\n    protected _i18n: I18n;\r\n\r\n    /**\r\n     *\r\n     * @param i18n\r\n     * @param options\r\n     * @param onEndPrint\r\n     * @protected\r\n     */\r\n    constructor(i18n: I18n, options: Options, onEndPrint: () => void) {\r\n        this._i18n = i18n;\r\n\r\n        this._modal = new Modal({\r\n            headerClose: false,\r\n            title: this._i18n.printing,\r\n            backdrop: 'static', // To prevent close on clicking backdrop\r\n            content: ' ',\r\n            footer: `\r\n            <button\r\n                type=\"button\"\r\n                class=\"btn-sm btn btn-secondary\"\r\n                data-dismiss=\"modal\"\r\n            >\r\n                ${this._i18n.cancel}\r\n            </button>\r\n            `,\r\n            ...options.modal\r\n        });\r\n\r\n        this._modal.on('dismiss', () => {\r\n            onEndPrint();\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param string\r\n     * @protected\r\n     */\r\n    _setContentModal(string: string): void {\r\n        this._modal._html.body.innerHTML = string;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param string\r\n     * @protected\r\n     */\r\n    _setFooterModal(string: string): void {\r\n        this._modal._html.footer.innerHTML = string;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param string\r\n     * @param footer\r\n     * @protected\r\n     */\r\n    show(string: string): void {\r\n        this._setContentModal(string);\r\n        if (!this._modal._visible) this._modal.show();\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    hide(): void {\r\n        this._modal.hide();\r\n    }\r\n}\r\n","import { I18n } from '../../ol-pdf-printer';\r\n\r\nexport const en: I18n = {\r\n    printPdf: 'Print PDF',\r\n    pleaseWait: 'Please wait...',\r\n    almostThere: 'Almost there...',\r\n    error: 'An error occurred while printing',\r\n    errorImage: 'An error ocurred while loading an image',\r\n    printing: 'Exporting',\r\n    cancel: 'Cancel',\r\n    close: 'Close',\r\n    print: 'Export',\r\n    mapElements: 'Map elements',\r\n    compass: 'Compass',\r\n    scale: 'Scale',\r\n    layersAttributions: 'Layer attributions',\r\n    addNote: 'Add note (optional)',\r\n    resolution: 'Resolution',\r\n    orientation: 'Orientation',\r\n    paperSize: 'Paper size',\r\n    landscape: 'Landscape',\r\n    portrait: 'Portrait',\r\n    current: 'Current',\r\n    paper: 'Paper'\r\n};\r\n","import { I18n } from '../../ol-pdf-printer';\r\n\r\nexport const es: I18n = {\r\n    printPdf: 'Exportar PDF',\r\n    pleaseWait: 'Por favor espere...',\r\n    almostThere: 'Ya casi...',\r\n    error: 'Error al generar pdf',\r\n    errorImage: 'Ocurrió un error al tratar de cargar una imagen',\r\n    printing: 'Exportando',\r\n    cancel: 'Cancelar',\r\n    close: 'Cerrar',\r\n    print: 'Exportar',\r\n    mapElements: 'Elementos en el mapa',\r\n    compass: 'Brújula',\r\n    scale: 'Escala',\r\n    layersAttributions: 'Atribuciones de capas',\r\n    addNote: 'Agregar nota (opcional)',\r\n    resolution: 'Resolución',\r\n    orientation: 'Orientación',\r\n    paperSize: 'Tamaño de página',\r\n    landscape: 'Paisaje',\r\n    portrait: 'Retrato',\r\n    current: 'Actual',\r\n    paper: 'Hoja'\r\n};\r\n","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","import Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport Control, { Options as ControlOptions } from 'ol/control/Control';\r\nimport TileWMS from 'ol/source/TileWMS';\r\nimport Tile from 'ol/layer/Tile';\r\nimport { getPointResolution } from 'ol/proj';\r\nimport { EventsKey } from 'ol/events';\r\nimport { unByKey } from 'ol/Observable';\r\n\r\nimport domtoimage from 'dom-to-image-improved';\r\n\r\nimport { Locale } from 'locale-enum';\r\n\r\nimport Pdf from './components/Pdf';\r\nimport SettingsModal from './components/SettingsModal';\r\nimport ProcessingModal from './components/ProcessingModal';\r\nimport * as i18n from './components/i18n/index.js';\r\n\r\nimport compassIcon from './assets/images/compass.svg';\r\nimport pdfIcon from './assets/images/pdf.svg';\r\n\r\nimport './assets/css/ol-pdf-printer.css';\r\n\r\n/**\r\n * @protected\r\n */\r\nconst DEFAULT_LANGUAGE = 'en';\r\n\r\n/**\r\n * @protected\r\n */\r\nconst CLASS_PRINT_MODE = 'printMode';\r\n\r\n/**\r\n * @protected\r\n */\r\nfunction deepObjectAssign(target, ...sources) {\r\n    sources.forEach((source) => {\r\n        Object.keys(source).forEach((key) => {\r\n            const s_val = source[key];\r\n            const t_val = target[key];\r\n            target[key] =\r\n                t_val &&\r\n                s_val &&\r\n                typeof t_val === 'object' &&\r\n                typeof s_val === 'object' &&\r\n                !Array.isArray(t_val) // Don't merge arrays\r\n                    ? deepObjectAssign(t_val, s_val)\r\n                    : s_val;\r\n        });\r\n    });\r\n    return target;\r\n}\r\n\r\nexport default class PdfPrinter extends Control {\r\n    protected _i18n: I18n;\r\n\r\n    protected _map: Map;\r\n    protected _view: View;\r\n    protected _mapTarget: HTMLElement;\r\n\r\n    protected _pdf: Pdf;\r\n\r\n    protected _processingModal: ProcessingModal;\r\n    protected _settingsModal: SettingsModal;\r\n\r\n    protected _initialized: boolean;\r\n\r\n    protected _timeoutProcessing: ReturnType<typeof setTimeout>;\r\n\r\n    protected _initialViewResolution: number;\r\n\r\n    protected _options: Options;\r\n\r\n    protected _renderCompleteKey: EventsKey | EventsKey[];\r\n\r\n    protected _isCanceled: boolean;\r\n\r\n    constructor(opt_options?: Options) {\r\n        const controlElement = document.createElement('button');\r\n\r\n        super({\r\n            target: opt_options.target,\r\n            element: controlElement\r\n        });\r\n\r\n        // Check if the selected language exists\r\n        this._i18n =\r\n            opt_options.language && opt_options.language in i18n\r\n                ? i18n[opt_options.language]\r\n                : i18n[DEFAULT_LANGUAGE];\r\n\r\n        if (opt_options.i18n) {\r\n            // Merge custom translations\r\n            this._i18n = {\r\n                ...this._i18n,\r\n                ...opt_options.i18n\r\n            };\r\n        }\r\n\r\n        // Default options\r\n        this._options = {\r\n            language: DEFAULT_LANGUAGE,\r\n            filename: 'Ol Pdf Printer',\r\n            style: {\r\n                paperMargin: 10,\r\n                brcolor: '#000000',\r\n                bkcolor: '#273f50',\r\n                txcolor: '#ffffff'\r\n            },\r\n            extraInfo: {\r\n                date: true,\r\n                url: true,\r\n                specs: true\r\n            },\r\n            mapElements: {\r\n                description: true,\r\n                attributions: true,\r\n                scalebar: true,\r\n                compass: compassIcon() as SVGElement\r\n            },\r\n            watermark: {\r\n                title: 'Ol Pdf Printer',\r\n                titleColor: '#d65959',\r\n                subtitle: 'https://github.com/GastonZalba/ol-pdf-printer',\r\n                subtitleColor: '#444444',\r\n                logo: false\r\n            },\r\n            paperSizes: [\r\n                // { size: [1189, 841], value: 'A0' },\r\n                // { size: [841, 594], value: 'A1' },\r\n                { size: [594, 420], value: 'A2' },\r\n                { size: [420, 297], value: 'A3' },\r\n                { size: [297, 210], value: 'A4', selected: true },\r\n                { size: [210, 148], value: 'A5' }\r\n            ],\r\n            dpi: [\r\n                { value: 72 },\r\n                { value: 96 },\r\n                { value: 150, selected: true },\r\n                { value: 200 },\r\n                { value: 300 }\r\n            ],\r\n            scales: [10000, 5000, 1000, 500, 250, 100, 50, 25, 10],\r\n            mimeTypeExports: [\r\n                { value: 'pdf', selected: true },\r\n                { value: 'png' },\r\n                { value: 'jpeg' },\r\n                { value: 'webp' }\r\n            ],\r\n            units: 'metric',\r\n            dateFormat: undefined,\r\n            ctrlBtnClass: '',\r\n            modal: {\r\n                animateClass: 'fade',\r\n                animateInClass: 'show',\r\n                transition: 150,\r\n                backdropTransition: 100,\r\n                templates: {\r\n                    dialog: '<div class=\"modal-dialog modal-dialog-centered\"></div>',\r\n                    headerClose: `<button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"${this._i18n.close}\"><span aria-hidden=\"true\">×</span></button>`\r\n                }\r\n            }\r\n        };\r\n\r\n        // Merge options\r\n        this._options = deepObjectAssign(this._options, opt_options);\r\n\r\n        controlElement.className = `ol-print-btn-menu ${this._options.ctrlBtnClass}`;\r\n        controlElement.title = this._i18n.printPdf;\r\n        controlElement.onclick = () => this.showPrintSettingsModal();\r\n        controlElement.append(pdfIcon());\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _init(): void {\r\n        this._map = this.getMap();\r\n        this._view = this._map.getView();\r\n        this._mapTarget = this._map.getTargetElement();\r\n        this._settingsModal = new SettingsModal(\r\n            this._map,\r\n            this._options,\r\n            this._i18n,\r\n            this._printMap.bind(this)\r\n        );\r\n\r\n        this._processingModal = new ProcessingModal(\r\n            this._i18n,\r\n            this._options,\r\n            this._onEndPrint.bind(this)\r\n        );\r\n\r\n        this._initialized = true;\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _setMapSizForPrint(\r\n        width: number,\r\n        height: number,\r\n        resolution: number\r\n    ): number[] {\r\n        const pixelsPerMapMillimeter = resolution / 25.4;\r\n        return [\r\n            Math.round(width * pixelsPerMapMillimeter),\r\n            Math.round(height * pixelsPerMapMillimeter)\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Restore inital view, remove classes, disable loading\r\n     * @protected\r\n     */\r\n    _onEndPrint(): void {\r\n        this._mapTarget.style.width = '';\r\n        this._mapTarget.style.height = '';\r\n        this._map.updateSize();\r\n        this._view.setResolution(this._initialViewResolution);\r\n        this._mapTarget.classList.remove(CLASS_PRINT_MODE);\r\n\r\n        this._view.setConstrainResolution(true);\r\n\r\n        clearTimeout(this._timeoutProcessing);\r\n\r\n        this._cancel();\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _prepareLoading(): void {\r\n        this._processingModal.show(this._i18n.pleaseWait);\r\n\r\n        this._timeoutProcessing = setTimeout(() => {\r\n            this._processingModal.show(this._i18n.almostThere);\r\n        }, 4000);\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _disableLoading(): void {\r\n        this._processingModal.hide();\r\n    }\r\n\r\n    /**\r\n     * This could be used to increment the DPI before printing\r\n     * @protected\r\n     */\r\n    _setFormatOptions(string = ''): void {\r\n        const layers = this._map.getLayers();\r\n        layers.forEach((layer) => {\r\n            if (layer instanceof Tile) {\r\n                const source = layer.getSource();\r\n                // Set WMS DPI\r\n                if (source instanceof TileWMS) {\r\n                    source.updateParams({\r\n                        FORMAT_OPTIONS: string\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param form\r\n     * @param showLoading\r\n     * @param delay Delay to prevent glitching with modals animation\r\n     * @protected\r\n     */\r\n    _printMap(form: IPrintOptions, showLoading = true, delay = 0): void {\r\n        if (showLoading) {\r\n            this._mapTarget.classList.add(CLASS_PRINT_MODE);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (showLoading) {\r\n                this._prepareLoading();\r\n            }\r\n\r\n            this._isCanceled = false;\r\n\r\n            // To allow intermediate zoom levels\r\n            this._view.setConstrainResolution(false);\r\n\r\n            let dim = this._options.paperSizes.find(\r\n                (e) => e.value === form.format\r\n            ).size;\r\n\r\n            dim =\r\n                form.orientation === 'landscape'\r\n                    ? dim\r\n                    : ([...dim].reverse() as [number, number]);\r\n\r\n            const widthPaper = dim[0];\r\n            const heightPaper = dim[1];\r\n\r\n            const mapSizeForPrint = this._setMapSizForPrint(\r\n                widthPaper,\r\n                heightPaper,\r\n                form.resolution\r\n            );\r\n            const [width, height] = mapSizeForPrint;\r\n\r\n            // Save current resolution to restore it later\r\n            this._initialViewResolution = this._view.getResolution();\r\n\r\n            const pixelsPerMapMillimeter = form.resolution / 25.4;\r\n\r\n            const scaleResolution =\r\n                form.scale /\r\n                getPointResolution(\r\n                    this._view.getProjection(),\r\n                    pixelsPerMapMillimeter,\r\n                    this._view.getCenter()\r\n                );\r\n\r\n            this._renderCompleteKey = this._map.once('rendercomplete', () => {\r\n                domtoimage\r\n                    .toJpeg(\r\n                        this._mapTarget.querySelector(\r\n                            '.ol-unselectable.ol-layers'\r\n                        ),\r\n                        {\r\n                            width,\r\n                            height\r\n                        }\r\n                    )\r\n                    .then(async (dataUrl) => {\r\n                        if (this._isCanceled) return;\r\n\r\n                        this._pdf = new Pdf({\r\n                            view: this._view,\r\n                            i18n: this._i18n,\r\n                            config: this._options,\r\n                            form: form,\r\n                            height: heightPaper,\r\n                            width: widthPaper,\r\n                            scaleResolution\r\n                        });\r\n\r\n                        this._pdf.addMapImage(dataUrl);\r\n                        await this._pdf.addMapHelpers();\r\n\r\n                        if (this._isCanceled) return;\r\n\r\n                        await this._pdf.savePdf();\r\n\r\n                        // Reset original map size\r\n                        this._onEndPrint();\r\n\r\n                        if (showLoading) this._disableLoading();\r\n                    })\r\n                    .catch((err: Error) => {\r\n                        const message =\r\n                            typeof err === 'string' ? err : this._i18n.error;\r\n                        console.error(err);\r\n                        this._onEndPrint();\r\n                        this._processingModal.show(message);\r\n                    });\r\n            });\r\n\r\n            // Set print size\r\n            this._mapTarget.style.width = width + 'px';\r\n            this._mapTarget.style.height = height + 'px';\r\n            this._map.updateSize();\r\n            this._map.getView().setResolution(scaleResolution);\r\n        }, delay);\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _cancel(): void {\r\n        if (this._renderCompleteKey) {\r\n            unByKey(this._renderCompleteKey);\r\n        }\r\n\r\n        this._isCanceled = true;\r\n    }\r\n\r\n    /**\r\n     * Show the Settings Modal\r\n     * @public\r\n     */\r\n    showPrintSettingsModal(): void {\r\n        if (!this._initialized) this._init();\r\n        this._settingsModal.show();\r\n    }\r\n\r\n    /**\r\n     * Hide the Settings Modal\r\n     * @public\r\n     */\r\n    hidePrintSettingsModal(): void {\r\n        this._settingsModal.hide();\r\n    }\r\n\r\n    /**\r\n     * Create PDF programatically without displaying the Settings Modal\r\n     * @param options\r\n     * @public\r\n     */\r\n    createPdf(options: IPrintOptions, showLoading: boolean): void {\r\n        options = {};\r\n        this._printMap(\r\n            {\r\n                format: (\r\n                    this._options.paperSizes.find((p) => p.selected) ||\r\n                    this._options.paperSizes[0]\r\n                ).value,\r\n                resolution: (\r\n                    this._options.dpi.find((p) => p.selected) ||\r\n                    this._options.dpi[0]\r\n                ).value,\r\n                orientation: 'landscape',\r\n                compass: true,\r\n                attributions: true,\r\n                scalebar: true,\r\n                scale: 1000,\r\n                typeExport: 'pdf',\r\n                ...options\r\n            },\r\n            showLoading\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\nexport interface IPrintOptions {\r\n    /**\r\n     *\r\n     */\r\n    format?: IPaperSize['value'];\r\n    /**\r\n     *\r\n     */\r\n    orientation?: 'landscape' | 'portrait';\r\n    /**\r\n     *\r\n     */\r\n    resolution?: IDpi['value'];\r\n    /**\r\n     *\r\n     */\r\n    scale?: IScale;\r\n    /**\r\n     *\r\n     */\r\n    description?: string;\r\n    /**\r\n     *\r\n     */\r\n    compass?: boolean;\r\n    /**\r\n     *\r\n     */\r\n    attributions?: boolean;\r\n    /**\r\n     *\r\n     */\r\n    scalebar?: boolean;\r\n    /**\r\n     *\r\n     */\r\n    typeExport?: IMimeTypeExport['value'];\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Custom translations specified when creating an instance\r\n */\r\nexport interface IValues {\r\n    format: FormDataEntryValue;\r\n    orientation: FormDataEntryValue;\r\n    resolution: FormDataEntryValue;\r\n    scale: FormDataEntryValue;\r\n    description: FormDataEntryValue;\r\n    compass: FormDataEntryValue;\r\n    attributions: FormDataEntryValue;\r\n    scalebar: FormDataEntryValue;\r\n    typeExport: FormDataEntryValue;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Custom translations specified when creating an instance\r\n */\r\nexport interface I18n {\r\n    printPdf: string;\r\n    pleaseWait: string;\r\n    almostThere: string;\r\n    error: string;\r\n    errorImage: string;\r\n    printing: string;\r\n    cancel: string;\r\n    close: string;\r\n    print: string;\r\n    mapElements: string;\r\n    compass: string;\r\n    scale: string;\r\n    layersAttributions: string;\r\n    addNote: string;\r\n    resolution: string;\r\n    orientation: string;\r\n    paperSize: string;\r\n    landscape: string;\r\n    portrait: string;\r\n    current: string;\r\n    paper: string;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IPaperSize {\r\n    /**\r\n     *\r\n     */\r\n    size: [number, number];\r\n    /**\r\n     *\r\n     */\r\n    value: string;\r\n    /**\r\n     *\r\n     */\r\n    selected?: boolean;\r\n}\r\n\r\n/**\r\n * **_[type]_**\r\n */\r\ntype IScale = number;\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IDpi {\r\n    /**\r\n     *\r\n     */\r\n    value: number;\r\n    /**\r\n     *\r\n     */\r\n    selected?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IStyle {\r\n    /**\r\n     *\r\n     */\r\n    paperMargin?: number;\r\n    /**\r\n     *\r\n     */\r\n    brcolor?: string;\r\n    /**\r\n     *\r\n     */\r\n    bkcolor?: string;\r\n    /**\r\n     *\r\n     */\r\n    txcolor?: string;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IMimeTypeExport {\r\n    value: 'pdf' | 'png' | 'jpeg' | 'webp';\r\n    selected?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IModal {\r\n    /**\r\n     *\r\n     */\r\n    animateClass?: string;\r\n    /**\r\n     *\r\n     */\r\n    animateInClass?: string;\r\n    /**\r\n     *\r\n     */\r\n    transition?: number;\r\n    /**\r\n     *\r\n     */\r\n    backdropTransition?: number;\r\n    /**\r\n     *\r\n     */\r\n    templates?: {\r\n        dialog?: string | HTMLElement;\r\n        headerClose?: string | HTMLElement;\r\n    };\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\nexport interface IWatermark {\r\n    /**\r\n     *\r\n     */\r\n    title?: string;\r\n    /**\r\n     *\r\n     */\r\n    titleColor?: string;\r\n    /**\r\n     *\r\n     */\r\n    subtitle?: string;\r\n    /**\r\n     *\r\n     */\r\n    subtitleColor?: string;\r\n    /**\r\n     *\r\n     */\r\n    logo?: false | string | HTMLImageElement | SVGElement;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Print information at the bottom of the PDF\r\n */\r\ninterface IExtraInfo {\r\n    /**\r\n     * Print Date\r\n     */\r\n    date?: boolean;\r\n    /**\r\n     * Current site url\r\n     */\r\n    url?: boolean;\r\n    /**\r\n     * DPI, Format and Scale information\r\n     */\r\n    specs?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - MapElements\r\n * @public\r\n */\r\nexport interface IMapElements {\r\n    /**\r\n     * Print description\r\n     */\r\n    description?: boolean;\r\n    /**\r\n     * Layers attributions\r\n     */\r\n    attributions?: boolean;\r\n    /**\r\n     * Scalebar\r\n     */\r\n    scalebar?: boolean;\r\n    /**\r\n     * Compass image. North must be pointing to the top\r\n     */\r\n    compass?: false | string | HTMLImageElement | SVGElement;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Options specified when creating an instance\r\n */\r\nexport interface Options extends ControlOptions {\r\n    /**\r\n     * Export filename\r\n     */\r\n    filename?: string;\r\n\r\n    /**\r\n     * Map unit mode\r\n     */\r\n    units?: 'metric' | 'imperial';\r\n\r\n    /**\r\n     * Some basic PDF style configuration\r\n     */\r\n    style?: IStyle;\r\n\r\n    /**\r\n     * Information to be inserted at the bottom of the PDF\r\n     * False to disable\r\n     */\r\n    extraInfo?: false | IExtraInfo;\r\n\r\n    /**\r\n     * Elements to be showed on the PDF and in the Settings Modal.\r\n     * False to disable\r\n     */\r\n    mapElements?: false | IMapElements;\r\n\r\n    /**\r\n     * Watermark to be inserted in the PDF.\r\n     * False to disable\r\n     */\r\n    watermark?: false | IWatermark;\r\n\r\n    /**\r\n     * Paper sizes options to be shown in the settings modal\r\n     */\r\n    paperSizes?: IPaperSize[];\r\n\r\n    /**\r\n     * DPI resolutions options to be shown in the settings modal\r\n     */\r\n    dpi?: IDpi[];\r\n\r\n    /**\r\n     * Map scales options to be shown in the settings modal\r\n     */\r\n    scales?: IScale[];\r\n\r\n    /**\r\n     * Export format\r\n     */\r\n    mimeTypeExports?: IMimeTypeExport[];\r\n\r\n    /**\r\n     * Locale time zone. Default varies according to browser locale\r\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString#using_locales\r\n     */\r\n    dateFormat?: Locale;\r\n\r\n    /**\r\n     * ClassName to add to the Btn Control\r\n     */\r\n    ctrlBtnClass?: string;\r\n\r\n    /**\r\n     * Modal configuration\r\n     */\r\n    modal?: IModal;\r\n\r\n    /**\r\n     * Language support\r\n     */\r\n    language?: 'es' | 'en';\r\n\r\n    /**\r\n     * Add custom translations\r\n     */\r\n    i18n?: I18n;\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_slicedToArray","isArray","arrayWithHoles","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","push","iterableToArrayLimit","unsupportedIterableToArray","TypeError","nonIterableRest","_toConsumableArray","arrayWithoutHoles","iter","iterableToArray","nonIterableSpread","_classCallCheck","instance","Constructor","_typeof","obj","_toPropertyKey","input","hint","prim","toPrimitive","res","String","Number","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","toPropertyKey","_createClass","protoProps","staticProps","_assertThisInitialized","ReferenceError","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_getPrototypeOf","getPrototypeOf","_defineProperty","module","exports","__esModule","require$$0","_regeneratorRuntime","Op","hasOwn","hasOwnProperty","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","runtime","regenerator","regeneratorRuntime","accidentalStrictMode","globalThis","Function","global","util","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","JPEG","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","content","isDataUrl","search","canvasToBlob","canvas","toBlob","binaryString","window","atob","toDataURL","split","binaryArray","Uint8Array","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","head","appendChild","a","body","href","getAndEncode","TIMEOUT","domtoimage","impl","options","cacheBust","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","useCredentials","withCredentials","open","send","imagePlaceholder","readyState","status","encoder","FileReader","onloadend","readAsDataURL","response","fail","message","console","uid","index","fourRandomChars","Math","random","pow","delay","ms","setTimeout","asArray","arrayLike","array","isChrome","navigator","userAgent","escapeXhtml","makeImage","uri","image","Image","crossOrigin","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","match","exec","styleProperty","getComputedStyle","getPropertyValue","parseFloat","newUtil","inliner","URL_REGEX","inlineAll","get","nothingToInline","readUrls","urls","inline","shouldProcess","filter","data","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","inlineBackground","HTMLImageElement","newImage","childNodes","child","background","inlined","setProperty","getPropertyPriority","element","newImages","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","toCanvas","copyOptions","cloneNode","embedFonts","inlineImages","clone","bgcolor","backgroundColor","property","setAttribute","XMLSerializer","serializeToString","xhtml","foreignObject","makeSvgDataUri","domNode","scale","ctx","fillStyle","fillRect","newCanvas","drawImage","sx","sy","sw","sh","dx","dy","dw","dh","root","HTMLCanvasElement","original","children","tagName","getElementById","baseVal","copyShadowChild","cloneChildrenInOrder","parent","childClone","cloneChildren","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","source","copyProperties","font","marker","clonePseudoElement","className","currentClass","getAttribute","styleElement","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","formatProperty","HTMLTextAreaElement","innerHTML","HTMLInputElement","SVGElement","SVGRectElement","attribute","processClone","styleNode","attrs","_len","_key","elem","entries","_ref","_ref2","startsWith","addEventListener","substr","_children","append","nodeType","Pdf","params","_this","_callee","_this$_config","mapElements","extraInfo","watermark","_context","_config","_style","_addWatermark","compass","_form","_addCompass","description","_addDescription","scalebar","_addScaleBar","attributions","_addAttributions","_addUrl","date","_addDate","specs","_addSpecs","getSvgUrl","URL","createObjectURL","outerHTML","svgUrlToPng","svgUrl","callback","svgImage","_i18n","errorImage","clientWidth","clientHeight","imgData","removeChild","revokeObjectURL","svgToPng","position","offset","x","y","size","paperMargin","_pdf","bkcolor","brcolor","setDrawColor","setFillColor","roundedRect","fontSize","color","align","str","setTextColor","setFontSize","text","_this$_calculateOffse","_calculateOffsetByPosition","fixX","_addText","trim","_this$_calculateOffse2","txcolor","_this$_pdf$doc$getTex","getTextDimensions","maxWidth","w","h","_addRoundedBox","paddingBack","_callee2","imageSize","fontSizeSubtitle","back","_this$_calculateOffse3","acumulativeWidth","_this$_pdf$doc$getTex2","wSub","widthBack","_this$_pdf$doc$getTex3","_w","_widthBack","marginTop","addImage","_widthBack2","_context2","logo","title","titleColor","setFont","subtitle","subtitleColor","_processSvgImage","now","toLocaleDateString","dateFormat","_addTextByOffset","location","concat","_scaleDenominator","toLocaleString","paper","format","toUpperCase","resolution","attributionsUl","querySelector","_this$_calculateOffse4","xPos","_this$_pdf$doc$getTex5","textContent","whiteSpaceWidth","querySelectorAll","sumWhiteSpaceWidth","attribution","textWithLink","unit","unitConversionFactor","log10","LOG10E","maxLength","units","metre","kilometre","inch","mile","yard","unroundedLength","numberOfDigits","floor","factor","mapped","percentageMargin","fullSize","scaleBarX","scaleBarY","rect","round","_ref3","_callee3","imgSrc","rotationRadians","_this$_calculateOffse5","addRotation","_context3","_view","getRotation","translate","rotate","xCircle","yCircle","circle","rotatedCanvas","xImage","yImage","sizeImage","_x2","view","form","i18n","config","scaleResolution","orientation","_calculateScaleDenominator","_window$jspdf","jspdf","jsPDF","_this2","typeExport","save","filename","_window","_window$pdfjsLib","pdf","output","versionPdfJS","pdfjsLib","version","GlobalWorkerOptions","workerSrc","getDocument","promise","getPage","page","viewport","getViewport","myPragma","display","render","canvasContext","link","download","click","remove","pixelsPerMapMillimeter","_getMeterPerPixel","proj","getProjection","getPointResolution","getCenter","getMetersPerUnit","_factory","_defaults","freeze","el","animate","animateClass","animateInClass","appendTo","backdrop","keyboard","header","footer","buttons","headerClose","construct","transition","backdropTransition","_buttons","deepFreeze","k","v","dialog","attr","class","alert","confirm","_templates","container","prop","prefix","elData","dataAttr","build","html","nodeName","getPath","nodes","parentNode","Modal","EventEmitter","templates","_baseTemplates","assign","_baseButtons","_baseOptions","static","_options","question","super","id","_html","_events","_visible","_pointerInContent","_scrollbarWidth","inner","outerWidth","outer","visibility","offsetWidth","overflow","calcScrollbarWidth","_render","_mapDom","t","classList","add","_setHeader","_setContent","_setFooter","contains","ineerHTML","button","j","_setEvents","keydownHandler","_handleKeydownEvent","mousedownHandler","_handleMousedownEvent","clickHandler","_handleClickEvent","resizeHandler","_handleResizeEvent","every","emit","hide","which","_resize","show","_checkScrollbar","_setScrollbar","scrollTop","once","_backdrop","toggle","modalIsOverflowing","documentElement","paddingLeft","bodyIsOverflowing","paddingRight","contCList","_removeEvents","originalBodyPad","removeEventListener","innerWidth","basePadding","parseInt","SettingsModal","printMap","_modal","_objectSpread","printPdf","Content","Footer","modal","on","event","dataset","print","formData","FormData","actualScaleVal","opt_round","getView","getUnits","getResolution","METERS_PER_UNIT","getMapScale","actualScale","current","scales","dpi","paperSizes","htmlFor","paperSize","selected","landscape","portrait","d","addNote","rows","checked","layersAttributions","mimeTypeExports","cancel","ProcessingModal","onEndPrint","printing","_setContentModal","pleaseWait","almostThere","close","assertThisInitialized","CLASS_PRINT_MODE","deepObjectAssign","sources","s_val","t_val","PdfPrinter","_Control","subClass","superClass","_inherits","_super","_createSuper","opt_options","controlElement","language","ctrlBtnClass","onclick","showPrintSettingsModal","_map","getMap","_mapTarget","getTargetElement","_settingsModal","_printMap","_processingModal","_onEndPrint","_initialized","updateSize","setResolution","_initialViewResolution","setConstrainResolution","clearTimeout","_timeoutProcessing","_cancel","getLayers","layer","Tile","getSource","TileWMS","updateParams","FORMAT_OPTIONS","_this3","showLoading","_prepareLoading","_isCanceled","dim","find","widthPaper","heightPaper","_mapSizeForPrint","_setMapSizForPrint","_renderCompleteKey","addMapImage","addMapHelpers","savePdf","_disableLoading","unByKey","_init","Control"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,26,32,34]}