!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ol/control/Control"),require("ol/source/TileWMS"),require("ol/layer/Tile"),require("ol/proj"),require("ol/Observable"),require("jspdf"),require("pdfjs-dist"),require("ol/proj/Units")):"function"==typeof define&&define.amd?define(["ol/control/Control","ol/source/TileWMS","ol/layer/Tile","ol/proj","ol/Observable","jspdf","pdfjs-dist","ol/proj/Units"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).PdfPrinter=e(t.ol.control.Control,t.ol.source.TileWMS,t.ol.layer.Tile,t.ol.proj,t.ol.Observable,t.jsPDF,t.pdfjsLib,t.ol.proj.Units)}(this,(function(t,e,n,r,o,i,a,s){"use strict";window;function l(t,e,n,r,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,s,"next",t)}function s(t){l(i,r,o,a,s,"throw",t)}a(void 0)}))}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function y(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function x(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P={exports:{}},E={exports:{}};!function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(E);var L=E.exports;!function(t){var e=L.default;function n(){t.exports=n=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),s=new k(r||[]);return a(i,"_invoke",{value:P(t,n,s)}),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var p={};function m(){}function v(){}function g(){}var y={};d(y,l,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(S([])));b&&b!==o&&i.call(b,l)&&(y=b);var w=g.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,n){function r(o,a,s,l){var c=h(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,s,l)}),(function(t){r("throw",t,s,l)})):n.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,o){r(t,e,n,o)}))}return o=o?o.then(i,i):i()}})}function P(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=h(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=d(g,u,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,d(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},x(C.prototype),d(C.prototype,c,(function(){return this})),r.AsyncIterator=C,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new C(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),d(w,u,"Generator"),d(w,l,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},r}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(P);var O=(0,P.exports)(),k=O;try{regeneratorRuntime=O}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=O:Function("r","regeneratorRuntime = r")(O)}var S=C(k),T={exports:{}};!function(t,e){!function(e){var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var n=e(t).toLowerCase();return(r="application/font-woff",o="image/jpeg",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:o,jpeg:o,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var r,o},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);e(new Blob([o],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=e,o.href=t,o.href},getAndEncode:function(t){var e=3e4;s.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise((function(n){var r,o=new XMLHttpRequest;if(o.onreadystatechange=a,o.ontimeout=l,o.responseType="blob",o.timeout=e,s.impl.options.useCredentials&&(o.withCredentials=!0),o.open("GET",t,!0),o.send(),s.impl.options.imagePlaceholder){var i=s.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function a(){if(4===o.readyState)if(200===o.status){var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(o.response)}else r?n(r):c("cannot fetch resource: "+t+", status: "+o.status)}function l(){r?n(r):c("timeout of "+e+"ms occured while fetching resource: "+t)}function c(t){console.error(t),n("")}}))},uid:(t=0,function(){return"u"+e()+t++;function e(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}),delay:function(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}},asArray:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e},isChrome:function(){return/chrome/i.test(navigator.userAgent)},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return"data:,"===t?Promise.resolve():new Promise((function(e,n){var r=new Image;s.impl.options.useCredentials&&(r.crossOrigin="use-credentials"),r.onload=function(){e(r)},r.onerror=n,r.src=t}))},width:function(t){var e=n(t,"border-left-width"),r=n(t,"border-right-width");return t.scrollWidth+e+r},height:function(t){var e=n(t,"border-top-width"),r=n(t,"border-bottom-width");return t.scrollHeight+e+r}};var t;function e(t){var e=/\.([^\.\/]*?)(\?|$)/g.exec(t);return e?e[1]:""}function n(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),r=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,i){return a()?Promise.resolve(t):Promise.resolve(t).then(r).then((function(e){var r=Promise.resolve(t);return e.forEach((function(t){r=r.then((function(e){return o(e,t,n,i)}))})),r}));function a(){return!e(t)}},shouldProcess:e,impl:{readUrls:r,inline:o}};function e(e){return-1!==e.search(t)}function r(e){for(var r,o=[];null!==(r=t.exec(e));)o.push(r[1]);return o.filter((function(t){return!n.isDataUrl(t)}))}function o(t,e,r,o){return Promise.resolve(e).then((function(t){return r?n.resolveUrl(t,r):t})).then(o||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e))})).then((function(r){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+r+"$3")}))}}(),o=function(){return{resolveAll:function(){return t().then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){if(t.hasOwnProperty("cssRules"))try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return r.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return r.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),i=function(){return{inlineAll:function e(o){return o instanceof Element?i(o).then((function(){return o instanceof HTMLImageElement?t(o).inline():Promise.all(n.asArray(o.childNodes).map((function(t){return e(t)})))})):Promise.resolve(o);function i(t){var e=t.style.getPropertyValue("background");return e?r.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t.src))})).then((function(e){return new Promise((function(n,r){t.onload=n,t.onerror=n,t.src=e}))}))}}}}(),a={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},s={toSvg:l,toPng:function(t,e){return c(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return c(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return c(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return c(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data}))},toCanvas:function(t,e){return c(t,e||{})},impl:{fontFaces:o,images:i,util:n,inliner:r,options:{}}};function l(t,e){return function(t){void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=a.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?s.impl.options.cacheBust=a.cacheBust:s.impl.options.cacheBust=t.cacheBust;void 0===t.useCredentials?s.impl.options.useCredentials=a.useCredentials:s.impl.options.useCredentials=t.useCredentials}(e=e||{}),Promise.resolve(t).then((function(t){return u(t,e.filter,!0)})).then(d).then(f).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(n){t.style[n]=e.style[n]}));return t})).then((function(r){return function(t,e,r){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(n.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+r+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(r,e.width||n.width(t),e.height||n.height(t))}))}function c(t,e){return l(t,e).then(n.makeImage).then(n.delay(100)).then((function(r){var o="number"!=typeof e.scale?1:e.scale;console.log("scale",o);var i=function(t,r){var o=document.createElement("canvas");if(o.width=(e.width||n.width(t))*r,o.height=(e.height||n.height(t))*r,console.log(o.width,o.height),e.bgcolor){var i=o.getContext("2d");i.fillStyle=e.bgcolor,i.fillRect(0,0,o.width,o.height)}return o}(t,o),a=i.getContext("2d");return r&&(a.scale(o,o),e.canvas&&e.canvas.width&&(i.width=e.canvas.width),e.canvas&&e.canvas.height&&(i.height=e.canvas.height),e.canvas?(console.log("canv",e.canvas),a.drawImage(r,e.canvas.sx||0,e.canvas.sy||0,e.canvas.sw||e.width,e.canvas.sh||e.height,e.canvas.dx||0,e.canvas.dy||0,e.canvas.dw||e.width,e.canvas.dh||e.height)):a.drawImage(r,0,0)),i}))}function u(t,e,r){return r||!e||e(t)?Promise.resolve(t).then((function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(r){return function(t,e,r){var o="use"===t.tagName?function(t){var e=document.getElementById(t.href.baseVal.replace("#",""));return[e.cloneNode(!0)]}(t):t.childNodes;return 0===o.length?Promise.resolve(e):i(e,n.asArray(o),r).then((function(){return e}));function i(t,e,n){var r=Promise.resolve();return e.forEach((function(e){r=r.then((function(){return u(e,n)})).then((function(e){e&&t.appendChild(e)}))})),r}}(t,r,e)})).then((function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(r).then(o).then(i).then(a).then((function(){return e})):e;function r(){function r(t,e){function r(t,e){n.asArray(t).forEach((function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))}))}t.cssText?(e.cssText=t.cssText,e.font=t.font):r(t,e)}r(window.getComputedStyle(t),e.style),n.isChrome()&&e.style.marker&&("line"===e.tagName||"path"===e.tagName)&&(e.style.marker="")}function o(){function r(r){var o=window.getComputedStyle(t,r),i=o.getPropertyValue("content");if(""!==i&&"none"!==i){var a=n.uid(),s=e.getAttribute("class");s&&e.setAttribute("class",s+" "+a);var l=document.createElement("style");l.appendChild(c(a,r,o)),e.appendChild(l)}function c(t,e,r){var o="."+t+":"+e,i=r.cssText?a(r):s(r);return document.createTextNode(o+"{"+i+"}");function a(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function s(t){return n.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}}[":before",":after"].forEach((function(t){r(t)}))}function i(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function a(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})))}}(t,e)})):Promise.resolve()}function d(t){return o.resolveAll().then((function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t}))}function f(t){return i.inlineAll(t).then((function(){return t}))}t.exports=s}()}(T);var M=C(T.exports);function j(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if("null"===t||null===t)return r;if("function"==typeof t)return t(e,r);var i=document.createElement(t);Object.entries(e||{}).forEach((function(t){var e=f(t,2),n=e[0],r=e[1];void 0!==m(r)&&null!==r&&(n.startsWith("on")&&n.toLowerCase()in window&&"function"==typeof r?i.addEventListener(n.toLowerCase().substr(2),r):"className"===n?i.setAttribute("class",r.toString()):"htmlFor"===n?i.setAttribute("for",r.toString()):i.setAttribute(n,r.toString()))}));for(var a=0,s=r;a<s.length;a++){var l=s[a];l&&(Array.isArray(l)?i.append.apply(i,h(l)):void 0===l.nodeType?i.innerHTML+=l:i.appendChild(l))}return i}var A=function(){function t(e){var n=this;p(this,t),x(this,"_pdf",void 0),x(this,"_view",void 0),x(this,"_scaleDenominator",void 0),x(this,"_form",void 0),x(this,"_style",void 0),x(this,"_i18n",void 0),x(this,"_config",void 0),x(this,"addMapHelpers",c(S.mark((function t(){var e,r,o,i,a;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n._config,r=e.mapElements,o=e.extraInfo,i=e.style,a=e.watermark,n._style=i,!a){t.next=5;break}return t.next=5,n._addWatermark(a);case 5:if(!r){t.next=12;break}if(!r.compass||!n._form.compass){t.next=9;break}return t.next=9,n._addCompass(r.compass);case 9:r.description&&n._form.description&&n._addDescription(),r.scalebar&&n._form.scalebar&&n._addScaleBar(),r.attributions&&n._form.attributions&&n._addAttributions();case 12:o&&(o.url&&n._addUrl(),o.date&&n._addDate(),o.specs&&n._addSpecs());case 13:case"end":return t.stop()}}),t)})))),x(this,"_processSvgImage",(function(t){return new Promise((function(e,r){var o=function(t){return URL.createObjectURL(new Blob([t.outerHTML],{type:"image/svg+xml"}))},i=function(t,e){var o=document.createElement("img");document.body.appendChild(o),o.onerror=function(t){return console.error(t),r(n._i18n.errorImage)},o.onload=function(){try{var t=document.createElement("canvas");t.width=o.clientWidth,t.height=o.clientHeight,t.getContext("2d").drawImage(o,0,0);var n=t.toDataURL("image/png");e(n),document.body.removeChild(o)}catch(t){return r(t)}},o.src=t};!function(t,e){var n=o(t);i(n,(function(t){e(t),URL.revokeObjectURL(n)}))}(t,(function(t){e(t)}))}))})),x(this,"_calculateOffsetByPosition",(function(t,e){var r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(t){case"topleft":r=e.x+n._style.paperMargin,o=e.y+n._style.paperMargin+i;break;case"topright":r=n._pdf.width-e.x-n._style.paperMargin,o=e.y+n._style.paperMargin+i;break;case"bottomright":r=n._pdf.width-e.x-n._style.paperMargin,o=n._pdf.height-e.y-n._style.paperMargin-i;break;case"bottomleft":o=n._pdf.height-e.y-n._style.paperMargin-i,r=e.x+n._style.paperMargin}return{x:r,y:o}})),x(this,"_addRoundedBox",(function(t,e,r,o,i,a){n._pdf.doc.setDrawColor(a),n._pdf.doc.setFillColor(i),n._pdf.doc.roundedRect(t,e,r,o,1,1,"FD")})),x(this,"_addText",(function(t,e,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"left",s=arguments.length>6?arguments[6]:void 0;n._pdf.doc.setTextColor(i),n._pdf.doc.setFontSize(o),n._pdf.doc.text(s,t,e,{align:a})})),x(this,"_addTextByOffset",(function(t,e,r,o,i,a,s){var l=n._calculateOffsetByPosition(t,e),c=l.x,u=l.y,d="center"===a?c-r/2:c;n._addText(d,u,r,o,i,a,s)})),x(this,"_addDescription",(function(){var t=n._form.description.trim(),e=n._calculateOffsetByPosition("topleft",{x:2,y:2}),r=e.x,o=e.y;n._pdf.doc.setTextColor(n._style.txcolor),n._pdf.doc.setFontSize(8);var i=n._pdf.doc.getTextDimensions(t,{maxWidth:50}),a=i.w,s=i.h;n._addRoundedBox(r,o,a+8,s+4,n._style.bkcolor,n._style.brcolor),n._pdf.doc.text(t,r+4,o+4,{align:"left",maxWidth:50})})),x(this,"_addWatermark",function(){var t=c(S.mark((function t(e){var r,o,i,a,s,l,c,u,d,f,h,p,m,v,g,y,_,b,w,x;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("topright",r={x:0,y:0},14,o=12,i=14/1.8,a=!1,s=n._calculateOffsetByPosition("topright",r),l=s.x,c=s.y,u=2,d=e.logo?o+.5:0,e.title&&(n._pdf.doc.setTextColor(e.titleColor),n._pdf.doc.setFontSize(14),n._pdf.doc.setFont("helvetica","bold"),f=n._pdf.doc.getTextDimensions(e.title),h=f.w,e.subtitle?(n._pdf.doc.setFontSize(i),p=n._pdf.doc.getTextDimensions(e.subtitle).w,h=p-4>h?p:h+4,n._pdf.doc.setFontSize(14)):h+=4,16,m=h+u,n._addRoundedBox(l-m+4-d,c-4,m+d,16,"#ffffff","#ffffff"),a=!0,n._pdf.doc.text(e.title,l,c+u+3+(e.subtitle?0:2),{align:"right"}),d+=h),e.subtitle&&(n._pdf.doc.setTextColor(e.subtitleColor),n._pdf.doc.setFontSize(i),n._pdf.doc.setFont("helvetica","normal"),a||(v=n._pdf.doc.getTextDimensions(e.subtitle),g=v.w,y=2*u+g,n._addRoundedBox(l-y+3-d,c-4,y+d,16,"#ffffff","#ffffff"),d+=y,a=!0),_=e.title?7:4,n._pdf.doc.text(e.subtitle,l,c+u+_,{align:"right"})),e.logo){t.next=13;break}return t.abrupt("return");case 13:if(b=function(t){n._pdf.doc.addImage(t,"PNG",l-d+2*u-1,c-1,o,o)},a||(w=d+u,n._addRoundedBox(l-w+4,c-4,w,16,"#ffffff","#ffffff")),!(e.logo instanceof Image)){t.next=20;break}return b(e.logo),t.abrupt("return");case 20:if("string"!=typeof e.logo){t.next=24;break}x=e.logo,t.next=31;break;case 24:if(!(e.logo instanceof SVGElement)){t.next=30;break}return t.next=27,n._processSvgImage(e.logo);case 27:x=t.sent,t.next=31;break;case 30:throw n._i18n.errorImage;case 31:return t.abrupt("return",new Promise((function(t,e){var r=new Image(o,o);r.onload=function(){try{b(r),t()}catch(t){return e(t)}},r.onerror=function(){return e(n._i18n.errorImage)},r.src=x})));case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),x(this,"_addDate",(function(){n._pdf.doc.setFont("helvetica","normal");var t=new Date(Date.now()).toLocaleDateString(n._config.dateFormat);n._addTextByOffset("bottomright",{x:0,y:-5},250,7,"#000000","right",t)})),x(this,"_addUrl",(function(){n._pdf.doc.setFont("helvetica","italic");var t=window.location.href;n._addTextByOffset("bottomleft",{x:0,y:-6.5},250,6,"#000000","left",t)})),x(this,"_addSpecs",(function(){n._pdf.doc.setFont("helvetica","bold"),n._pdf.doc.setFontSize(6);var t="".concat(n._i18n.scale," 1:").concat(n._scaleDenominator.toLocaleString("de")),e="".concat(n._i18n.paper," ").concat(n._form.format.toUpperCase()),r=[t,"".concat(n._form.resolution," DPI"),e].join(" - "),o=n._pdf.doc.getTextDimensions(r).w;n._addTextByOffset("bottomleft",{x:0,y:-3.5},o,6,"#000000","left",r)})),x(this,"_addAttributions",(function(){var t=document.querySelector(".ol-attribution ul");if(t){n._pdf.doc.setFont("helvetica","normal"),n._pdf.doc.setFontSize(7);var e=n._calculateOffsetByPosition("bottomright",{x:1,y:1}),r=e.x,o=e.y,i=r,a=n._pdf.doc.getTextDimensions(t.textContent),s=a.w,l=a.h,c=n._pdf.doc.getTextDimensions(" · ").w,u=document.querySelectorAll(".ol-attribution li"),d=c*(u.length-1);n._addRoundedBox(r-s-d-2,o-l,s+4+d+2,l+4,"#ffffff","#ffffff"),Array.from(u).reverse().forEach((function(t,e){Array.from(t.childNodes).reverse().forEach((function(t){var e=t.textContent;"href"in t?(n._pdf.doc.setTextColor("#0077cc"),n._pdf.doc.textWithLink(e,i,o,{align:"right",url:t.href})):(n._pdf.doc.setTextColor("#666666"),n._pdf.doc.text(e,i,o,{align:"right"}));var r=n._pdf.doc.getTextDimensions(e).w;i-=r})),e!==u.length-1&&(n._pdf.doc.text(" · ",i,o,{align:"right"}),i-=c)}))}})),x(this,"_addScaleBar",(function(){var t,e,r=2,o=2,i=Math.log10||function(t){return Math.log(t)*Math.LOG10E},a=90*n._scaleDenominator;if("metric"===n._config.units){t="mm";var s=1e3;e=1,a>=1e7?(t="km",e=1e6):a>=1e4&&(t="m",e=s)}else if("imperial"===n._config.units){var l=25.4,c=1609344;t="in",e=l,a>=10*c?(t="mi",e=c):a>=9144&&(t="yd",e=914.4)}var u=a/=e,d=Math.floor(i(u)),f=Math.pow(10,d),h=u/f,p=Math.floor(a),m=(p=h>8?8*f:h>4?4*f:h>2?2*f:f)*e/n._scaleDenominator/4,v=n._style.paperMargin?2*n._style.paperMargin/n._pdf.width*100:null,g=4*(m=v?m/100*(100-v):m),y=r+n._style.paperMargin,_=n._style.paperMargin,b=y+4,w=(_=n._pdf.height-o-10-n._style.paperMargin)+5;n._addRoundedBox(y,_,g+8,10,n._style.bkcolor,n._style.brcolor),n._pdf.doc.setDrawColor(n._style.brcolor),n._pdf.doc.setFillColor(0,0,0),n._pdf.doc.rect(b,w,m,1,"FD"),n._pdf.doc.setDrawColor(n._style.brcolor),n._pdf.doc.setFillColor(255,255,255),n._pdf.doc.rect(b+m,w,m,1,"FD"),n._pdf.doc.setDrawColor(n._style.brcolor),n._pdf.doc.setFillColor(0,0,0),n._pdf.doc.rect(b+2*m,w,2*m,1,"FD"),n._pdf.doc.setTextColor(n._style.txcolor),n._pdf.doc.setFontSize(6),n._pdf.doc.text("0",b,w-1),n._pdf.doc.text(String(Math.round(10*p/4)/10),b+m-1,w-1),n._pdf.doc.text(String(Math.round(p/2)),b+2*m-2,w-1),n._pdf.doc.text(Math.round(p).toString()+" "+t,b+4*m-4,w-1)})),x(this,"_addCompass",function(){var t=c(S.mark((function t(e){var r,o,i,a,s,l,c,u,d;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("bottomright",r={x:2,y:6},6,o=n._view.getRotation(),i=100,a=n._calculateOffsetByPosition("bottomright",r,6),s=a.x,l=a.y,c=function(t){var e=document.createElement("canvas");e.height=120,e.width=120;var r=e.getContext("2d");r.translate(.5*e.width,.5*e.height),r.rotate(o),r.translate(.5*-e.width,.5*-e.height),r.drawImage(t,(e.height-i)/2,(e.width-i)/2,i,i);var a=s-6,c=l;return n._pdf.doc.setDrawColor(n._style.brcolor),n._pdf.doc.setFillColor(n._style.bkcolor),n._pdf.doc.circle(a,c,6,"FD"),e},u=function(t){var e=c(t),r=s-9-6/4.3,o=l-4.5;n._pdf.doc.addImage(e,"PNG",r,o,9,9)},!(e instanceof Image)){t.next=13;break}return u(undefined),t.abrupt("return");case 13:if("string"!=typeof e){t.next=17;break}d=e,t.next=24;break;case 17:if(!(e instanceof SVGElement)){t.next=23;break}return t.next=20,n._processSvgImage(e);case 20:d=t.sent,t.next=24;break;case 23:throw n._i18n.errorImage;case 24:return t.abrupt("return",new Promise((function(t,e){var r=new Image(i,i);r.onload=function(){u(r),t()},r.onerror=function(){e(n._i18n.errorImage)},r.src=d})));case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var r=e.view,o=e.form,i=e.i18n,a=e.config,s=e.height,l=e.width,u=e.scaleResolution;this._view=r,this._form=o,this._i18n=i,this._config=a,this._pdf=this.create(this._form.orientation,this._form.format,s,l),this._scaleDenominator=this._calculateScaleDenominator(this._form.resolution,u)}return y(t,[{key:"create",value:function(t,e,n,r){var o;return{doc:new((null===(o=window.jspdf)||void 0===o?void 0:o.jsPDF)||i.jsPDF)({orientation:t,format:e}),height:n,width:r}}},{key:"addMapImage",value:function(t){this._pdf.doc.addImage(t,"JPEG",this._config.style.paperMargin,this._config.style.paperMargin,this._pdf.width-2*this._config.style.paperMargin,this._pdf.height-2*this._config.style.paperMargin)}},{key:"savePdf",value:function(){var t=this;return new Promise((function(e,n){if("pdf"===t._form.typeExport)t._pdf.doc.save(t._config.filename+".pdf"),e();else{var r,o,i=t._pdf.doc.output("dataurlstring"),s=(null===(r=window)||void 0===r||null===(o=r.pdfjsLib)||void 0===o?void 0:o.version)||a.version;a.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(s,"/pdf.worker.js"),a.getDocument(i).promise.then((function(n){n.getPage(1).then((function(n){var r=n.getViewport({scale:2}),o=j("canvas",null);o.style.display="none",document.body.appendChild(o);var i=o.getContext("2d");o.height=r.height,o.width=r.width,n.render({canvasContext:i,viewport:r}).promise.then((function(){var n,r,i;n=o.toDataURL("image/".concat(t._form.typeExport)),r=t._config.filename+".".concat(t._form.typeExport),i=j("a",{download:r,href:n}),document.body.appendChild(i),i.click(),document.body.removeChild(i),o.remove(),e()}))}))}),(function(t){n(t),console.log(t)}))}}))}},{key:"_calculateScaleDenominator",value:function(t,e){var n=t/25.4;return Math.round(1e3*n*this._getMeterPerPixel(e))}},{key:"_getMeterPerPixel",value:function(t){var e=this._view.getProjection();return r.getPointResolution(e,t,this._view.getCenter())*e.getMetersPerUnit()}}]),t}();function D(){}function F(){F.init.call(this)}function R(t){return void 0===t._maxListeners?F.defaultMaxListeners:t._maxListeners}function I(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new D,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=R(t))&&o>0&&a.length>o){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,s=l,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function z(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function H(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function N(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}D.prototype=Object.create(null),F.EventEmitter=F,F.usingDomains=!1,F.prototype.domain=void 0,F.prototype._events=void 0,F.prototype._maxListeners=void 0,F.defaultMaxListeners=10,F.init=function(){this.domain=null,F.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new D,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},F.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},F.prototype.getMaxListeners=function(){return R(this)},F.prototype.emit=function(t){var e,n,r,o,i,a,s,l="error"===t;if(a=this._events)l=l&&null==a.error;else if(!l)return!1;if(s=this.domain,l){if(e=arguments[1],!s){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,o=N(t,r),i=0;i<r;++i)o[i].call(n)}(n,u,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=N(t,o),a=0;a<o;++a)i[a].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=N(t,i),s=0;s<i;++s)a[s].call(n,r,o)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=N(t,a),l=0;l<a;++l)s[l].call(n,r,o,i)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];!function(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=N(t,o),a=0;a<o;++a)i[a].apply(n,r)}(n,u,this,o)}return!0},F.prototype.addListener=function(t,e){return I(this,t,e,!1)},F.prototype.on=F.prototype.addListener,F.prototype.prependListener=function(t,e){return I(this,t,e,!0)},F.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,z(this,t,e)),this},F.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,z(this,t,e)),this},F.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new D:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new D,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},F.prototype.off=function(t,e){return this.removeListener(t,e)},F.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new D,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new D:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new D,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},F.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},F.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):H.call(t,e)},F.prototype.listenerCount=H,F.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};let B=null;const U=Object.freeze({el:null,animate:!0,animateClass:"fade",animateInClass:"show",appendTo:"body",backdrop:!0,keyboard:!0,title:!1,header:!0,content:!1,footer:!0,buttons:null,headerClose:!0,construct:!1,transition:300,backdropTransition:150}),W=function t(e){for(let n in e)Array.isArray(e[n])?e[n].forEach((e=>{t(e)})):null!==e[n]&&"object"==typeof e[n]&&Object.freeze(e[n]);return Object.freeze(e)}({dialog:[{text:"Cancel",value:!1,attr:{class:"btn btn-default","data-dismiss":"modal"}},{text:"OK",value:!0,attr:{class:"btn btn-primary","data-dismiss":"modal"}}],alert:[{text:"OK",attr:{class:"btn btn-primary","data-dismiss":"modal"}}],confirm:[{text:"Cancel",value:!1,attr:{class:"btn btn-default","data-dismiss":"modal"}},{text:"OK",value:!0,attr:{class:"btn btn-primary","data-dismiss":"modal"}}]}),q={container:'<div class="modal"></div>',dialog:'<div class="modal-dialog"></div>',content:'<div class="modal-content"></div>',header:'<div class="modal-header"></div>',headerClose:'<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>',body:'<div class="modal-body"></div>',footer:'<div class="modal-footer"></div>',backdrop:'<div class="modal-backdrop"></div>'};function V(t,e,n){let r="data",o=t[r]||{};if(void 0===n){if(t[r]&&t[r][e])return t[r][e];var i=t.getAttribute(`${r}-${e}`);return void 0!==i?i:null}return o[e]=n,t[r]=o,t}function G(t,e){return t.nodeName?t:(t=t.replace(/(\t|\n$)/g,""),B||(B=document.createElement("div")),B.innerHTML="",B.innerHTML=t,!0===e?B.childNodes:B.childNodes[0])}function K(t){let e=[t];for(;t.parentNode;)t=t.parentNode,e.push(t);return e}class $ extends F{static set templates(t){this._baseTemplates=t}static get templates(){return Object.assign({},q,$._baseTemplates||{})}static set buttons(t){this._baseButtons=t}static get buttons(){return Object.assign({},W,$._baseButtons||{})}static set options(t){this._baseOptions=t}static get options(){return Object.assign({},U,$._baseOptions||{})}static get version(){return"0.12.0"}static alert(t,e={}){let n=Object.assign({},U,{title:t,content:!1,construct:!0,headerClose:!1,buttons:$.buttons.alert},e);return new $(n)}static confirm(t,e={}){let n=Object.assign({},U,{title:t,content:!1,construct:!0,headerClose:!1,buttons:$.buttons.confirm},e);return new $(n)}constructor(t={}){if(super(),this.id=(65536*(1+Math.random())|0).toString(16)+(65536*(1+Math.random())|0).toString(16),this.el=null,this._html={},this._events={},this._visible=!1,this._pointerInContent=!1,this._options=Object.assign({},$.options,t),this._templates=Object.assign({},$.templates,t.templates||{}),this._html.appendTo=document.querySelector(this._options.appendTo),this._scrollbarWidth=function(){let t,e,n,r=document.createElement("div");return Object.assign(r.style,{visibility:"hidden",width:"100px"}),document.body.appendChild(r),n=r.offsetWidth,r.style.overflow="scroll",t=document.createElement("div"),t.style.width="100%",r.appendChild(t),e=n-t.offsetWidth,document.body.removeChild(r),e}(),null===this._options.buttons&&(this._options.buttons=$.buttons.dialog),this._options.el){let t=this._options.el;if("string"==typeof this._options.el&&(t=document.querySelector(this._options.el),!t))throw new Error(`Selector: DOM Element ${this._options.el} not found.`);V(t,"modal",this),this.el=t}else this._options.construct=!0;this._options.construct?this._render():this._mapDom()}_render(){let t=this._html,e=this._options,n=this._templates,r=!!e.animate&&e.animateClass;return t.container=G(n.container),t.dialog=G(n.dialog),t.content=G(n.content),t.header=G(n.header),t.headerClose=G(n.headerClose),t.body=G(n.body),t.footer=G(n.footer),r&&t.container.classList.add(r),this._setHeader(),this._setContent(),this._setFooter(),this.el=t.container,t.dialog.appendChild(t.content),t.container.appendChild(t.dialog),this}_mapDom(){let t=this._html,e=this._options;return this.el.classList.contains(e.animateClass)&&(e.animate=!0),t.container=this.el,t.dialog=this.el.querySelector(".modal-dialog"),t.content=this.el.querySelector(".modal-content"),t.header=this.el.querySelector(".modal-header"),t.headerClose=this.el.querySelector(".modal-header .close"),t.body=this.el.querySelector(".modal-body"),t.footer=this.el.querySelector(".modal-footer"),this._setHeader(),this._setContent(),this._setFooter(),this}_setHeader(){let t=this._html,e=this._options;e.header&&t.header&&(e.title.nodeName?t.header.innerHTML=e.title.outerHTML:"string"==typeof e.title&&(t.header.innerHTML=`<h4 class="modal-title">${e.title}</h4>`),null===this.el&&t.headerClose&&e.headerClose&&t.header.appendChild(t.headerClose),e.construct&&t.content.appendChild(t.header))}_setContent(){let t=this._html,e=this._options;e.content&&t.body&&("string"==typeof e.content?t.body.innerHTML=e.content:t.body.innerHTML=e.content.outerHTML,e.construct&&t.content.appendChild(t.body))}_setFooter(){let t=this._html,e=this._options;e.footer&&t.footer&&(e.footer.nodeName?t.footer.ineerHTML=e.footer.outerHTML:"string"==typeof e.footer?t.footer.innerHTML=e.footer:t.footer.children.length||e.buttons.forEach((e=>{let n=document.createElement("button");V(n,"button",e),n.innerHTML=e.text,n.setAttribute("type","button");for(let t in e.attr)n.setAttribute(t,e.attr[t]);t.footer.appendChild(n)})),e.construct&&t.content.appendChild(t.footer))}_setEvents(){this._options;let t=this._html;this._events.keydownHandler=this._handleKeydownEvent.bind(this),document.body.addEventListener("keydown",this._events.keydownHandler),this._events.mousedownHandler=this._handleMousedownEvent.bind(this),t.container.addEventListener("mousedown",this._events.mousedownHandler),this._events.clickHandler=this._handleClickEvent.bind(this),t.container.addEventListener("click",this._events.clickHandler),this._events.resizeHandler=this._handleResizeEvent.bind(this),window.addEventListener("resize",this._events.resizeHandler)}_handleMousedownEvent(t){this._pointerInContent=!1,K(t.target).every((t=>!t.classList||!t.classList.contains("modal-content")||(this._pointerInContent=!0,!1)))}_handleClickEvent(t){K(t.target).every((e=>"HTML"!==e.tagName&&((!0===this._options.backdrop||!e.classList.contains("modal"))&&(!e.classList.contains("modal-content")&&("modal"===e.getAttribute("data-dismiss")?(this.emit("dismiss",this,t,V(t.target,"button")),this.hide(),!1):!(!this._pointerInContent&&e.classList.contains("modal"))||(this.emit("dismiss",this,t,null),this.hide(),!1)))))),this._pointerInContent=!1}_handleKeydownEvent(t){27===t.which&&this._options.keyboard&&(this.emit("dismiss",this,t,null),this.hide())}_handleResizeEvent(t){this._resize()}show(){let t=this._options,e=this._html;return this.emit("show",this),this._checkScrollbar(),this._setScrollbar(),document.body.classList.add("modal-open"),t.construct&&e.appendTo.appendChild(e.container),e.container.style.display="block",e.container.scrollTop=0,!1!==t.backdrop?(this.once("showBackdrop",(()=>{this._setEvents(),t.animate&&e.container.offsetWidth,e.container.classList.add(t.animateInClass),setTimeout((()=>{this._visible=!0,this.emit("shown",this)}),t.transition)})),this._backdrop()):(this._setEvents(),t.animate&&e.container.offsetWidth,e.container.classList.add(t.animateInClass),setTimeout((()=>{this._visible=!0,this.emit("shown",this)}),t.transition)),this._resize(),this}toggle(){this._visible?this.hide():this.show()}_resize(){var t=this._html.container.scrollHeight>document.documentElement.clientHeight;this._html.container.style.paddingLeft=!this.bodyIsOverflowing&&t?this._scrollbarWidth+"px":"",this._html.container.style.paddingRight=this.bodyIsOverflowing&&!t?this._scrollbarWidth+"px":""}_backdrop(){let t=this._html,e=this._templates,n=this._options,r=!!n.animate&&n.animateClass;t.backdrop=G(e.backdrop),r&&t.backdrop.classList.add(r),t.appendTo.appendChild(t.backdrop),r&&t.backdrop.offsetWidth,t.backdrop.classList.add(n.animateInClass),setTimeout((()=>{this.emit("showBackdrop",this)}),this._options.backdropTransition)}hide(){let t=this._html,e=this._options,n=t.container.classList;if(this.emit("hide",this),n.remove(e.animateInClass),e.backdrop){t.backdrop.classList.remove(e.animateInClass)}return this._removeEvents(),setTimeout((()=>{document.body.classList.remove("modal-open"),document.body.style.paddingRight=this.originalBodyPad}),e.backdropTransition),setTimeout((()=>{e.backdrop&&t.backdrop.parentNode.removeChild(t.backdrop),t.container.style.display="none",e.construct&&t.container.parentNode.removeChild(t.container),this._visible=!1,this.emit("hidden",this)}),e.transition),this}_removeEvents(){this._events.keydownHandler&&document.body.removeEventListener("keydown",this._events.keydownHandler),this._html.container.removeEventListener("mousedown",this._events.mousedownHandler),this._html.container.removeEventListener("click",this._events.clickHandler),window.removeEventListener("resize",this._events.resizeHandler)}_checkScrollbar(){this.bodyIsOverflowing=document.body.clientWidth<window.innerWidth}_setScrollbar(){if(this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing){let t=parseInt(this.originalBodyPad||0,10);document.body.style.paddingRight=t+this._scrollbarWidth+"px"}}}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=function(){function t(e,n,r,o){var i=this;p(this,t),x(this,"_modal",void 0),this._modal=new $(J({headerClose:!0,header:!0,animate:!0,title:r.printPdf,content:this.Content(r,n),footer:this.Footer(r,n)},n.modal)),this._modal.on("dismiss",(function(t,e){if(e.target.dataset.print){var r=document.getElementById("printMap"),a=new FormData(r),s={format:a.get("printFormat"),orientation:a.get("printOrientation"),resolution:a.get("printResolution"),scale:a.get("printScale"),description:a.get("printDescription"),compass:a.get("printCompass"),attributions:a.get("printAttributions"),scalebar:a.get("printScalebar"),typeExport:i._modal.el.querySelector('select[name="printTypeExport"]').value};o(s,!0,n.modal.transition)}})),this._modal.on("shown",(function(){var t=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getView(),r=n.getProjection().getUnits(),o=n.getResolution()*s.METERS_PER_UNIT[r]*39.37*(25.4/.28);return e&&(o=Math.round(o)),o}(e),n=i._modal.el.querySelector(".actualScale");n.value=String(t/1e3),n.innerHTML="".concat(r.current," (1:").concat(t.toLocaleString("de"),")")}))}return y(t,[{key:"Content",value:function(t,e){var n=e.scales,r=e.dpi,o=e.mapElements,i=e.paperSizes;return j("form",{id:"printMap"},j("div",null,j("div",{className:"printFieldHalf"},j("label",{htmlFor:"printFormat"},t.paperSize),j("select",{name:"printFormat",id:"printFormat"},i.map((function(t){return j("option",J({value:t.value},t.selected?{selected:"selected"}:{}),t.value)})))),j("div",{className:"printFieldHalf"},j("label",{htmlFor:"printOrientation"},t.orientation),j("select",{name:"printOrientation",id:"printOrientation"},j("option",{value:"landscape",selected:!0},t.landscape),j("option",{value:"portrait"},t.portrait)))),j("div",null,j("div",{className:"printFieldHalf"},j("label",{htmlFor:"printResolution"},t.resolution),j("select",{name:"printResolution",id:"printResolution"},r.map((function(t){return j("option",J({value:t.value},t.selected?{selected:"selected"}:{}),t.value," dpi")})))),j("div",{className:"printFieldHalf"},j("label",{htmlFor:"printScale"},t.scale),j("select",{name:"printScale",id:"printScale"},j("option",{className:"actualScale",value:"",selected:!0}),n.map((function(t){return j("option",{value:t},"1:",(1e3*t).toLocaleString("de"))}))))),o&&j("div",null,o.description&&j("div",null,j("label",{htmlFor:"printDescription"},t.addNote),j("textarea",{id:"printDescription",name:"printDescription",rows:"4"})),j("div",null,t.mapElements),j("div",{className:"printElements"},o.compass&&j("label",{htmlFor:"printCompass"},j("input",{type:"checkbox",id:"printCompass",name:"printCompass",checked:!0}),t.compass),o.scalebar&&j("label",{htmlFor:"printScalebar"},j("input",{type:"checkbox",id:"printScalebar",name:"printScalebar",checked:!0}),t.scale),o.attributions&&j("label",{htmlFor:"printAttributions"},j("input",{type:"checkbox",id:"printAttributions",name:"printAttributions",checked:!0}),t.layersAttributions))))}},{key:"Footer",value:function(t,e){var n=e.mimeTypeExports;return j("div",null,j("button",{type:"button",className:"btn-sm btn btn-secondary","data-dismiss":"modal"},t.cancel),j("div",{class:"typeExportContainer"},j("button",{type:"button",className:"btn-sm btn btn-primary","data-print":"true","data-dismiss":"modal"},t.print),j("select",{className:"typeExport",name:"printTypeExport",id:"printTypeExport"},n.map((function(t){return j("option",J({value:t.value},t.selected?{selected:"selected"}:{}),t.value)}))))).outerHTML}},{key:"hide",value:function(){this._modal.hide()}},{key:"show",value:function(){this._modal._visible||this._modal.show()}}]),t}();function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Q=function(){function t(e,n,r){p(this,t),x(this,"_modal",void 0),x(this,"_footer",void 0),x(this,"_i18n",void 0),this._i18n=e,this._modal=new $(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({headerClose:!1,title:this._i18n.printing,backdrop:"static",content:" ",footer:'\n            <button\n                type="button"\n                class="btn-sm btn btn-secondary"\n                data-dismiss="modal"\n            >\n                '.concat(this._i18n.cancel,"\n            </button>\n            ")},n.modal)),this._modal.on("dismiss",(function(){r()}))}return y(t,[{key:"_setContentModal",value:function(t){this._modal._html.body.innerHTML=t}},{key:"_setFooterModal",value:function(t){this._modal._html.footer.innerHTML=t}},{key:"show",value:function(t){this._setContentModal(t),this._modal._visible||this._modal.show()}},{key:"hide",value:function(){this._modal.hide()}}]),t}(),tt=Object.freeze({__proto__:null,en:{printPdf:"Print PDF",pleaseWait:"Please wait...",almostThere:"Almost there...",error:"An error occurred while printing",errorImage:"An error ocurred while loading an image",printing:"Exporting",cancel:"Cancel",close:"Close",print:"Export",mapElements:"Map elements",compass:"Compass",scale:"Scale",layersAttributions:"Layer attributions",addNote:"Add note (optional)",resolution:"Resolution",orientation:"Orientation",paperSize:"Paper size",landscape:"Landscape",portrait:"Portrait",current:"Current",paper:"Paper"},es:{printPdf:"Exportar PDF",pleaseWait:"Por favor espere...",almostThere:"Ya casi...",error:"Error al generar pdf",errorImage:"Ocurrió un error al tratar de cargar una imagen",printing:"Exportando",cancel:"Cancelar",close:"Cerrar",print:"Exportar",mapElements:"Elementos en el mapa",compass:"Brújula",scale:"Escala",layersAttributions:"Atribuciones de capas",addNote:"Agregar nota (opcional)",resolution:"Resolución",orientation:"Orientación",paperSize:"Tamaño de página",landscape:"Paisaje",portrait:"Retrato",current:"Actual",paper:"Hoja"}});function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)}(this,n)}}var ot="printMode";function it(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach((function(e){Object.keys(e).forEach((function(n){var r=e[n],o=t[n];t[n]=o&&r&&"object"===m(o)&&"object"===m(r)&&!Array.isArray(o)?it(o,r):r}))})),t}var at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(a,t);var i=rt(a);function a(t){var e;p(this,a);var n=document.createElement("button");return x(_(e=i.call(this,{target:t.target,element:n})),"_i18n",void 0),x(_(e),"_map",void 0),x(_(e),"_view",void 0),x(_(e),"_mapTarget",void 0),x(_(e),"_pdf",void 0),x(_(e),"_processingModal",void 0),x(_(e),"_settingsModal",void 0),x(_(e),"_initialized",void 0),x(_(e),"_timeoutProcessing",void 0),x(_(e),"_initialViewResolution",void 0),x(_(e),"_options",void 0),x(_(e),"_renderCompleteKey",void 0),x(_(e),"_isCanceled",void 0),e._i18n=t.language&&t.language in tt?tt[t.language]:tt.en,t.i18n&&(e._i18n=nt(nt({},e._i18n),t.i18n)),e._options={language:"en",filename:"Ol Pdf Printer",style:{paperMargin:10,brcolor:"#000000",bkcolor:"#273f50",txcolor:"#ffffff"},extraInfo:{date:!0,url:!0,specs:!0},mapElements:{description:!0,attributions:!0,scalebar:!0,compass:(new DOMParser).parseFromString('<?xml version="1.0" encoding="utf-8"?>\r\n<svg version="1.1" id="compass" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 300 300" style="enable-background:new 0 0 300 300;" xml:space="preserve">\r\n<style type="text/css">\r\n\t.st0{fill:#EA6868;}\r\n</style>\r\n<g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path class="st0" d="M146.3,9.1L75.5,287.2c-0.5,1.8,0.5,3.7,2.1,4.4c1.8,0.8,3.7,0.2,4.7-1.5l68.4-106.7l66.8,106.7\r\n\t\t\t\t\t\tc0.6,1.1,1.9,1.8,3.2,1.8c0.5,0,1-0.2,1.5-0.3c1.8-0.8,2.6-2.6,2.3-4.4L153.7,9.1C152.9,5.7,147.2,5.7,146.3,9.1z M154.2,174.2\r\n\t\t\t\t\t\tc-0.6-1.1-1.9-1.8-3.2-1.8l0,0c-1.3,0-2.6,0.6-3.2,1.8l-59,92L150,25.5l61.1,239.9L154.2,174.2z"/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path class="st0" d="M220.8,293.1c-1.8,0-3.4-1-4.2-2.3l-65.8-105.1L83.4,290.8c-1.3,1.9-4,2.9-6.1,1.9c-2.3-1-3.4-3.4-2.9-5.8\r\n\t\t\t\t\t\tL145.1,8.8c0.5-2.1,2.4-3.4,4.9-3.4s4.4,1.3,4.9,3.4l70.8,278.1c0.6,2.4-0.6,4.9-2.9,5.8C222.1,292.9,221.5,293.1,220.8,293.1z\r\n\t\t\t\t\t\t M150.8,181.2l1,1.6l66.8,106.7c0.6,1,1.9,1.5,3.2,1c1.1-0.5,1.8-1.8,1.5-3.1L152.4,9.3c-0.3-1.1-1.6-1.6-2.6-1.6\r\n\t\t\t\t\t\ts-2.3,0.5-2.6,1.6L76.4,287.4c-0.3,1.3,0.3,2.6,1.5,3.1c1.1,0.5,2.6,0,3.2-1L150.8,181.2z M85.6,273.2L150,20.6l64.2,251.9\r\n\t\t\t\t\t\tl-61.1-97.7c-1-1.6-3.4-1.5-4.4,0L85.6,273.2z"/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t</g>\r\n</g>\r\n</svg>\r\n',"image/svg+xml").firstChild},watermark:{title:"Ol Pdf Printer",titleColor:"#d65959",subtitle:"https://github.com/GastonZalba/ol-pdf-printer",subtitleColor:"#444444",logo:!1},paperSizes:[{size:[594,420],value:"A2"},{size:[420,297],value:"A3"},{size:[297,210],value:"A4",selected:!0},{size:[210,148],value:"A5"}],dpi:[{value:72},{value:96},{value:150,selected:!0},{value:200},{value:300}],scales:[1e4,5e3,1e3,500,250,100,50,25,10],mimeTypeExports:[{value:"pdf",selected:!0},{value:"png"},{value:"jpeg"},{value:"webp"}],units:"metric",dateFormat:void 0,ctrlBtnClass:"",modal:{animateClass:"fade",animateInClass:"show",transition:150,backdropTransition:100,templates:{dialog:'<div class="modal-dialog modal-dialog-centered"></div>',headerClose:'<button type="button" class="btn-close" data-dismiss="modal" aria-label="'.concat(e._i18n.close,'"><span aria-hidden="true">×</span></button>')}}},e._options=it(e._options,t),n.className="ol-print-btn-menu ".concat(e._options.ctrlBtnClass),n.title=e._i18n.printPdf,n.onclick=function(){return e.showPrintSettingsModal()},n.append((new DOMParser).parseFromString('<?xml version="1.0" encoding="utf-8"?>\r\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 490 490" xml:space="preserve">\r\n<g>\r\n\t<path d="M65.4,6v157.1c0,3.3-2.9,6-6.5,6H33.6c-3.6,0-6.5,2.7-6.5,6v189.6h0l36.3,33.8c1.2,1.1,1.9,2.7,1.9,4.3l0,81.2\r\n\t\tc0,3.3,2.9,6,6.5,6h383.8c3.6,0,6.5-2.7,6.5-6V104.9c0-1.6-0.7-3.1-1.9-4.3l-106-98.9c-1.2-1.1-2.9-1.8-4.6-1.8H71.8\r\n\t\tC68.2,0,65.4,2.7,65.4,6z M431.3,357.4h-374c-3.8,0-6.9-4-6.9-9V203.2c0-5,3.1-9,6.9-9h374c3.8,0,6.9,4,6.9,9v145.2\r\n\t\tC438.2,353.4,435.1,357.4,431.3,357.4z M340.2,27.6l70.8,66c7.2,6.7,2.1,18.2-8.1,18.2h-70.8c-6.3,0-11.4-4.8-11.4-10.7v-66\r\n\t\tC320.7,25.6,333,20.9,340.2,27.6z"/>\r\n\t<path d="M136.9,207.4h-6.5H87.9c-5.8,0-10.5,4.9-10.5,11v115.5c0,6.1,4.7,11,10.5,11h4c5.8,0,10.5-4.9,10.5-11v-22.4\r\n\t\tc0-6.1,4.7-11,10.5-11h18.9l5.8-0.1c18,0,29.9-3,35.8-9.1c5.9-6.1,8.9-18.3,8.9-36.7c0-18.5-3.1-31-9.3-37.5\r\n\t\tC166.6,210.6,154.7,207.4,136.9,207.4z M152.2,274.4c-3.1,2.7-10.2,4.1-21.5,4.1h-17.9c-5.8,0-10.5-4.9-10.5-11v-27.2\r\n\t\tc0-6.1,4.7-11,10.5-11h20.4c10.6,0,17.2,1.4,19.8,4.2c2.5,2.8,3.8,10,3.8,21.6C156.8,265.2,155.3,271.6,152.2,274.4z"/>\r\n\t<path d="M262.6,207.4h-54.1c-5.8,0-10.5,4.9-10.5,11v115.5c0,6.1,4.7,11,10.5,11h54.9c20.7,0,34.1-4.9,39.9-14.6\r\n\t\tc5.9-9.8,8.9-31.8,8.9-66.1c0-21-3.7-35.7-11-44.1C293.8,211.5,281,207.4,262.6,207.4z M281.6,314.2c-3.5,5.8-11.2,8.6-23.1,8.6\r\n\t\th-25c-5.8,0-10.5-4.9-10.5-11v-71.6c0-6.1,4.7-11,10.5-11H260c11.6,0,19,2.7,22.1,8.2c3.1,5.5,4.7,18.4,4.7,38.7\r\n\t\tC286.9,295.8,285.1,308.5,281.6,314.2z"/>\r\n\t<path d="M340.9,344.8h3.9c5.8,0,10.5-4.9,10.5-11v-34.5c0-6.1,4.7-11,10.5-11h37.9c5.8,0,10.5-4.9,10.5-11v0\r\n\t\tc0-6.1-4.7-11-10.5-11h-37.9c-5.8,0-10.5-4.9-10.5-11v-15.1c0-6.1,4.7-11,10.5-11h41.1c5.8,0,10.5-4.9,10.5-11v0\r\n\t\tc0-6.1-4.7-11-10.5-11h-66c-5.8,0-10.5,4.9-10.5,11v115.5C330.4,339.9,335.1,344.8,340.9,344.8z"/>\r\n</g>\r\n</svg>\r\n',"image/svg+xml").firstChild),e}return y(a,[{key:"_init",value:function(){this._map=this.getMap(),this._view=this._map.getView(),this._mapTarget=this._map.getTargetElement(),this._settingsModal=new Y(this._map,this._options,this._i18n,this._printMap.bind(this)),this._processingModal=new Q(this._i18n,this._options,this._onEndPrint.bind(this)),this._initialized=!0}},{key:"_setMapSizForPrint",value:function(t,e,n){var r=n/25.4;return[Math.round(t*r),Math.round(e*r)]}},{key:"_onEndPrint",value:function(){this._mapTarget.style.width="",this._mapTarget.style.height="",this._map.updateSize(),this._view.setResolution(this._initialViewResolution),this._mapTarget.classList.remove(ot),this._view.setConstrainResolution(!0),clearTimeout(this._timeoutProcessing),this._cancel()}},{key:"_prepareLoading",value:function(){var t=this;this._processingModal.show(this._i18n.pleaseWait),this._timeoutProcessing=setTimeout((function(){t._processingModal.show(t._i18n.almostThere)}),4e3)}},{key:"_disableLoading",value:function(){this._processingModal.hide()}},{key:"_setFormatOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._map.getLayers().forEach((function(r){if(r instanceof n){var o=r.getSource();o instanceof e&&o.updateParams({FORMAT_OPTIONS:t})}}))}},{key:"_printMap",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n&&this._mapTarget.classList.add(ot),setTimeout((function(){n&&e._prepareLoading(),e._isCanceled=!1,e._view.setConstrainResolution(!1);var o=e._options.paperSizes.find((function(e){return e.value===t.format})).size,i=(o="landscape"===t.orientation?o:h(o).reverse())[0],a=o[1],s=f(e._setMapSizForPrint(i,a,t.resolution),2),l=s[0],u=s[1];e._initialViewResolution=e._view.getResolution();var d=t.resolution/25.4,p=t.scale/r.getPointResolution(e._view.getProjection(),d,e._view.getCenter());e._renderCompleteKey=e._map.once("rendercomplete",(function(){M.toJpeg(e._mapTarget.querySelector(".ol-unselectable.ol-layers"),{width:l,height:u}).then(function(){var r=c(S.mark((function r(o){return S.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e._isCanceled){r.next=2;break}return r.abrupt("return");case 2:return e._pdf=new A({view:e._view,i18n:e._i18n,config:e._options,form:t,height:a,width:i,scaleResolution:p}),e._pdf.addMapImage(o),r.next=6,e._pdf.addMapHelpers();case 6:if(!e._isCanceled){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,e._pdf.savePdf();case 10:e._onEndPrint(),n&&e._disableLoading();case 12:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()).catch((function(t){var n="string"==typeof t?t:e._i18n.error;console.error(t),e._onEndPrint(),e._processingModal.show(n)}))})),e._mapTarget.style.width=l+"px",e._mapTarget.style.height=u+"px",e._map.updateSize(),e._map.getView().setResolution(p)}),o)}},{key:"_cancel",value:function(){this._renderCompleteKey&&o.unByKey(this._renderCompleteKey),this._isCanceled=!0}},{key:"showPrintSettingsModal",value:function(){this._initialized||this._init(),this._settingsModal.show()}},{key:"hidePrintSettingsModal",value:function(){this._settingsModal.hide()}},{key:"createPdf",value:function(t,e){t={},this._printMap(nt({format:(this._options.paperSizes.find((function(t){return t.selected}))||this._options.paperSizes[0]).value,resolution:(this._options.dpi.find((function(t){return t.selected}))||this._options.dpi[0]).value,orientation:"landscape",compass:!0,attributions:!0,scalebar:!0,scale:1e3,typeExport:"pdf"},t),e)}}]),a}(t);return at}));
//# sourceMappingURL=ol-pdf-printer.min.js.map
