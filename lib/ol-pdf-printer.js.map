{"version":3,"file":"ol-pdf-printer.js","sources":["../src/myPragma.js","../src/components/Pdf.tsx","../src/components/Helpers.ts","../src/components/SettingsModal.tsx","../src/components/ProcessingModal.ts","../src/components/i18n/es.ts","../src/components/i18n/en.ts","../src/ol-pdf-printer.ts"],"sourcesContent":["export default function createElement(tagName, attrs = {}, ...children) {\r\n    if (tagName === 'null' || tagName === null) return children;\r\n    if (typeof tagName === 'function') return tagName(attrs, children);\r\n\r\n    const elem = document.createElement(tagName);\r\n\r\n    Object.entries(attrs || {}).forEach(([name, value]) => {\r\n        if (typeof value !== undefined && value !== null) {\r\n            if (\r\n                name.startsWith('on') &&\r\n                name.toLowerCase() in window &&\r\n                typeof value === 'function'\r\n            )\r\n                elem.addEventListener(name.toLowerCase().substr(2), value);\r\n            else {\r\n                if (name === 'className')\r\n                    elem.setAttribute('class', value.toString());\r\n                else if (name === 'htmlFor')\r\n                    elem.setAttribute('for', value.toString());\r\n                else elem.setAttribute(name, value.toString());\r\n            }\r\n        }\r\n    });\r\n\r\n    for (const child of children) {\r\n        if (!child) continue;\r\n        if (Array.isArray(child)) elem.append(...child);\r\n        else {\r\n            if (child.nodeType === undefined) elem.innerHTML += child;\r\n            else elem.appendChild(child);\r\n        }\r\n    }\r\n    return elem;\r\n}\r\n","import View from 'ol/View';\r\nimport { getPointResolution } from 'ol/proj';\r\n\r\nimport { jsPDF, TextOptionsLight } from 'jspdf';\r\nimport { getDocument, GlobalWorkerOptions, version } from 'pdfjs-dist';\r\n\r\nimport { I18n, Options, IPrintOptions, IWatermark } from '../ol-pdf-printer';\r\n\r\nimport myPragma from '../myPragma';\r\n\r\n/**\r\n * @private\r\n */\r\nexport default class Pdf {\r\n    protected _pdf: IPdf;\r\n    protected _view: View;\r\n    protected _scaleDenominator: number;\r\n    protected _form: IPrintOptions;\r\n    protected _style: Options['style'];\r\n    protected _i18n: I18n;\r\n\r\n    protected _config: Options;\r\n\r\n    constructor(params: IPdfOptions) {\r\n        const { view, form, i18n, config, height, width, scaleResolution } =\r\n            params;\r\n\r\n        this._view = view;\r\n        this._form = form;\r\n        this._i18n = i18n;\r\n        this._config = config;\r\n\r\n        this._pdf = this.create(\r\n            this._form.orientation,\r\n            this._form.format,\r\n            height,\r\n            width\r\n        );\r\n\r\n        this._scaleDenominator = this._calculateScaleDenominator(\r\n            this._form.resolution,\r\n            scaleResolution\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param orientation\r\n     * @param format\r\n     * @param width\r\n     * @param height\r\n     * @returns\r\n     * @protected\r\n     */\r\n    create(\r\n        orientation: IPrintOptions['orientation'],\r\n        format: IPrintOptions['format'],\r\n        height: number,\r\n        width: number\r\n    ): IPdf {\r\n        // UMD support\r\n        const _jsPDF =\r\n            (window as IWindow & typeof globalThis).jspdf?.jsPDF || jsPDF;\r\n\r\n        return {\r\n            doc: new _jsPDF({ orientation, format }),\r\n            height: height,\r\n            width: width\r\n        };\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param dataUrl\r\n     * @protected\r\n     */\r\n    addMapImage(dataUrl: string): void {\r\n        this._pdf.doc.addImage(\r\n            dataUrl,\r\n            'JPEG',\r\n            this._config.style.paperMargin, // Add margins\r\n            this._config.style.paperMargin,\r\n            this._pdf.width - this._config.style.paperMargin * 2,\r\n            this._pdf.height - this._config.style.paperMargin * 2\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @protected\r\n     */\r\n    addMapHelpers = async (): Promise<void> => {\r\n        const { mapElements, extraInfo, style, watermark } = this._config;\r\n\r\n        this._style = style;\r\n\r\n        if (watermark) {\r\n            await this._addWatermark(watermark);\r\n        }\r\n\r\n        if (mapElements) {\r\n            if (mapElements.compass && this._form.compass) {\r\n                await this._addCompass(mapElements.compass);\r\n            }\r\n\r\n            if (mapElements.description && this._form.description) {\r\n                this._addDescription();\r\n            }\r\n\r\n            if (mapElements.scalebar && this._form.scalebar) {\r\n                this._addScaleBar();\r\n            }\r\n\r\n            if (mapElements.attributions && this._form.attributions) {\r\n                this._addAttributions();\r\n            }\r\n        }\r\n\r\n        if (extraInfo) {\r\n            // Bottom info\r\n            if (extraInfo.url) {\r\n                this._addUrl();\r\n            }\r\n\r\n            if (extraInfo.date) {\r\n                this._addDate();\r\n            }\r\n\r\n            if (extraInfo.specs) {\r\n                this._addSpecs();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    savePdf(): Promise<void> {\r\n        const downloadURI = (uri: string, name: string): void => {\r\n            const link = <a download={name} href={uri}></a>;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        };\r\n\r\n        return new Promise((resolve, reject) => {\r\n            if (this._form.typeExport === 'pdf') {\r\n                this._pdf.doc.save(this._config.filename + '.pdf');\r\n                resolve();\r\n            } else {\r\n                const pdf = this._pdf.doc.output('dataurlstring');\r\n\r\n                // UMD support\r\n                const versionPdfJS =\r\n                    (window as IWindow & typeof globalThis)?.pdfjsLib\r\n                        ?.version || version;\r\n\r\n                GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${versionPdfJS}/pdf.worker.js`;\r\n\r\n                getDocument(pdf).promise.then(\r\n                    (pdf) => {\r\n                        pdf.getPage(1).then((page) => {\r\n                            const scale = 2;\r\n\r\n                            const viewport = page.getViewport({ scale });\r\n\r\n                            // Prepare canvas\r\n                            const canvas = <canvas />;\r\n                            canvas.style.display = 'none';\r\n                            document.body.appendChild(canvas);\r\n                            const context = canvas.getContext('2d');\r\n                            canvas.height = viewport.height;\r\n                            canvas.width = viewport.width;\r\n\r\n                            // Render PDF page into canvas context\r\n                            const task = page.render({\r\n                                canvasContext: context,\r\n                                viewport: viewport\r\n                            });\r\n                            task.promise.then(() => {\r\n                                downloadURI(\r\n                                    canvas.toDataURL(\r\n                                        `image/${this._form.typeExport}`\r\n                                    ),\r\n                                    this._config.filename +\r\n                                        `.${this._form.typeExport}`\r\n                                );\r\n                                canvas.remove();\r\n                                resolve();\r\n                            });\r\n                        });\r\n                    },\r\n                    (error: Error) => {\r\n                        reject(error);\r\n                        console.log(error);\r\n                    }\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Convert an SVGElement to an PNG string\r\n     * @param svg\r\n     * @returns\r\n     */\r\n    _processSvgImage = (svg: SVGElement): Promise<string> => {\r\n        // https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser#answer-58142441\r\n        return new Promise((resolve, reject) => {\r\n            const svgToPng = (svg: SVGElement, callback) => {\r\n                const url = getSvgUrl(svg);\r\n                svgUrlToPng(url, (imgData: string) => {\r\n                    callback(imgData);\r\n                    URL.revokeObjectURL(url);\r\n                });\r\n            };\r\n\r\n            const getSvgUrl = (svg: SVGElement) => {\r\n                return URL.createObjectURL(\r\n                    new Blob([svg.outerHTML], { type: 'image/svg+xml' })\r\n                );\r\n            };\r\n\r\n            const svgUrlToPng = (svgUrl: string, callback) => {\r\n                const svgImage = document.createElement('img');\r\n                document.body.appendChild(svgImage);\r\n\r\n                svgImage.onerror = (err) => {\r\n                    console.error(err);\r\n                    return reject(this._i18n.errorImage);\r\n                };\r\n\r\n                svgImage.onload = () => {\r\n                    try {\r\n                        const canvas = document.createElement('canvas');\r\n                        canvas.width = svgImage.clientWidth;\r\n                        canvas.height = svgImage.clientHeight;\r\n                        const canvasCtx = canvas.getContext('2d');\r\n                        canvasCtx.drawImage(svgImage, 0, 0);\r\n                        const imgData = canvas.toDataURL('image/png');\r\n                        callback(imgData);\r\n                        document.body.removeChild(svgImage);\r\n                    } catch (err) {\r\n                        return reject(err);\r\n                    }\r\n                };\r\n                svgImage.src = svgUrl;\r\n            };\r\n\r\n            svgToPng(svg, (imgData: string) => {\r\n                resolve(imgData);\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Adapted from http://hg.intevation.de/gemma/file/tip/client/src/components/Pdftool.vue#l252\r\n     * @protected\r\n     */\r\n    _calculateScaleDenominator(\r\n        resolution: number,\r\n        scaleResolution: number\r\n    ): number {\r\n        const pixelsPerMapMillimeter = resolution / 25.4;\r\n        return Math.round(\r\n            1000 *\r\n                pixelsPerMapMillimeter *\r\n                this._getMeterPerPixel(scaleResolution)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _getMeterPerPixel(scaleResolution: number): number {\r\n        const proj = this._view.getProjection();\r\n        return (\r\n            getPointResolution(proj, scaleResolution, this._view.getCenter()) *\r\n            proj.getMetersPerUnit()\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param position\r\n     * @param offset\r\n     * @param size\r\n     * @returns\r\n     * @protected\r\n     */\r\n    _calculateOffsetByPosition = (\r\n        position: string,\r\n        offset: { x: number; y: number },\r\n        size = 0\r\n    ): { x: number; y: number } => {\r\n        let x: number, y: number;\r\n\r\n        switch (position) {\r\n            case 'topleft':\r\n                x = offset.x + this._style.paperMargin;\r\n                y = offset.y + this._style.paperMargin + size;\r\n                break;\r\n\r\n            case 'topright':\r\n                x = this._pdf.width - offset.x - this._style.paperMargin;\r\n                y = offset.y + this._style.paperMargin + size;\r\n                break;\r\n\r\n            case 'bottomright':\r\n                x = this._pdf.width - offset.x - this._style.paperMargin;\r\n                y =\r\n                    this._pdf.height -\r\n                    offset.y -\r\n                    this._style.paperMargin -\r\n                    size;\r\n                break;\r\n\r\n            case 'bottomleft':\r\n                y =\r\n                    this._pdf.height -\r\n                    offset.y -\r\n                    this._style.paperMargin -\r\n                    size;\r\n                x = offset.x + this._style.paperMargin;\r\n                break;\r\n        }\r\n\r\n        return { x, y };\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     * @param bkcolor\r\n     * @param brcolor\r\n     * @protected\r\n     */\r\n    _addRoundedBox = (\r\n        x: number,\r\n        y: number,\r\n        width: number,\r\n        height: number,\r\n        bkcolor: string,\r\n        brcolor: string\r\n    ): void => {\r\n        const rounding = 1;\r\n\r\n        this._pdf.doc.setDrawColor(brcolor);\r\n        this._pdf.doc.setFillColor(bkcolor);\r\n\r\n        this._pdf.doc.roundedRect(\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            rounding,\r\n            rounding,\r\n            'FD'\r\n        );\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param fontSize\r\n     * @param color\r\n     * @param align\r\n     * @param str\r\n     * @protected\r\n     */\r\n    _addText = (\r\n        x: number,\r\n        y: number,\r\n        width: number,\r\n        fontSize: number,\r\n        color: string,\r\n        align: TextOptionsLight['align'] = 'left',\r\n        str: string\r\n    ): void => {\r\n        this._pdf.doc.setTextColor(color);\r\n        this._pdf.doc.setFontSize(fontSize);\r\n\r\n        this._pdf.doc.text(str, x, y, {\r\n            align: align\r\n        });\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param position\r\n     * @param offset\r\n     * @param width\r\n     * @param fontSize\r\n     * @param color\r\n     * @param align\r\n     * @param str\r\n     * @protected\r\n     */\r\n    _addTextByOffset = (\r\n        position: string,\r\n        offset: { x: number; y: number },\r\n        width: number,\r\n        fontSize: number,\r\n        color: string,\r\n        align: TextOptionsLight['align'],\r\n        str: string\r\n    ): void => {\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n        const fixX = align === 'center' ? x - width / 2 : x;\r\n        this._addText(fixX, y, width, fontSize, color, align, str);\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _addDescription = (): void => {\r\n        const str = this._form.description.trim();\r\n        const position = 'topleft';\r\n        const offset = { x: 2, y: 2 };\r\n        const fontSize = 8;\r\n        const maxWidth = 50;\r\n\r\n        const paddingBack = 4;\r\n\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n\r\n        this._pdf.doc.setTextColor(this._style.txcolor);\r\n        this._pdf.doc.setFontSize(fontSize);\r\n\r\n        const { w, h } = this._pdf.doc.getTextDimensions(str, {\r\n            maxWidth: maxWidth\r\n        });\r\n\r\n        this._addRoundedBox(\r\n            x,\r\n            y,\r\n            w + paddingBack * 2,\r\n            h + paddingBack,\r\n            this._style.bkcolor,\r\n            this._style.brcolor\r\n        );\r\n\r\n        this._pdf.doc.text(str, x + paddingBack, y + paddingBack, {\r\n            align: 'left',\r\n            maxWidth: maxWidth\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This functions is a mess\r\n     * @returns\r\n     * @protected\r\n     */\r\n    _addWatermark = async (watermark: IWatermark): Promise<void> => {\r\n        const position = 'topright';\r\n        const offset = { x: 0, y: 0 };\r\n        const fontSize = 14;\r\n        const imageSize = 12;\r\n        const fontSizeSubtitle = fontSize / 1.8;\r\n        let back = false;\r\n\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n\r\n        const paddingBack = 2;\r\n\r\n        let acumulativeWidth = watermark.logo ? imageSize + 0.5 : 0;\r\n\r\n        if (watermark.title) {\r\n            this._pdf.doc.setTextColor(watermark.titleColor);\r\n            this._pdf.doc.setFontSize(fontSize);\r\n            this._pdf.doc.setFont('helvetica', 'bold');\r\n\r\n            // This function works bad\r\n            let { w } = this._pdf.doc.getTextDimensions(watermark.title);\r\n\r\n            if (watermark.subtitle) {\r\n                this._pdf.doc.setFontSize(fontSizeSubtitle);\r\n                const wSub = this._pdf.doc.getTextDimensions(\r\n                    watermark.subtitle\r\n                ).w;\r\n                w = wSub - 4 > w ? wSub : w + 4; // weird fix needed\r\n                this._pdf.doc.setFontSize(fontSize);\r\n            } else {\r\n                w += 4;\r\n            }\r\n\r\n            // Adaptable width, fixed height\r\n            const height = 16;\r\n            const widthBack = w + paddingBack;\r\n\r\n            this._addRoundedBox(\r\n                x - widthBack + 4 - acumulativeWidth,\r\n                y - 4,\r\n                widthBack + acumulativeWidth,\r\n                height,\r\n                '#ffffff',\r\n                '#ffffff'\r\n            );\r\n            back = true;\r\n\r\n            this._pdf.doc.text(\r\n                watermark.title,\r\n                x,\r\n                y + paddingBack + 3 + (!watermark.subtitle ? 2 : 0),\r\n                {\r\n                    align: 'right'\r\n                }\r\n            );\r\n\r\n            acumulativeWidth += w;\r\n        }\r\n\r\n        if (watermark.subtitle) {\r\n            this._pdf.doc.setTextColor(watermark.subtitleColor);\r\n            this._pdf.doc.setFontSize(fontSizeSubtitle);\r\n            this._pdf.doc.setFont('helvetica', 'normal');\r\n\r\n            if (!back) {\r\n                const { w } = this._pdf.doc.getTextDimensions(\r\n                    watermark.subtitle\r\n                );\r\n                const widthBack = paddingBack * 2 + w;\r\n                this._addRoundedBox(\r\n                    x - widthBack + 3 - acumulativeWidth,\r\n                    y - 4,\r\n                    widthBack + acumulativeWidth,\r\n                    16,\r\n                    '#ffffff',\r\n                    '#ffffff'\r\n                );\r\n                acumulativeWidth += widthBack;\r\n                back = true;\r\n            }\r\n\r\n            const marginTop = watermark.title ? fontSize / 2 : 4;\r\n\r\n            this._pdf.doc.text(\r\n                watermark.subtitle,\r\n                x,\r\n                y + paddingBack + marginTop,\r\n                {\r\n                    align: 'right'\r\n                }\r\n            );\r\n        }\r\n\r\n        if (!watermark.logo) return;\r\n\r\n        const addImage = (image: HTMLImageElement): void => {\r\n            this._pdf.doc.addImage(\r\n                image,\r\n                'PNG',\r\n                x - acumulativeWidth + paddingBack * 2 - 1,\r\n                y - 1,\r\n                imageSize,\r\n                imageSize\r\n            );\r\n        };\r\n\r\n        if (!back) {\r\n            const widthBack = acumulativeWidth + paddingBack;\r\n            this._addRoundedBox(\r\n                x - widthBack + 4,\r\n                y - 4,\r\n                widthBack,\r\n                16,\r\n                '#ffffff',\r\n                '#ffffff'\r\n            );\r\n        }\r\n\r\n        if (watermark.logo instanceof Image) {\r\n            addImage(watermark.logo);\r\n            return;\r\n        } else {\r\n            let imgData: string;\r\n\r\n            if (typeof watermark.logo === 'string') {\r\n                imgData = watermark.logo;\r\n            } else if (watermark.logo instanceof SVGElement) {\r\n                imgData = await this._processSvgImage(watermark.logo);\r\n            } else {\r\n                throw this._i18n.errorImage;\r\n            }\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const image = new Image(imageSize, imageSize);\r\n                image.onload = () => {\r\n                    try {\r\n                        addImage(image);\r\n                        resolve();\r\n                    } catch (err) {\r\n                        return reject(err);\r\n                    }\r\n                };\r\n                image.onerror = () => {\r\n                    return reject(this._i18n.errorImage);\r\n                };\r\n                image.src = imgData;\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _addDate = (): void => {\r\n        const position = 'bottomright';\r\n        const width = 250;\r\n        const offset = {\r\n            x: 0,\r\n            y: -5\r\n        };\r\n        const fontSize = 7;\r\n        const txcolor = '#000000';\r\n        const align = 'right';\r\n\r\n        this._pdf.doc.setFont('helvetica', 'normal');\r\n        const str = new Date(Date.now()).toLocaleDateString(\r\n            this._config.dateFormat\r\n        );\r\n        this._addTextByOffset(\r\n            position,\r\n            offset,\r\n            width,\r\n            fontSize,\r\n            txcolor,\r\n            align,\r\n            str\r\n        );\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _addUrl = (): void => {\r\n        const position = 'bottomleft';\r\n        const width = 250;\r\n        const offset = {\r\n            x: 0,\r\n            y: -6.5\r\n        };\r\n        const fontSize = 6;\r\n        const txcolor = '#000000';\r\n        const align = 'left';\r\n\r\n        this._pdf.doc.setFont('helvetica', 'italic');\r\n        const str = window.location.href;\r\n        this._addTextByOffset(\r\n            position,\r\n            offset,\r\n            width,\r\n            fontSize,\r\n            txcolor,\r\n            align,\r\n            str\r\n        );\r\n    };\r\n    /**\r\n     * @protected\r\n     */\r\n    _addSpecs = (): void => {\r\n        const position = 'bottomleft';\r\n        const offset = {\r\n            x: 0,\r\n            y: -3.5\r\n        };\r\n        const fontSize = 6;\r\n        const txcolor = '#000000';\r\n        const align = 'left';\r\n\r\n        this._pdf.doc.setFont('helvetica', 'bold');\r\n        this._pdf.doc.setFontSize(fontSize);\r\n\r\n        const scale = `${\r\n            this._i18n.scale\r\n        } 1:${this._scaleDenominator.toLocaleString('de')}`;\r\n        const paper = `${this._i18n.paper} ${this._form.format.toUpperCase()}`;\r\n        const dpi = `${this._form.resolution} DPI`;\r\n\r\n        const specs = [scale, dpi, paper];\r\n        const str = specs.join(' - ');\r\n\r\n        const { w } = this._pdf.doc.getTextDimensions(str);\r\n\r\n        this._addTextByOffset(\r\n            position,\r\n            offset,\r\n            w,\r\n            fontSize,\r\n            txcolor,\r\n            align,\r\n            str\r\n        );\r\n    };\r\n\r\n    /**\r\n     * The attributions are obtained from the Control in the DOM.\r\n     * @protected\r\n     */\r\n    _addAttributions = (): void => {\r\n        const attributionsUl = document.querySelector('.ol-attribution ul');\r\n\r\n        if (!attributionsUl) return;\r\n\r\n        const ATTRI_SEPATATOR = ' · ';\r\n\r\n        const position = 'bottomright';\r\n        const offset = { x: 1, y: 1 };\r\n        const fontSize = 7;\r\n\r\n        this._pdf.doc.setFont('helvetica', 'normal');\r\n        this._pdf.doc.setFontSize(fontSize);\r\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\r\n\r\n        let xPos = x;\r\n\r\n        const { w, h } = this._pdf.doc.getTextDimensions(\r\n            attributionsUl.textContent\r\n        );\r\n\r\n        const paddingBack = 4;\r\n\r\n        const whiteSpaceWidth =\r\n            this._pdf.doc.getTextDimensions(ATTRI_SEPATATOR).w;\r\n\r\n        const attributions = document.querySelectorAll('.ol-attribution li');\r\n\r\n        const sumWhiteSpaceWidth = whiteSpaceWidth * (attributions.length - 1);\r\n\r\n        this._addRoundedBox(\r\n            x - w - sumWhiteSpaceWidth - 2,\r\n            y - h,\r\n            w + paddingBack + sumWhiteSpaceWidth + 2,\r\n            h + paddingBack,\r\n            '#ffffff',\r\n            '#ffffff'\r\n        );\r\n\r\n        Array.from(attributions)\r\n            .reverse()\r\n            .forEach((attribution, index) => {\r\n                Array.from(attribution.childNodes)\r\n                    .reverse()\r\n                    .forEach((node) => {\r\n                        const content = node.textContent;\r\n\r\n                        if ('href' in node) {\r\n                            this._pdf.doc.setTextColor('#0077cc');\r\n                            this._pdf.doc.textWithLink(content, xPos, y, {\r\n                                align: 'right',\r\n                                url: (node as HTMLAnchorElement).href\r\n                            });\r\n                        } else {\r\n                            this._pdf.doc.setTextColor('#666666');\r\n                            this._pdf.doc.text(content, xPos, y, {\r\n                                align: 'right'\r\n                            });\r\n                        }\r\n\r\n                        const { w } = this._pdf.doc.getTextDimensions(content);\r\n                        xPos -= w;\r\n                    });\r\n\r\n                // Excldue last element\r\n                if (index !== attributions.length - 1) {\r\n                    // To add separation between diferents attributtions\r\n                    this._pdf.doc.text(ATTRI_SEPATATOR, xPos, y, {\r\n                        align: 'right'\r\n                    });\r\n\r\n                    xPos -= whiteSpaceWidth;\r\n                }\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Adapted from http://hg.intevation.de/gemma/file/tip/client/src/components/Pdftool.vue#l252\r\n     * @protected\r\n     */\r\n    _addScaleBar = (): void => {\r\n        const offset = { x: 2, y: 2 };\r\n\r\n        const maxWidth = 90; // in mm\r\n\r\n        // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10#Polyfill\r\n        const log10 =\r\n            Math.log10 || // more precise, but unsupported by IE\r\n            function (x) {\r\n                return Math.log(x) * Math.LOG10E;\r\n            };\r\n\r\n        let maxLength = maxWidth * this._scaleDenominator;\r\n\r\n        let unit: string;\r\n        let unitConversionFactor: number;\r\n\r\n        if (this._config.units === 'metric') {\r\n            unit = 'mm';\r\n\r\n            const millimetre = 1;\r\n            const metre = 1000;\r\n            const kilometre = metre * 1000;\r\n\r\n            unitConversionFactor = millimetre;\r\n\r\n            if (maxLength >= kilometre * 10) {\r\n                unit = 'km';\r\n                unitConversionFactor = 1e6;\r\n            } else if (maxLength >= metre * 10) {\r\n                unit = 'm';\r\n                unitConversionFactor = metre;\r\n            }\r\n        } else if (this._config.units === 'imperial') {\r\n            const inch = 25.4; // Millimetre to inch\r\n            const mile = inch * 63360;\r\n            const yard = inch * 36;\r\n\r\n            unit = 'in';\r\n            unitConversionFactor = inch;\r\n\r\n            if (maxLength >= mile * 10) {\r\n                unit = 'mi';\r\n                unitConversionFactor = mile;\r\n            } else if (maxLength >= yard * 10) {\r\n                unit = 'yd';\r\n                unitConversionFactor = yard;\r\n            }\r\n        }\r\n\r\n        maxLength /= unitConversionFactor;\r\n\r\n        const unroundedLength = maxLength;\r\n        const numberOfDigits = Math.floor(log10(unroundedLength));\r\n        const factor = Math.pow(10, numberOfDigits);\r\n        const mapped = unroundedLength / factor;\r\n\r\n        let length = Math.floor(maxLength); // just to have an upper limit\r\n\r\n        // manually only use numbers that are very nice to devide by 4\r\n        // note that this is taken into account for rounding later\r\n        if (mapped > 8) {\r\n            length = 8 * factor;\r\n        } else if (mapped > 4) {\r\n            length = 4 * factor;\r\n        } else if (mapped > 2) {\r\n            length = 2 * factor;\r\n        } else {\r\n            length = factor;\r\n        }\r\n\r\n        let size = (length * unitConversionFactor) / this._scaleDenominator / 4;\r\n\r\n        const percentageMargin = this._style.paperMargin\r\n            ? ((this._style.paperMargin * 2) / this._pdf.width) * 100\r\n            : null;\r\n\r\n        // Reduce length acording to margins\r\n        size = percentageMargin\r\n            ? (size / 100) * (100 - percentageMargin)\r\n            : size;\r\n\r\n        const fullSize = size * 4;\r\n\r\n        // x/y defaults to offset for topleft corner (normal x/y coordinates)\r\n        const x = offset.x + this._style.paperMargin;\r\n        let y = offset.y + this._style.paperMargin;\r\n\r\n        y = this._pdf.height - offset.y - 10 - this._style.paperMargin;\r\n\r\n        // to give the outer white box 4mm padding\r\n        const scaleBarX = x + 4;\r\n        const scaleBarY = y + 5; // 5 because above the scalebar will be the numbers\r\n\r\n        // draw outer box\r\n        this._addRoundedBox(\r\n            x,\r\n            y,\r\n            fullSize + 8,\r\n            10,\r\n            this._style.bkcolor,\r\n            this._style.brcolor\r\n        );\r\n\r\n        // draw first part of scalebar\r\n        this._pdf.doc.setDrawColor(this._style.brcolor);\r\n        this._pdf.doc.setFillColor(0, 0, 0);\r\n        this._pdf.doc.rect(scaleBarX, scaleBarY, size, 1, 'FD');\r\n\r\n        // draw second part of scalebar\r\n        this._pdf.doc.setDrawColor(this._style.brcolor);\r\n        this._pdf.doc.setFillColor(255, 255, 255);\r\n        this._pdf.doc.rect(scaleBarX + size, scaleBarY, size, 1, 'FD');\r\n\r\n        // draw third part of scalebar\r\n        this._pdf.doc.setDrawColor(this._style.brcolor);\r\n        this._pdf.doc.setFillColor(0, 0, 0);\r\n        this._pdf.doc.rect(scaleBarX + size * 2, scaleBarY, size * 2, 1, 'FD');\r\n\r\n        // draw numeric labels above scalebar\r\n        this._pdf.doc.setTextColor(this._style.txcolor);\r\n        this._pdf.doc.setFontSize(6);\r\n        this._pdf.doc.text('0', scaleBarX, scaleBarY - 1);\r\n        // /4 and could give 2.5. We still round, because of floating point arith\r\n        this._pdf.doc.text(\r\n            String(Math.round((length * 10) / 4) / 10),\r\n            scaleBarX + size - 1,\r\n            scaleBarY - 1\r\n        );\r\n        this._pdf.doc.text(\r\n            String(Math.round(length / 2)),\r\n            scaleBarX + size * 2 - 2,\r\n            scaleBarY - 1\r\n        );\r\n        this._pdf.doc.text(\r\n            Math.round(length).toString() + ' ' + unit,\r\n            scaleBarX + size * 4 - 4,\r\n            scaleBarY - 1\r\n        );\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param imgSrc\r\n     * @returns\r\n     * @protected\r\n     */\r\n    _addCompass = async (\r\n        imgSrc: HTMLImageElement | string | SVGElement\r\n    ): Promise<void> => {\r\n        const position = 'bottomright';\r\n        const offset = { x: 2, y: 6 };\r\n        const size = 6;\r\n        const rotationRadians = this._view.getRotation();\r\n        const imageSize = 100;\r\n\r\n        const { x, y } = this._calculateOffsetByPosition(\r\n            position,\r\n            offset,\r\n            size\r\n        );\r\n\r\n        const addRotation = (image: CanvasImageSource) => {\r\n            const canvas = document.createElement('canvas');\r\n\r\n            // Must be bigger than the image to prevent clipping\r\n            canvas.height = 120;\r\n            canvas.width = 120;\r\n            const context = canvas.getContext('2d');\r\n\r\n            context.translate(canvas.width * 0.5, canvas.height * 0.5);\r\n            context.rotate(rotationRadians);\r\n            context.translate(-canvas.width * 0.5, -canvas.height * 0.5);\r\n            context.drawImage(\r\n                image,\r\n                (canvas.height - imageSize) / 2,\r\n                (canvas.width - imageSize) / 2,\r\n                imageSize,\r\n                imageSize\r\n            );\r\n\r\n            // Add back circle\r\n            const xCircle = x - size;\r\n            const yCircle = y;\r\n            this._pdf.doc.setDrawColor(this._style.brcolor);\r\n            this._pdf.doc.setFillColor(this._style.bkcolor);\r\n            this._pdf.doc.circle(xCircle, yCircle, size, 'FD');\r\n\r\n            return canvas;\r\n        };\r\n\r\n        const addImage = (image: CanvasImageSource): void => {\r\n            const rotatedCanvas = addRotation(image);\r\n\r\n            const sizeImage = size * 1.5;\r\n            const xImage = x - sizeImage - size / 4.3;\r\n            const yImage = y - sizeImage / 2;\r\n\r\n            this._pdf.doc.addImage(\r\n                rotatedCanvas,\r\n                'PNG',\r\n                xImage,\r\n                yImage,\r\n                sizeImage,\r\n                sizeImage\r\n            );\r\n        };\r\n\r\n        let image: HTMLImageElement;\r\n\r\n        if (imgSrc instanceof Image) {\r\n            addImage(image);\r\n            return;\r\n        } else {\r\n            let imgData: string;\r\n\r\n            if (typeof imgSrc === 'string') {\r\n                imgData = imgSrc;\r\n            } else if (imgSrc instanceof SVGElement) {\r\n                imgData = await this._processSvgImage(imgSrc);\r\n            } else {\r\n                throw this._i18n.errorImage;\r\n            }\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const image = new Image(imageSize, imageSize);\r\n\r\n                image.onload = () => {\r\n                    addImage(image);\r\n                    resolve();\r\n                };\r\n\r\n                image.onerror = () => {\r\n                    reject(this._i18n.errorImage);\r\n                };\r\n\r\n                image.src = imgData;\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n * @protected\r\n */\r\ninterface IWindow extends Window {\r\n    jspdf: any;\r\n    pdfjsLib: any;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n * @protected\r\n */\r\nexport interface IPdf {\r\n    doc: jsPDF;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\ninterface IPdfOptions {\r\n    view: View;\r\n    form: IPrintOptions;\r\n    i18n: I18n;\r\n    config: Options;\r\n    height: number;\r\n    width: number;\r\n    scaleResolution: number;\r\n}\r\n","import Map from 'ol/Map';\r\nimport { METERS_PER_UNIT } from 'ol/proj/Units';\r\n\r\n/**\r\n *\r\n * @param map\r\n * @param opt_round\r\n * @returns\r\n * @protected\r\n */\r\nexport const getMapScale = (map: Map, opt_round = true): number => {\r\n    const dpi = 25.4 / 0.28;\r\n\r\n    const view = map.getView();\r\n    const unit = view.getProjection().getUnits();\r\n    const res = view.getResolution();\r\n    const inchesPerMetre = 39.37;\r\n\r\n    let scale = res * METERS_PER_UNIT[unit] * inchesPerMetre * dpi;\r\n\r\n    if (opt_round) {\r\n        scale = Math.round(scale);\r\n    }\r\n\r\n    return scale;\r\n};\r\n","import Modal from 'modal-vanilla';\r\nimport Map from 'ol/Map';\r\n\r\nimport { I18n, IValues, Options } from '../ol-pdf-printer';\r\nimport { getMapScale } from './Helpers';\r\nimport myPragma from '../myPragma';\r\n\r\n/**\r\n * @private\r\n */\r\nexport default class SettingsModal {\r\n    _modal: Modal;\r\n\r\n    constructor(\r\n        map: Map,\r\n        options: Options,\r\n        i18n: I18n,\r\n        printMap: (values: IValues, showLoading: boolean, delay: number) => void\r\n    ) {\r\n        this._modal = new Modal({\r\n            headerClose: true,\r\n            header: true,\r\n            animate: true,\r\n            title: i18n.printPdf,\r\n            content: this.Content(i18n, options),\r\n            footer: this.Footer(i18n, options),\r\n            ...options.modal\r\n        });\r\n\r\n        this._modal.on('dismiss', (modal: Modal, event: Event): void => {\r\n            const print = (event.target as HTMLElement).dataset.print;\r\n            if (!print) return;\r\n\r\n            const form = document.getElementById('printMap') as HTMLFormElement;\r\n\r\n            const formData = new FormData(form);\r\n\r\n            const values = {\r\n                format: formData.get('printFormat'),\r\n                orientation: formData.get('printOrientation'),\r\n                resolution: formData.get('printResolution'),\r\n                scale: formData.get('printScale'),\r\n                description: formData.get('printDescription'),\r\n                compass: formData.get('printCompass'),\r\n                attributions: formData.get('printAttributions'),\r\n                scalebar: formData.get('printScalebar'),\r\n                typeExport: this._modal.el.querySelector(\r\n                    'select[name=\"printTypeExport\"]'\r\n                ).value\r\n            };\r\n\r\n            printMap(\r\n                values,\r\n                /* showLoading */ true,\r\n                /* delay */ options.modal.transition\r\n            );\r\n        });\r\n\r\n        this._modal.on('shown', (): void => {\r\n            const actualScaleVal = getMapScale(map);\r\n            const actualScale = this._modal.el.querySelector('.actualScale');\r\n            (actualScale as HTMLInputElement).value = String(\r\n                actualScaleVal / 1000\r\n            );\r\n            actualScale.innerHTML = `${\r\n                i18n.current\r\n            } (1:${actualScaleVal.toLocaleString('de')})`;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param i18n\r\n     * @param options\r\n     * @returns\r\n     * @protected\r\n     */\r\n    Content(i18n: I18n, options: Options): HTMLElement {\r\n        const { scales, dpi, mapElements, paperSizes } = options;\r\n\r\n        return (\r\n            <form id=\"printMap\">\r\n                <div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printFormat\">{i18n.paperSize}</label>\r\n                        <select name=\"printFormat\" id=\"printFormat\">\r\n                            {paperSizes.map((paper) => (\r\n                                <option\r\n                                    value={paper.value}\r\n                                    {...(paper.selected\r\n                                        ? { selected: 'selected' }\r\n                                        : {})}\r\n                                >\r\n                                    {paper.value}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printOrientation\">\r\n                            {i18n.orientation}\r\n                        </label>\r\n                        <select name=\"printOrientation\" id=\"printOrientation\">\r\n                            <option value=\"landscape\" selected>\r\n                                {i18n.landscape}\r\n                            </option>\r\n                            <option value=\"portrait\">{i18n.portrait}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printResolution\">\r\n                            {i18n.resolution}\r\n                        </label>\r\n                        <select name=\"printResolution\" id=\"printResolution\">\r\n                            {dpi.map((d) => (\r\n                                <option\r\n                                    value={d.value}\r\n                                    {...(d.selected\r\n                                        ? { selected: 'selected' }\r\n                                        : {})}\r\n                                >\r\n                                    {d.value} dpi\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"printFieldHalf\">\r\n                        <label htmlFor=\"printScale\">{i18n.scale}</label>\r\n                        <select name=\"printScale\" id=\"printScale\">\r\n                            <option\r\n                                className=\"actualScale\"\r\n                                value=\"\"\r\n                                selected\r\n                            ></option>\r\n                            {scales.map((scale) => (\r\n                                <option value={scale}>\r\n                                    1:{(scale * 1000).toLocaleString('de')}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                {mapElements && (\r\n                    <div>\r\n                        {mapElements.description && (\r\n                            <div>\r\n                                <label htmlFor=\"printDescription\">\r\n                                    {i18n.addNote}\r\n                                </label>\r\n                                <textarea\r\n                                    id=\"printDescription\"\r\n                                    name=\"printDescription\"\r\n                                    rows=\"4\"\r\n                                ></textarea>\r\n                            </div>\r\n                        )}\r\n                        <div>{i18n.mapElements}</div>\r\n                        <div className=\"printElements\">\r\n                            {mapElements.compass && (\r\n                                <label htmlFor=\"printCompass\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"printCompass\"\r\n                                        name=\"printCompass\"\r\n                                        checked\r\n                                    />\r\n                                    {i18n.compass}\r\n                                </label>\r\n                            )}\r\n                            {mapElements.scalebar && (\r\n                                <label htmlFor=\"printScalebar\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"printScalebar\"\r\n                                        name=\"printScalebar\"\r\n                                        checked\r\n                                    />\r\n                                    {i18n.scale}\r\n                                </label>\r\n                            )}\r\n                            {mapElements.attributions && (\r\n                                <label htmlFor=\"printAttributions\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"printAttributions\"\r\n                                        name=\"printAttributions\"\r\n                                        checked\r\n                                    />\r\n                                    {i18n.layersAttributions}\r\n                                </label>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </form>\r\n        );\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param i18n\r\n     * @returns\r\n     * @protected\r\n     */\r\n    Footer(i18n: I18n, options: Options): string {\r\n        const { mimeTypeExports } = options;\r\n\r\n        return (\r\n            <div>\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"btn-sm btn btn-secondary\"\r\n                    data-dismiss=\"modal\"\r\n                >\r\n                    {i18n.cancel}\r\n                </button>\r\n                <div class=\"typeExportContainer\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"btn-sm btn btn-primary\"\r\n                        data-print=\"true\"\r\n                        data-dismiss=\"modal\"\r\n                    >\r\n                        {i18n.print}\r\n                    </button>\r\n                    <select\r\n                        className=\"typeExport\"\r\n                        name=\"printTypeExport\"\r\n                        id=\"printTypeExport\"\r\n                    >\r\n                        {mimeTypeExports.map((type) => (\r\n                            <option\r\n                                value={type.value}\r\n                                {...(type.selected\r\n                                    ? { selected: 'selected' }\r\n                                    : {})}\r\n                            >\r\n                                {type.value}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        ).outerHTML;\r\n    }\r\n\r\n    hide(): void {\r\n        this._modal.hide();\r\n    }\r\n\r\n    show(): void {\r\n        if (!this._modal._visible) this._modal.show();\r\n    }\r\n}\r\n","import Modal from 'modal-vanilla';\r\nimport { I18n, Options } from '../ol-pdf-printer';\r\n\r\n/**\r\n * @private\r\n */\r\nexport default class ProcessingModal {\r\n    protected _modal: Modal;\r\n    protected _footer: string;\r\n    protected _i18n: I18n;\r\n\r\n    /**\r\n     *\r\n     * @param i18n\r\n     * @param options\r\n     * @param onEndPrint\r\n     * @protected\r\n     */\r\n    constructor(i18n: I18n, options: Options, onEndPrint: () => void) {\r\n        this._i18n = i18n;\r\n\r\n        this._modal = new Modal({\r\n            headerClose: false,\r\n            title: this._i18n.printing,\r\n            backdrop: 'static', // To prevent close on clicking backdrop\r\n            content: ' ',\r\n            footer: `\r\n            <button\r\n                type=\"button\"\r\n                class=\"btn-sm btn btn-secondary\"\r\n                data-dismiss=\"modal\"\r\n            >\r\n                ${this._i18n.cancel}\r\n            </button>\r\n            `,\r\n            ...options.modal\r\n        });\r\n\r\n        this._modal.on('dismiss', () => {\r\n            onEndPrint();\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param string\r\n     * @protected\r\n     */\r\n    _setContentModal(string: string): void {\r\n        this._modal._html.body.innerHTML = string;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param string\r\n     * @protected\r\n     */\r\n    _setFooterModal(string: string): void {\r\n        this._modal._html.footer.innerHTML = string;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param string\r\n     * @param footer\r\n     * @protected\r\n     */\r\n    show(string: string): void {\r\n        this._setContentModal(string);\r\n        if (!this._modal._visible) this._modal.show();\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    hide(): void {\r\n        this._modal.hide();\r\n    }\r\n}\r\n","import { I18n } from '../../ol-pdf-printer';\r\n\r\nexport const es: I18n = {\r\n    printPdf: 'Exportar PDF',\r\n    pleaseWait: 'Por favor espere...',\r\n    almostThere: 'Ya casi...',\r\n    error: 'Error al generar pdf',\r\n    errorImage: 'Ocurrió un error al tratar de cargar una imagen',\r\n    printing: 'Exportando',\r\n    cancel: 'Cancelar',\r\n    close: 'Cerrar',\r\n    print: 'Exportar',\r\n    mapElements: 'Elementos en el mapa',\r\n    compass: 'Brújula',\r\n    scale: 'Escala',\r\n    layersAttributions: 'Atribuciones de capas',\r\n    addNote: 'Agregar nota (opcional)',\r\n    resolution: 'Resolución',\r\n    orientation: 'Orientación',\r\n    paperSize: 'Tamaño de página',\r\n    landscape: 'Paisaje',\r\n    portrait: 'Retrato',\r\n    current: 'Actual',\r\n    paper: 'Hoja'\r\n};\r\n","import { I18n } from '../../ol-pdf-printer';\r\n\r\nexport const en: I18n = {\r\n    printPdf: 'Print PDF',\r\n    pleaseWait: 'Please wait...',\r\n    almostThere: 'Almost there...',\r\n    error: 'An error occurred while printing',\r\n    errorImage: 'An error ocurred while loading an image',\r\n    printing: 'Exporting',\r\n    cancel: 'Cancel',\r\n    close: 'Close',\r\n    print: 'Export',\r\n    mapElements: 'Map elements',\r\n    compass: 'Compass',\r\n    scale: 'Scale',\r\n    layersAttributions: 'Layer attributions',\r\n    addNote: 'Add note (optional)',\r\n    resolution: 'Resolution',\r\n    orientation: 'Orientation',\r\n    paperSize: 'Paper size',\r\n    landscape: 'Landscape',\r\n    portrait: 'Portrait',\r\n    current: 'Current',\r\n    paper: 'Paper'\r\n};\r\n","import Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport Control, { Options as ControlOptions } from 'ol/control/Control';\r\nimport TileWMS from 'ol/source/TileWMS';\r\nimport Tile from 'ol/layer/Tile';\r\nimport { getPointResolution } from 'ol/proj';\r\nimport { EventsKey } from 'ol/events';\r\nimport { unByKey } from 'ol/Observable';\r\n\r\nimport domtoimage from 'dom-to-image-improved';\r\n\r\nimport { Locale } from 'locale-enum';\r\n\r\nimport Pdf from './components/Pdf';\r\nimport SettingsModal from './components/SettingsModal';\r\nimport ProcessingModal from './components/ProcessingModal';\r\nimport * as i18n from './components/i18n/index.js';\r\n\r\nimport compassIcon from './assets/images/compass.svg';\r\nimport pdfIcon from './assets/images/pdf.svg';\r\n\r\nimport './assets/css/ol-pdf-printer.css';\r\n\r\n/**\r\n * @protected\r\n */\r\nconst DEFAULT_LANGUAGE = 'en';\r\n\r\n/**\r\n * @protected\r\n */\r\nconst CLASS_PRINT_MODE = 'printMode';\r\n\r\n/**\r\n * @protected\r\n */\r\nfunction deepObjectAssign(target, ...sources) {\r\n    sources.forEach((source) => {\r\n        Object.keys(source).forEach((key) => {\r\n            const s_val = source[key];\r\n            const t_val = target[key];\r\n            target[key] =\r\n                t_val &&\r\n                s_val &&\r\n                typeof t_val === 'object' &&\r\n                typeof s_val === 'object' &&\r\n                !Array.isArray(t_val) // Don't merge arrays\r\n                    ? deepObjectAssign(t_val, s_val)\r\n                    : s_val;\r\n        });\r\n    });\r\n    return target;\r\n}\r\n\r\nexport default class PdfPrinter extends Control {\r\n    protected _i18n: I18n;\r\n\r\n    protected _map: Map;\r\n    protected _view: View;\r\n    protected _mapTarget: HTMLElement;\r\n\r\n    protected _pdf: Pdf;\r\n\r\n    protected _processingModal: ProcessingModal;\r\n    protected _settingsModal: SettingsModal;\r\n\r\n    protected _initialized: boolean;\r\n\r\n    protected _timeoutProcessing: ReturnType<typeof setTimeout>;\r\n\r\n    protected _initialViewResolution: number;\r\n\r\n    protected _options: Options;\r\n\r\n    protected _renderCompleteKey: EventsKey | EventsKey[];\r\n\r\n    protected _isCanceled: boolean;\r\n\r\n    constructor(opt_options?: Options) {\r\n        const controlElement = document.createElement('button');\r\n\r\n        super({\r\n            target: opt_options.target,\r\n            element: controlElement\r\n        });\r\n\r\n        // Check if the selected language exists\r\n        this._i18n =\r\n            opt_options.language && opt_options.language in i18n\r\n                ? i18n[opt_options.language]\r\n                : i18n[DEFAULT_LANGUAGE];\r\n\r\n        if (opt_options.i18n) {\r\n            // Merge custom translations\r\n            this._i18n = {\r\n                ...this._i18n,\r\n                ...opt_options.i18n\r\n            };\r\n        }\r\n\r\n        // Default options\r\n        this._options = {\r\n            language: DEFAULT_LANGUAGE,\r\n            filename: 'Ol Pdf Printer',\r\n            style: {\r\n                paperMargin: 10,\r\n                brcolor: '#000000',\r\n                bkcolor: '#273f50',\r\n                txcolor: '#ffffff'\r\n            },\r\n            extraInfo: {\r\n                date: true,\r\n                url: true,\r\n                specs: true\r\n            },\r\n            mapElements: {\r\n                description: true,\r\n                attributions: true,\r\n                scalebar: true,\r\n                compass: compassIcon() as SVGElement\r\n            },\r\n            watermark: {\r\n                title: 'Ol Pdf Printer',\r\n                titleColor: '#d65959',\r\n                subtitle: 'https://github.com/GastonZalba/ol-pdf-printer',\r\n                subtitleColor: '#444444',\r\n                logo: false\r\n            },\r\n            paperSizes: [\r\n                // { size: [1189, 841], value: 'A0' },\r\n                // { size: [841, 594], value: 'A1' },\r\n                { size: [594, 420], value: 'A2' },\r\n                { size: [420, 297], value: 'A3' },\r\n                { size: [297, 210], value: 'A4', selected: true },\r\n                { size: [210, 148], value: 'A5' }\r\n            ],\r\n            dpi: [\r\n                { value: 72 },\r\n                { value: 96 },\r\n                { value: 150, selected: true },\r\n                { value: 200 },\r\n                { value: 300 }\r\n            ],\r\n            scales: [10000, 5000, 1000, 500, 250, 100, 50, 25, 10],\r\n            mimeTypeExports: [\r\n                { value: 'pdf', selected: true },\r\n                { value: 'png' },\r\n                { value: 'jpeg' },\r\n                { value: 'webp' }\r\n            ],\r\n            units: 'metric',\r\n            dateFormat: undefined,\r\n            ctrlBtnClass: '',\r\n            modal: {\r\n                animateClass: 'fade',\r\n                animateInClass: 'show',\r\n                transition: 150,\r\n                backdropTransition: 100,\r\n                templates: {\r\n                    dialog: '<div class=\"modal-dialog modal-dialog-centered\"></div>',\r\n                    headerClose: `<button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"${this._i18n.close}\"><span aria-hidden=\"true\">×</span></button>`\r\n                }\r\n            }\r\n        };\r\n\r\n        // Merge options\r\n        this._options = deepObjectAssign(this._options, opt_options);\r\n\r\n        controlElement.className = `ol-print-btn-menu ${this._options.ctrlBtnClass}`;\r\n        controlElement.title = this._i18n.printPdf;\r\n        controlElement.onclick = () => this.showPrintSettingsModal();\r\n        controlElement.append(pdfIcon());\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _init(): void {\r\n        this._map = this.getMap();\r\n        this._view = this._map.getView();\r\n        this._mapTarget = this._map.getTargetElement();\r\n        this._settingsModal = new SettingsModal(\r\n            this._map,\r\n            this._options,\r\n            this._i18n,\r\n            this._printMap.bind(this)\r\n        );\r\n\r\n        this._processingModal = new ProcessingModal(\r\n            this._i18n,\r\n            this._options,\r\n            this._onEndPrint.bind(this)\r\n        );\r\n\r\n        this._initialized = true;\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _setMapSizForPrint(\r\n        width: number,\r\n        height: number,\r\n        resolution: number\r\n    ): number[] {\r\n        const pixelsPerMapMillimeter = resolution / 25.4;\r\n        return [\r\n            Math.round(width * pixelsPerMapMillimeter),\r\n            Math.round(height * pixelsPerMapMillimeter)\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Restore inital view, remove classes, disable loading\r\n     * @protected\r\n     */\r\n    _onEndPrint(): void {\r\n        this._mapTarget.style.width = '';\r\n        this._mapTarget.style.height = '';\r\n        this._map.updateSize();\r\n        this._view.setResolution(this._initialViewResolution);\r\n        this._mapTarget.classList.remove(CLASS_PRINT_MODE);\r\n\r\n        this._view.setConstrainResolution(true);\r\n\r\n        clearTimeout(this._timeoutProcessing);\r\n\r\n        this._cancel();\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _prepareLoading(): void {\r\n        this._processingModal.show(this._i18n.pleaseWait);\r\n\r\n        this._timeoutProcessing = setTimeout(() => {\r\n            this._processingModal.show(this._i18n.almostThere);\r\n        }, 4000);\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _disableLoading(): void {\r\n        this._processingModal.hide();\r\n    }\r\n\r\n    /**\r\n     * This could be used to increment the DPI before printing\r\n     * @protected\r\n     */\r\n    _setFormatOptions(string = ''): void {\r\n        const layers = this._map.getLayers();\r\n        layers.forEach((layer) => {\r\n            if (layer instanceof Tile) {\r\n                const source = layer.getSource();\r\n                // Set WMS DPI\r\n                if (source instanceof TileWMS) {\r\n                    source.updateParams({\r\n                        FORMAT_OPTIONS: string\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param form\r\n     * @param showLoading\r\n     * @param delay Delay to prevent glitching with modals animation\r\n     * @protected\r\n     */\r\n    _printMap(form: IPrintOptions, showLoading = true, delay = 0): void {\r\n        if (showLoading) {\r\n            this._mapTarget.classList.add(CLASS_PRINT_MODE);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (showLoading) {\r\n                this._prepareLoading();\r\n            }\r\n\r\n            this._isCanceled = false;\r\n\r\n            // To allow intermediate zoom levels\r\n            this._view.setConstrainResolution(false);\r\n\r\n            let dim = this._options.paperSizes.find(\r\n                (e) => e.value === form.format\r\n            ).size;\r\n\r\n            dim =\r\n                form.orientation === 'landscape'\r\n                    ? dim\r\n                    : ([...dim].reverse() as [number, number]);\r\n\r\n            const widthPaper = dim[0];\r\n            const heightPaper = dim[1];\r\n\r\n            const mapSizeForPrint = this._setMapSizForPrint(\r\n                widthPaper,\r\n                heightPaper,\r\n                form.resolution\r\n            );\r\n            const [width, height] = mapSizeForPrint;\r\n\r\n            // Save current resolution to restore it later\r\n            this._initialViewResolution = this._view.getResolution();\r\n\r\n            const pixelsPerMapMillimeter = form.resolution / 25.4;\r\n\r\n            const scaleResolution =\r\n                form.scale /\r\n                getPointResolution(\r\n                    this._view.getProjection(),\r\n                    pixelsPerMapMillimeter,\r\n                    this._view.getCenter()\r\n                );\r\n\r\n            this._renderCompleteKey = this._map.once('rendercomplete', () => {\r\n                domtoimage\r\n                    .toJpeg(\r\n                        this._mapTarget.querySelector(\r\n                            '.ol-unselectable.ol-layers'\r\n                        ),\r\n                        {\r\n                            width,\r\n                            height\r\n                        }\r\n                    )\r\n                    .then(async (dataUrl) => {\r\n                        if (this._isCanceled) return;\r\n\r\n                        this._pdf = new Pdf({\r\n                            view: this._view,\r\n                            i18n: this._i18n,\r\n                            config: this._options,\r\n                            form: form,\r\n                            height: heightPaper,\r\n                            width: widthPaper,\r\n                            scaleResolution\r\n                        });\r\n\r\n                        this._pdf.addMapImage(dataUrl);\r\n                        await this._pdf.addMapHelpers();\r\n\r\n                        if (this._isCanceled) return;\r\n\r\n                        await this._pdf.savePdf();\r\n\r\n                        // Reset original map size\r\n                        this._onEndPrint();\r\n\r\n                        if (showLoading) this._disableLoading();\r\n                    })\r\n                    .catch((err: Error) => {\r\n                        const message =\r\n                            typeof err === 'string' ? err : this._i18n.error;\r\n                        console.error(err);\r\n                        this._onEndPrint();\r\n                        this._processingModal.show(message);\r\n                    });\r\n            });\r\n\r\n            // Set print size\r\n            this._mapTarget.style.width = width + 'px';\r\n            this._mapTarget.style.height = height + 'px';\r\n            this._map.updateSize();\r\n            this._map.getView().setResolution(scaleResolution);\r\n        }, delay);\r\n    }\r\n\r\n    /**\r\n     * @protected\r\n     */\r\n    _cancel(): void {\r\n        if (this._renderCompleteKey) {\r\n            unByKey(this._renderCompleteKey);\r\n        }\r\n\r\n        this._isCanceled = true;\r\n    }\r\n\r\n    /**\r\n     * Show the Settings Modal\r\n     * @public\r\n     */\r\n    showPrintSettingsModal(): void {\r\n        if (!this._initialized) this._init();\r\n        this._settingsModal.show();\r\n    }\r\n\r\n    /**\r\n     * Hide the Settings Modal\r\n     * @public\r\n     */\r\n    hidePrintSettingsModal(): void {\r\n        this._settingsModal.hide();\r\n    }\r\n\r\n    /**\r\n     * Create PDF programatically without displaying the Settings Modal\r\n     * @param options\r\n     * @public\r\n     */\r\n    createPdf(options: IPrintOptions, showLoading: boolean): void {\r\n        options = {};\r\n        this._printMap(\r\n            {\r\n                format: (\r\n                    this._options.paperSizes.find((p) => p.selected) ||\r\n                    this._options.paperSizes[0]\r\n                ).value,\r\n                resolution: (\r\n                    this._options.dpi.find((p) => p.selected) ||\r\n                    this._options.dpi[0]\r\n                ).value,\r\n                orientation: 'landscape',\r\n                compass: true,\r\n                attributions: true,\r\n                scalebar: true,\r\n                scale: 1000,\r\n                typeExport: 'pdf',\r\n                ...options\r\n            },\r\n            showLoading\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\nexport interface IPrintOptions {\r\n    /**\r\n     *\r\n     */\r\n    format?: IPaperSize['value'];\r\n    /**\r\n     *\r\n     */\r\n    orientation?: 'landscape' | 'portrait';\r\n    /**\r\n     *\r\n     */\r\n    resolution?: IDpi['value'];\r\n    /**\r\n     *\r\n     */\r\n    scale?: IScale;\r\n    /**\r\n     *\r\n     */\r\n    description?: string;\r\n    /**\r\n     *\r\n     */\r\n    compass?: boolean;\r\n    /**\r\n     *\r\n     */\r\n    attributions?: boolean;\r\n    /**\r\n     *\r\n     */\r\n    scalebar?: boolean;\r\n    /**\r\n     *\r\n     */\r\n    typeExport?: IMimeTypeExport['value'];\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Custom translations specified when creating an instance\r\n */\r\nexport interface IValues {\r\n    format: FormDataEntryValue;\r\n    orientation: FormDataEntryValue;\r\n    resolution: FormDataEntryValue;\r\n    scale: FormDataEntryValue;\r\n    description: FormDataEntryValue;\r\n    compass: FormDataEntryValue;\r\n    attributions: FormDataEntryValue;\r\n    scalebar: FormDataEntryValue;\r\n    typeExport: FormDataEntryValue;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Custom translations specified when creating an instance\r\n */\r\nexport interface I18n {\r\n    printPdf: string;\r\n    pleaseWait: string;\r\n    almostThere: string;\r\n    error: string;\r\n    errorImage: string;\r\n    printing: string;\r\n    cancel: string;\r\n    close: string;\r\n    print: string;\r\n    mapElements: string;\r\n    compass: string;\r\n    scale: string;\r\n    layersAttributions: string;\r\n    addNote: string;\r\n    resolution: string;\r\n    orientation: string;\r\n    paperSize: string;\r\n    landscape: string;\r\n    portrait: string;\r\n    current: string;\r\n    paper: string;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IPaperSize {\r\n    /**\r\n     *\r\n     */\r\n    size: [number, number];\r\n    /**\r\n     *\r\n     */\r\n    value: string;\r\n    /**\r\n     *\r\n     */\r\n    selected?: boolean;\r\n}\r\n\r\n/**\r\n * **_[type]_**\r\n */\r\ntype IScale = number;\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IDpi {\r\n    /**\r\n     *\r\n     */\r\n    value: number;\r\n    /**\r\n     *\r\n     */\r\n    selected?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IStyle {\r\n    /**\r\n     *\r\n     */\r\n    paperMargin?: number;\r\n    /**\r\n     *\r\n     */\r\n    brcolor?: string;\r\n    /**\r\n     *\r\n     */\r\n    bkcolor?: string;\r\n    /**\r\n     *\r\n     */\r\n    txcolor?: string;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IMimeTypeExport {\r\n    value: 'pdf' | 'png' | 'jpeg' | 'webp';\r\n    selected?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\ninterface IModal {\r\n    /**\r\n     *\r\n     */\r\n    animateClass?: string;\r\n    /**\r\n     *\r\n     */\r\n    animateInClass?: string;\r\n    /**\r\n     *\r\n     */\r\n    transition?: number;\r\n    /**\r\n     *\r\n     */\r\n    backdropTransition?: number;\r\n    /**\r\n     *\r\n     */\r\n    templates?: {\r\n        dialog?: string | HTMLElement;\r\n        headerClose?: string | HTMLElement;\r\n    };\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n */\r\nexport interface IWatermark {\r\n    /**\r\n     *\r\n     */\r\n    title?: string;\r\n    /**\r\n     *\r\n     */\r\n    titleColor?: string;\r\n    /**\r\n     *\r\n     */\r\n    subtitle?: string;\r\n    /**\r\n     *\r\n     */\r\n    subtitleColor?: string;\r\n    /**\r\n     *\r\n     */\r\n    logo?: false | string | HTMLImageElement | SVGElement;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Print information at the bottom of the PDF\r\n */\r\ninterface IExtraInfo {\r\n    /**\r\n     * Print Date\r\n     */\r\n    date?: boolean;\r\n    /**\r\n     * Current site url\r\n     */\r\n    url?: boolean;\r\n    /**\r\n     * DPI, Format and Scale information\r\n     */\r\n    specs?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - MapElements\r\n * @public\r\n */\r\nexport interface IMapElements {\r\n    /**\r\n     * Print description\r\n     */\r\n    description?: boolean;\r\n    /**\r\n     * Layers attributions\r\n     */\r\n    attributions?: boolean;\r\n    /**\r\n     * Scalebar\r\n     */\r\n    scalebar?: boolean;\r\n    /**\r\n     * Compass image. North must be pointing to the top\r\n     */\r\n    compass?: false | string | HTMLImageElement | SVGElement;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Options specified when creating an instance\r\n */\r\nexport interface Options extends ControlOptions {\r\n    /**\r\n     * Export filename\r\n     */\r\n    filename?: string;\r\n\r\n    /**\r\n     * Map unit mode\r\n     */\r\n    units?: 'metric' | 'imperial';\r\n\r\n    /**\r\n     * Some basic PDF style configuration\r\n     */\r\n    style?: IStyle;\r\n\r\n    /**\r\n     * Information to be inserted at the bottom of the PDF\r\n     * False to disable\r\n     */\r\n    extraInfo?: false | IExtraInfo;\r\n\r\n    /**\r\n     * Elements to be showed on the PDF and in the Settings Modal.\r\n     * False to disable\r\n     */\r\n    mapElements?: false | IMapElements;\r\n\r\n    /**\r\n     * Watermark to be inserted in the PDF.\r\n     * False to disable\r\n     */\r\n    watermark?: false | IWatermark;\r\n\r\n    /**\r\n     * Paper sizes options to be shown in the settings modal\r\n     */\r\n    paperSizes?: IPaperSize[];\r\n\r\n    /**\r\n     * DPI resolutions options to be shown in the settings modal\r\n     */\r\n    dpi?: IDpi[];\r\n\r\n    /**\r\n     * Map scales options to be shown in the settings modal\r\n     */\r\n    scales?: IScale[];\r\n\r\n    /**\r\n     * Export format\r\n     */\r\n    mimeTypeExports?: IMimeTypeExport[];\r\n\r\n    /**\r\n     * Locale time zone. Default varies according to browser locale\r\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString#using_locales\r\n     */\r\n    dateFormat?: Locale;\r\n\r\n    /**\r\n     * ClassName to add to the Btn Control\r\n     */\r\n    ctrlBtnClass?: string;\r\n\r\n    /**\r\n     * Modal configuration\r\n     */\r\n    modal?: IModal;\r\n\r\n    /**\r\n     * Language support\r\n     */\r\n    language?: 'es' | 'en';\r\n\r\n    /**\r\n     * Add custom translations\r\n     */\r\n    i18n?: I18n;\r\n}\r\n"],"names":["createElement","tagName","attrs","arguments","length","undefined","_len","children","Array","_key","elem","document","Object","entries","forEach","_ref","name","value","startsWith","toLowerCase","window","addEventListener","substr","setAttribute","toString","child","isArray","append","nodeType","innerHTML","appendChild","myPragma"],"mappings":"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"}