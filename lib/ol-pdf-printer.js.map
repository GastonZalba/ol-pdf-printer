{"version":3,"file":"ol-pdf-printer.js","sources":["../src/myPragma.js","../src/components/Pdf.tsx","../src/components/Helpers.ts","../src/components/SettingsModal.tsx","../src/components/ProcessingModal.ts","../src/components/i18n/es.ts","../src/components/i18n/en.ts","../src/ol-pdf-printer.ts"],"sourcesContent":["export default function createElement(tagName, attrs = {}, ...children) {\n    if (tagName === 'null') return children;\n    if (typeof tagName === 'function') return tagName(attrs, children);\n\n    const elem = document.createElement(tagName);\n\n    Object.entries(attrs || {}).forEach(([name, value]) => {\n        if (name.startsWith('on') && name.toLowerCase() in window)\n            elem.addEventListener(name.toLowerCase().substr(2), value);\n        else {\n            if (name === 'className')\n                elem.setAttribute('class', value.toString());\n            else if (name === 'htmlFor')\n                elem.setAttribute('for', value.toString());\n            else elem.setAttribute(name, value.toString());\n        }\n    });\n\n    for (const child of children) {\n        if (!child) continue;\n        if (Array.isArray(child)) elem.append(...child);\n        else {\n            elem.appendChild(\n                child.nodeType === undefined\n                    ? document.createTextNode(child.toString())\n                    : child\n            );\n        }\n    }\n    return elem;\n}\n","import View from 'ol/View';\nimport { getPointResolution } from 'ol/proj';\nimport { I18n, Options, IPrintOptions, IWatermark } from 'src/ol-pdf-printer';\nimport { jsPDF, TextOptionsLight } from 'jspdf';\nimport { getDocument, GlobalWorkerOptions, version } from 'pdfjs-dist';\nimport myPragma from '../myPragma';\n\n/**\n * @private\n */\nexport default class Pdf {\n    protected _pdf: IPdf;\n    protected _view: View;\n    protected _scaleDenominator: number;\n    protected _form: IPrintOptions;\n    protected _style: Options['style'];\n    protected _i18n: I18n;\n\n    protected _config: Options;\n\n    constructor(params: IPdfOptions) {\n        const { view, form, i18n, config, height, width, scaleResolution } =\n            params;\n\n        this._view = view;\n        this._form = form;\n        this._i18n = i18n;\n        this._config = config;\n\n        this._pdf = this.create(\n            this._form.orientation,\n            this._form.format,\n            height,\n            width\n        );\n\n        this._scaleDenominator = this._calculateScaleDenominator(\n            this._form.resolution,\n            scaleResolution\n        );\n    }\n\n    /**\n     *\n     * @param orientation\n     * @param format\n     * @param width\n     * @param height\n     * @returns\n     * @protected\n     */\n    create(\n        orientation: IPrintOptions['orientation'],\n        format: IPrintOptions['format'],\n        height: number,\n        width: number\n    ): IPdf {\n        // UMD support\n        const _jsPDF =\n            (window as IWindow & typeof globalThis).jspdf?.jsPDF || jsPDF;\n\n        return {\n            doc: new _jsPDF({ orientation, format }),\n            height: height,\n            width: width\n        };\n    }\n\n    /**\n     *\n     * @param dataUrl\n     * @protected\n     */\n    addMapImage(dataUrl: string): void {\n        this._pdf.doc.addImage(\n            dataUrl,\n            'JPEG',\n            this._config.style.paperMargin, // Add margins\n            this._config.style.paperMargin,\n            this._pdf.width - this._config.style.paperMargin * 2,\n            this._pdf.height - this._config.style.paperMargin * 2\n        );\n    }\n\n    /**\n     *\n     * @protected\n     */\n    addMapHelpers = async (): Promise<void> => {\n        const { mapElements, extraInfo, style, watermark } = this._config;\n\n        this._style = style;\n\n        if (watermark) {\n            await this._addWatermark(watermark);\n        }\n\n        if (mapElements) {\n            if (mapElements.compass && this._form.compass) {\n                await this._addCompass(mapElements.compass);\n            }\n\n            if (mapElements.description && this._form.description) {\n                this._addDescription();\n            }\n\n            if (mapElements.scalebar && this._form.scalebar) {\n                this._addScaleBar();\n            }\n\n            if (mapElements.attributions && this._form.attributions) {\n                this._addAttributions();\n            }\n        }\n\n        if (extraInfo) {\n            // Bottom info\n            if (extraInfo.url) {\n                this._addUrl();\n            }\n\n            if (extraInfo.date) {\n                this._addDate();\n            }\n\n            if (extraInfo.specs) {\n                this._addSpecs();\n            }\n        }\n    };\n\n    /**\n     * @protected\n     */\n    savePdf(): Promise<void> {\n        const downloadURI = (uri: string, name: string): void => {\n            const link = <a download={name} href={uri}></a>;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        };\n\n        return new Promise((resolve, reject) => {\n            if (this._form.typeExport === 'pdf') {\n                this._pdf.doc.save(this._config.filename + '.pdf');\n                resolve();\n            } else {\n                const pdf = this._pdf.doc.output('dataurlstring');\n\n                // UMD support\n                const versionPdfJS =\n                    (window as IWindow & typeof globalThis)?.pdfjsLib\n                        ?.version || version;\n\n                GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${versionPdfJS}/pdf.worker.js`;\n\n                getDocument(pdf).promise.then(\n                    (pdf) => {\n                        pdf.getPage(1).then((page) => {\n                            const scale = 2;\n\n                            const viewport = page.getViewport({ scale });\n\n                            // Prepare canvas\n                            const canvas = <canvas />;\n                            canvas.style.display = 'none';\n                            document.body.appendChild(canvas);\n                            const context = canvas.getContext('2d');\n                            canvas.height = viewport.height;\n                            canvas.width = viewport.width;\n\n                            // Render PDF page into canvas context\n                            const task = page.render({\n                                canvasContext: context,\n                                viewport: viewport\n                            });\n                            task.promise.then(() => {\n                                downloadURI(\n                                    canvas.toDataURL(\n                                        `image/${this._form.typeExport}`\n                                    ),\n                                    this._config.filename +\n                                        `.${this._form.typeExport}`\n                                );\n                                canvas.remove();\n                                resolve();\n                            });\n                        });\n                    },\n                    (error: Error) => {\n                        reject(error);\n                        console.log(error);\n                    }\n                );\n            }\n        });\n    }\n\n    /**\n     * Convert an SVGElement to an PNG string\n     * @param svg\n     * @returns\n     */\n    _processSvgImage = (svg: SVGElement): Promise<string> => {\n        // https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser#answer-58142441\n        return new Promise((resolve, reject) => {\n            const svgToPng = (svg: SVGElement, callback) => {\n                const url = getSvgUrl(svg);\n                svgUrlToPng(url, (imgData: string) => {\n                    callback(imgData);\n                    URL.revokeObjectURL(url);\n                });\n            };\n\n            const getSvgUrl = (svg: SVGElement) => {\n                return URL.createObjectURL(\n                    new Blob([svg.outerHTML], { type: 'image/svg+xml' })\n                );\n            };\n\n            const svgUrlToPng = (svgUrl: string, callback) => {\n                const svgImage = document.createElement('img');\n                document.body.appendChild(svgImage);\n\n                svgImage.onerror = (err) => {\n                    console.error(err);\n                    return reject(this._i18n.errorImage);\n                };\n\n                svgImage.onload = () => {\n                    try {\n                        const canvas = document.createElement('canvas');\n                        canvas.width = svgImage.clientWidth;\n                        canvas.height = svgImage.clientHeight;\n                        const canvasCtx = canvas.getContext('2d');\n                        canvasCtx.drawImage(svgImage, 0, 0);\n                        const imgData = canvas.toDataURL('image/png');\n                        callback(imgData);\n                        document.body.removeChild(svgImage);\n                    } catch (err) {\n                        return reject(err);\n                    }\n                };\n                svgImage.src = svgUrl;\n            };\n\n            svgToPng(svg, (imgData: string) => {\n                resolve(imgData);\n            });\n        });\n    };\n\n    /**\n     * Adapted from http://hg.intevation.de/gemma/file/tip/client/src/components/Pdftool.vue#l252\n     * @protected\n     */\n    _calculateScaleDenominator(\n        resolution: number,\n        scaleResolution: number\n    ): number {\n        const pixelsPerMapMillimeter = resolution / 25.4;\n        return Math.round(\n            1000 *\n                pixelsPerMapMillimeter *\n                this._getMeterPerPixel(scaleResolution)\n        );\n    }\n\n    /**\n     * @protected\n     */\n    _getMeterPerPixel(scaleResolution: number): number {\n        const proj = this._view.getProjection();\n        return (\n            getPointResolution(proj, scaleResolution, this._view.getCenter()) *\n            proj.getMetersPerUnit()\n        );\n    }\n\n    /**\n     *\n     * @param position\n     * @param offset\n     * @param size\n     * @returns\n     * @protected\n     */\n    _calculateOffsetByPosition = (\n        position: string,\n        offset: { x: number; y: number },\n        size = 0\n    ): { x: number; y: number } => {\n        let x: number, y: number;\n\n        switch (position) {\n            case 'topleft':\n                x = offset.x + this._style.paperMargin;\n                y = offset.y + this._style.paperMargin + size;\n                break;\n\n            case 'topright':\n                x = this._pdf.width - offset.x - this._style.paperMargin;\n                y = offset.y + this._style.paperMargin + size;\n                break;\n\n            case 'bottomright':\n                x = this._pdf.width - offset.x - this._style.paperMargin;\n                y =\n                    this._pdf.height -\n                    offset.y -\n                    this._style.paperMargin -\n                    size;\n                break;\n\n            case 'bottomleft':\n                y =\n                    this._pdf.height -\n                    offset.y -\n                    this._style.paperMargin -\n                    size;\n                x = offset.x + this._style.paperMargin;\n                break;\n        }\n\n        return { x, y };\n    };\n\n    /**\n     *\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     * @param bkcolor\n     * @param brcolor\n     * @protected\n     */\n    _addRoundedBox = (\n        x: number,\n        y: number,\n        width: number,\n        height: number,\n        bkcolor: string,\n        brcolor: string\n    ): void => {\n        const rounding = 1;\n\n        this._pdf.doc.setDrawColor(brcolor);\n        this._pdf.doc.setFillColor(bkcolor);\n\n        this._pdf.doc.roundedRect(\n            x,\n            y,\n            width,\n            height,\n            rounding,\n            rounding,\n            'FD'\n        );\n    };\n\n    /**\n     *\n     * @param x\n     * @param y\n     * @param width\n     * @param fontSize\n     * @param color\n     * @param align\n     * @param str\n     * @protected\n     */\n    _addText = (\n        x: number,\n        y: number,\n        width: number,\n        fontSize: number,\n        color: string,\n        align: TextOptionsLight['align'] = 'left',\n        str: string\n    ): void => {\n        this._pdf.doc.setTextColor(color);\n        this._pdf.doc.setFontSize(fontSize);\n\n        this._pdf.doc.text(str, x, y, {\n            align: align\n        });\n    };\n\n    /**\n     *\n     * @param position\n     * @param offset\n     * @param width\n     * @param fontSize\n     * @param color\n     * @param align\n     * @param str\n     * @protected\n     */\n    _addTextByOffset = (\n        position: string,\n        offset: { x: number; y: number },\n        width: number,\n        fontSize: number,\n        color: string,\n        align: TextOptionsLight['align'],\n        str: string\n    ): void => {\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\n        const fixX = align === 'center' ? x - width / 2 : x;\n        this._addText(fixX, y, width, fontSize, color, align, str);\n    };\n\n    /**\n     * @protected\n     */\n    _addDescription = (): void => {\n        const str = this._form.description.trim();\n        const position = 'topleft';\n        const offset = { x: 2, y: 2 };\n        const fontSize = 8;\n        const maxWidth = 50;\n\n        const paddingBack = 4;\n\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\n\n        this._pdf.doc.setTextColor(this._style.txcolor);\n        this._pdf.doc.setFontSize(fontSize);\n\n        const { w, h } = this._pdf.doc.getTextDimensions(str, {\n            maxWidth: maxWidth\n        });\n\n        this._addRoundedBox(\n            x,\n            y,\n            w + paddingBack * 2,\n            h + paddingBack,\n            this._style.bkcolor,\n            this._style.brcolor\n        );\n\n        this._pdf.doc.text(str, x + paddingBack, y + paddingBack, {\n            align: 'left',\n            maxWidth: maxWidth\n        });\n    };\n\n    /**\n     * This functions is a mess\n     * @returns\n     * @protected\n     */\n    _addWatermark = async (watermark: IWatermark): Promise<void> => {\n        const position = 'topright';\n        const offset = { x: 0, y: 0 };\n        const fontSize = 14;\n        const imageSize = 12;\n        const fontSizeSubtitle = fontSize / 1.8;\n        let back = false;\n\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\n\n        const paddingBack = 2;\n\n        let acumulativeWidth = watermark.logo ? imageSize + 0.5 : 0;\n\n        if (watermark.title) {\n            this._pdf.doc.setTextColor(watermark.titleColor);\n            this._pdf.doc.setFontSize(fontSize);\n            this._pdf.doc.setFont('helvetica', 'bold');\n\n            // This function works bad\n            let { w } = this._pdf.doc.getTextDimensions(watermark.title);\n\n            if (watermark.subtitle) {\n                this._pdf.doc.setFontSize(fontSizeSubtitle);\n                const wSub = this._pdf.doc.getTextDimensions(\n                    watermark.subtitle\n                ).w;\n                w = wSub - 4 > w ? wSub : w + 4; // weird fix needed\n                this._pdf.doc.setFontSize(fontSize);\n            } else {\n                w += 4;\n            }\n\n            // Adaptable width, fixed height\n            const height = 16;\n            const widthBack = w + paddingBack;\n\n            this._addRoundedBox(\n                x - widthBack + 4 - acumulativeWidth,\n                y - 4,\n                widthBack + acumulativeWidth,\n                height,\n                '#ffffff',\n                '#ffffff'\n            );\n            back = true;\n\n            this._pdf.doc.text(\n                watermark.title,\n                x,\n                y + paddingBack + 3 + (!watermark.subtitle ? 2 : 0),\n                {\n                    align: 'right'\n                }\n            );\n\n            acumulativeWidth += w;\n        }\n\n        if (watermark.subtitle) {\n            this._pdf.doc.setTextColor(watermark.subtitleColor);\n            this._pdf.doc.setFontSize(fontSizeSubtitle);\n            this._pdf.doc.setFont('helvetica', 'normal');\n\n            if (!back) {\n                const { w } = this._pdf.doc.getTextDimensions(\n                    watermark.subtitle\n                );\n                const widthBack = paddingBack * 2 + w;\n                this._addRoundedBox(\n                    x - widthBack + 3 - acumulativeWidth,\n                    y - 4,\n                    widthBack + acumulativeWidth,\n                    16,\n                    '#ffffff',\n                    '#ffffff'\n                );\n                acumulativeWidth += widthBack;\n                back = true;\n            }\n\n            const marginTop = watermark.title ? fontSize / 2 : 4;\n\n            this._pdf.doc.text(\n                watermark.subtitle,\n                x,\n                y + paddingBack + marginTop,\n                {\n                    align: 'right'\n                }\n            );\n        }\n\n        if (!watermark.logo) return;\n\n        const addImage = (image: HTMLImageElement): void => {\n            this._pdf.doc.addImage(\n                image,\n                'PNG',\n                x - acumulativeWidth + paddingBack * 2 - 1,\n                y - 1,\n                imageSize,\n                imageSize\n            );\n        };\n\n        if (!back) {\n            const widthBack = acumulativeWidth + paddingBack;\n            this._addRoundedBox(\n                x - widthBack + 4,\n                y - 4,\n                widthBack,\n                16,\n                '#ffffff',\n                '#ffffff'\n            );\n        }\n\n        if (watermark.logo instanceof Image) {\n            addImage(watermark.logo);\n            return;\n        } else {\n            let imgData: string;\n\n            if (typeof watermark.logo === 'string') {\n                imgData = watermark.logo;\n            } else if (watermark.logo instanceof SVGElement) {\n                imgData = await this._processSvgImage(watermark.logo);\n            } else {\n                throw this._i18n.errorImage;\n            }\n\n            return new Promise((resolve, reject) => {\n                const image = new Image(imageSize, imageSize);\n                image.onload = () => {\n                    try {\n                        addImage(image);\n                        resolve();\n                    } catch (err) {\n                        return reject(err);\n                    }\n                };\n                image.onerror = () => {\n                    return reject(this._i18n.errorImage);\n                };\n                image.src = imgData;\n            });\n        }\n    };\n\n    /**\n     * @protected\n     */\n    _addDate = (): void => {\n        const position = 'bottomright';\n        const width = 250;\n        const offset = {\n            x: 0,\n            y: -5\n        };\n        const fontSize = 7;\n        const txcolor = '#000000';\n        const align = 'right';\n\n        this._pdf.doc.setFont('helvetica', 'normal');\n        const str = new Date(Date.now()).toLocaleDateString(\n            this._config.dateFormat\n        );\n        this._addTextByOffset(\n            position,\n            offset,\n            width,\n            fontSize,\n            txcolor,\n            align,\n            str\n        );\n    };\n\n    /**\n     * @protected\n     */\n    _addUrl = (): void => {\n        const position = 'bottomleft';\n        const width = 250;\n        const offset = {\n            x: 0,\n            y: -6.5\n        };\n        const fontSize = 6;\n        const txcolor = '#000000';\n        const align = 'left';\n\n        this._pdf.doc.setFont('helvetica', 'italic');\n        const str = window.location.href;\n        this._addTextByOffset(\n            position,\n            offset,\n            width,\n            fontSize,\n            txcolor,\n            align,\n            str\n        );\n    };\n    /**\n     * @protected\n     */\n    _addSpecs = (): void => {\n        const position = 'bottomleft';\n        const offset = {\n            x: 0,\n            y: -3.5\n        };\n        const fontSize = 6;\n        const txcolor = '#000000';\n        const align = 'left';\n\n        this._pdf.doc.setFont('helvetica', 'bold');\n        this._pdf.doc.setFontSize(fontSize);\n\n        const scale = `${\n            this._i18n.scale\n        } 1:${this._scaleDenominator.toLocaleString('de')}`;\n        const paper = `${this._i18n.paper} ${this._form.format.toUpperCase()}`;\n        const dpi = `${this._form.resolution} DPI`;\n\n        const specs = [scale, dpi, paper];\n        const str = specs.join(' - ');\n\n        const { w } = this._pdf.doc.getTextDimensions(str);\n\n        this._addTextByOffset(\n            position,\n            offset,\n            w,\n            fontSize,\n            txcolor,\n            align,\n            str\n        );\n    };\n\n    /**\n     * The attributions are obtained from the Control in the DOM.\n     * @protected\n     */\n    _addAttributions = (): void => {\n        const attributionsUl = document.querySelector('.ol-attribution ul');\n\n        if (!attributionsUl) return;\n\n        const ATTRI_SEPATATOR = ' · ';\n\n        const position = 'bottomright';\n        const offset = { x: 1, y: 1 };\n        const fontSize = 7;\n\n        this._pdf.doc.setFont('helvetica', 'normal');\n        this._pdf.doc.setFontSize(fontSize);\n        const { x, y } = this._calculateOffsetByPosition(position, offset);\n\n        let xPos = x;\n\n        const { w, h } = this._pdf.doc.getTextDimensions(\n            attributionsUl.textContent\n        );\n\n        const paddingBack = 4;\n\n        const whiteSpaceWidth =\n            this._pdf.doc.getTextDimensions(ATTRI_SEPATATOR).w;\n\n        const attributions = document.querySelectorAll('.ol-attribution li');\n\n        const sumWhiteSpaceWidth = whiteSpaceWidth * (attributions.length - 1);\n\n        this._addRoundedBox(\n            x - w - sumWhiteSpaceWidth - 2,\n            y - h,\n            w + paddingBack + sumWhiteSpaceWidth + 2,\n            h + paddingBack,\n            '#ffffff',\n            '#ffffff'\n        );\n\n        Array.from(attributions)\n            .reverse()\n            .forEach((attribution, index) => {\n                Array.from(attribution.childNodes)\n                    .reverse()\n                    .forEach((node) => {\n                        const content = node.textContent;\n\n                        if ('href' in node) {\n                            this._pdf.doc.setTextColor('#0077cc');\n                            this._pdf.doc.textWithLink(content, xPos, y, {\n                                align: 'right',\n                                url: (node as HTMLAnchorElement).href\n                            });\n                        } else {\n                            this._pdf.doc.setTextColor('#666666');\n                            this._pdf.doc.text(content, xPos, y, {\n                                align: 'right'\n                            });\n                        }\n\n                        const { w } = this._pdf.doc.getTextDimensions(content);\n                        xPos -= w;\n                    });\n\n                // Excldue last element\n                if (index !== attributions.length - 1) {\n                    // To add separation between diferents attributtions\n                    this._pdf.doc.text(ATTRI_SEPATATOR, xPos, y, {\n                        align: 'right'\n                    });\n\n                    xPos -= whiteSpaceWidth;\n                }\n            });\n    };\n\n    /**\n     * Adapted from http://hg.intevation.de/gemma/file/tip/client/src/components/Pdftool.vue#l252\n     * @protected\n     */\n    _addScaleBar = (): void => {\n        const offset = { x: 2, y: 2 };\n\n        const maxWidth = 90; // in mm\n\n        // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10#Polyfill\n        const log10 =\n            Math.log10 || // more precise, but unsupported by IE\n            function (x) {\n                return Math.log(x) * Math.LOG10E;\n            };\n\n        let maxLength = maxWidth * this._scaleDenominator;\n\n        let unit: string;\n        let unitConversionFactor: number;\n\n        if (this._config.units === 'metric') {\n            unit = 'mm';\n\n            const millimetre = 1;\n            const metre = 1000;\n            const kilometre = metre * 1000;\n\n            unitConversionFactor = millimetre;\n\n            if (maxLength >= kilometre * 10) {\n                unit = 'km';\n                unitConversionFactor = 1e6;\n            } else if (maxLength >= metre * 10) {\n                unit = 'm';\n                unitConversionFactor = metre;\n            }\n        } else if (this._config.units === 'imperial') {\n            const inch = 25.4; // Millimetre to inch\n            const mile = inch * 63360;\n            const yard = inch * 36;\n\n            unit = 'in';\n            unitConversionFactor = inch;\n\n            if (maxLength >= mile * 10) {\n                unit = 'mi';\n                unitConversionFactor = mile;\n            } else if (maxLength >= yard * 10) {\n                unit = 'yd';\n                unitConversionFactor = yard;\n            }\n        }\n\n        maxLength /= unitConversionFactor;\n\n        const unroundedLength = maxLength;\n        const numberOfDigits = Math.floor(log10(unroundedLength));\n        const factor = Math.pow(10, numberOfDigits);\n        const mapped = unroundedLength / factor;\n\n        let length = Math.floor(maxLength); // just to have an upper limit\n\n        // manually only use numbers that are very nice to devide by 4\n        // note that this is taken into account for rounding later\n        if (mapped > 8) {\n            length = 8 * factor;\n        } else if (mapped > 4) {\n            length = 4 * factor;\n        } else if (mapped > 2) {\n            length = 2 * factor;\n        } else {\n            length = factor;\n        }\n\n        let size = (length * unitConversionFactor) / this._scaleDenominator / 4;\n\n        const percentageMargin = this._style.paperMargin\n            ? ((this._style.paperMargin * 2) / this._pdf.width) * 100\n            : null;\n\n        // Reduce length acording to margins\n        size = percentageMargin\n            ? (size / 100) * (100 - percentageMargin)\n            : size;\n\n        const fullSize = size * 4;\n\n        // x/y defaults to offset for topleft corner (normal x/y coordinates)\n        const x = offset.x + this._style.paperMargin;\n        let y = offset.y + this._style.paperMargin;\n\n        y = this._pdf.height - offset.y - 10 - this._style.paperMargin;\n\n        // to give the outer white box 4mm padding\n        const scaleBarX = x + 4;\n        const scaleBarY = y + 5; // 5 because above the scalebar will be the numbers\n\n        // draw outer box\n        this._addRoundedBox(\n            x,\n            y,\n            fullSize + 8,\n            10,\n            this._style.bkcolor,\n            this._style.brcolor\n        );\n\n        // draw first part of scalebar\n        this._pdf.doc.setDrawColor(this._style.brcolor);\n        this._pdf.doc.setFillColor(0, 0, 0);\n        this._pdf.doc.rect(scaleBarX, scaleBarY, size, 1, 'FD');\n\n        // draw second part of scalebar\n        this._pdf.doc.setDrawColor(this._style.brcolor);\n        this._pdf.doc.setFillColor(255, 255, 255);\n        this._pdf.doc.rect(scaleBarX + size, scaleBarY, size, 1, 'FD');\n\n        // draw third part of scalebar\n        this._pdf.doc.setDrawColor(this._style.brcolor);\n        this._pdf.doc.setFillColor(0, 0, 0);\n        this._pdf.doc.rect(scaleBarX + size * 2, scaleBarY, size * 2, 1, 'FD');\n\n        // draw numeric labels above scalebar\n        this._pdf.doc.setTextColor(this._style.txcolor);\n        this._pdf.doc.setFontSize(6);\n        this._pdf.doc.text('0', scaleBarX, scaleBarY - 1);\n        // /4 and could give 2.5. We still round, because of floating point arith\n        this._pdf.doc.text(\n            String(Math.round((length * 10) / 4) / 10),\n            scaleBarX + size - 1,\n            scaleBarY - 1\n        );\n        this._pdf.doc.text(\n            String(Math.round(length / 2)),\n            scaleBarX + size * 2 - 2,\n            scaleBarY - 1\n        );\n        this._pdf.doc.text(\n            Math.round(length).toString() + ' ' + unit,\n            scaleBarX + size * 4 - 4,\n            scaleBarY - 1\n        );\n    };\n\n    /**\n     *\n     * @param imgSrc\n     * @returns\n     * @protected\n     */\n    _addCompass = async (\n        imgSrc: HTMLImageElement | string | SVGElement\n    ): Promise<void> => {\n        const position = 'bottomright';\n        const offset = { x: 2, y: 6 };\n        const size = 6;\n        const rotationRadians = this._view.getRotation();\n        const imageSize = 100;\n\n        const { x, y } = this._calculateOffsetByPosition(\n            position,\n            offset,\n            size\n        );\n\n        const addRotation = (image: CanvasImageSource) => {\n            const canvas = document.createElement('canvas');\n\n            // Must be bigger than the image to prevent clipping\n            canvas.height = 120;\n            canvas.width = 120;\n            const context = canvas.getContext('2d');\n\n            context.translate(canvas.width * 0.5, canvas.height * 0.5);\n            context.rotate(rotationRadians);\n            context.translate(-canvas.width * 0.5, -canvas.height * 0.5);\n            context.drawImage(\n                image,\n                (canvas.height - imageSize) / 2,\n                (canvas.width - imageSize) / 2,\n                imageSize,\n                imageSize\n            );\n\n            // Add back circle\n            const xCircle = x - size;\n            const yCircle = y;\n            this._pdf.doc.setDrawColor(this._style.brcolor);\n            this._pdf.doc.setFillColor(this._style.bkcolor);\n            this._pdf.doc.circle(xCircle, yCircle, size, 'FD');\n\n            return canvas;\n        };\n\n        const addImage = (image: CanvasImageSource): void => {\n            const rotatedCanvas = addRotation(image);\n\n            const sizeImage = size * 1.5;\n            const xImage = x - sizeImage - size / 4.3;\n            const yImage = y - sizeImage / 2;\n\n            this._pdf.doc.addImage(\n                rotatedCanvas,\n                'PNG',\n                xImage,\n                yImage,\n                sizeImage,\n                sizeImage\n            );\n        };\n\n        let image: HTMLImageElement;\n\n        if (imgSrc instanceof Image) {\n            addImage(image);\n            return;\n        } else {\n            let imgData: string;\n\n            if (typeof imgSrc === 'string') {\n                imgData = imgSrc;\n            } else if (imgSrc instanceof SVGElement) {\n                imgData = await this._processSvgImage(imgSrc);\n            } else {\n                throw this._i18n.errorImage;\n            }\n\n            return new Promise((resolve, reject) => {\n                const image = new Image(imageSize, imageSize);\n\n                image.onload = () => {\n                    addImage(image);\n                    resolve();\n                };\n\n                image.onerror = () => {\n                    reject(this._i18n.errorImage);\n                };\n\n                image.src = imgData;\n            });\n        }\n    };\n}\n\n/**\n * **_[interface]_**\n * @protected\n */\ninterface IWindow extends Window {\n    jspdf: any;\n    pdfjsLib: any;\n}\n\n/**\n * **_[interface]_**\n * @protected\n */\nexport interface IPdf {\n    doc: jsPDF;\n    width: number;\n    height: number;\n}\n\ninterface IPdfOptions {\n    view: View;\n    form: IPrintOptions;\n    i18n: I18n;\n    config: Options;\n    height: number;\n    width: number;\n    scaleResolution: number;\n}\n","import Map from 'ol/Map';\nimport { METERS_PER_UNIT } from 'ol/proj/Units';\n\n/**\n *\n * @param map\n * @param opt_round\n * @returns\n * @protected\n */\nexport const getMapScale = (map: Map, opt_round = true): number => {\n    const dpi = 25.4 / 0.28;\n\n    const view = map.getView();\n    const unit = view.getProjection().getUnits();\n    const res = view.getResolution();\n    const inchesPerMetre = 39.37;\n\n    let scale = res * METERS_PER_UNIT[unit] * inchesPerMetre * dpi;\n\n    if (opt_round) {\n        scale = Math.round(scale);\n    }\n\n    return scale;\n};\n","import Modal from 'modal-vanilla';\nimport Map from 'ol/Map';\nimport { I18n, IValues, Options } from '../ol-pdf-printer';\nimport { getMapScale } from './Helpers';\nimport myPragma from '../myPragma';\n/**\n * @private\n */\nexport default class SettingsModal {\n    _modal: Modal;\n\n    constructor(\n        map: Map,\n        options: Options,\n        i18n: I18n,\n        printMap: (values: IValues, showLoading: boolean, delay: number) => void\n    ) {\n        this._modal = new Modal({\n            headerClose: true,\n            header: true,\n            animate: true,\n            title: i18n.printPdf,\n            content: this.Content(i18n, options),\n            footer: this.Footer(i18n, options),\n            ...options.modal\n        });\n\n        this._modal.on('dismiss', (modal: Modal, event: Event): void => {\n            const print = (event.target as HTMLElement).dataset.print;\n            if (!print) return;\n\n            const form = document.getElementById('printMap') as HTMLFormElement;\n\n            const formData = new FormData(form);\n\n            const values = {\n                format: formData.get('printFormat'),\n                orientation: formData.get('printOrientation'),\n                resolution: formData.get('printResolution'),\n                scale: formData.get('printScale'),\n                description: formData.get('printDescription'),\n                compass: formData.get('printCompass'),\n                attributions: formData.get('printAttributions'),\n                scalebar: formData.get('printScalebar'),\n                typeExport: this._modal.el.querySelector(\n                    'select[name=\"printTypeExport\"]'\n                ).value\n            };\n\n            printMap(\n                values,\n                /* showLoading */ true,\n                /* delay */ options.modal.transition\n            );\n        });\n\n        this._modal.on('shown', (): void => {\n            const actualScaleVal = getMapScale(map);\n            const actualScale = this._modal.el.querySelector('.actualScale');\n            (actualScale as HTMLInputElement).value = String(\n                actualScaleVal / 1000\n            );\n            actualScale.innerHTML = `${\n                i18n.current\n            } (1:${actualScaleVal.toLocaleString('de')})`;\n        });\n    }\n\n    /**\n     *\n     * @param i18n\n     * @param options\n     * @returns\n     * @protected\n     */\n    Content(i18n: I18n, options: Options): HTMLElement {\n        const { scales, dpi, mapElements, paperSizes } = options;\n\n        return (\n            <form id=\"printMap\">\n                <div>\n                    <div className=\"printFieldHalf\">\n                        <label htmlFor=\"printFormat\">{i18n.paperSize}</label>\n                        <select name=\"printFormat\" id=\"printFormat\">\n                            {paperSizes.map((paper) => (\n                                <option\n                                    value={paper.value}\n                                    {...(paper.selected\n                                        ? { selected: 'selected' }\n                                        : {})}\n                                >\n                                    {paper.value}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n                    <div className=\"printFieldHalf\">\n                        <label htmlFor=\"printOrientation\">\n                            {i18n.orientation}\n                        </label>\n                        <select name=\"printOrientation\" id=\"printOrientation\">\n                            <option value=\"landscape\" selected>\n                                {i18n.landscape}\n                            </option>\n                            <option value=\"portrait\">{i18n.portrait}</option>\n                        </select>\n                    </div>\n                </div>\n                <div>\n                    <div className=\"printFieldHalf\">\n                        <label htmlFor=\"printResolution\">\n                            {i18n.resolution}\n                        </label>\n                        <select name=\"printResolution\" id=\"printResolution\">\n                            {dpi.map((d) => (\n                                <option\n                                    value={d.value}\n                                    {...(d.selected\n                                        ? { selected: 'selected' }\n                                        : {})}\n                                >\n                                    {d.value} dpi\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n                    <div className=\"printFieldHalf\">\n                        <label htmlFor=\"printScale\">{i18n.scale}</label>\n                        <select name=\"printScale\" id=\"printScale\">\n                            <option\n                                className=\"actualScale\"\n                                value=\"\"\n                                selected\n                            ></option>\n                            {scales.map((scale) => (\n                                <option value={scale}>\n                                    1:{(scale * 1000).toLocaleString('de')}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n                </div>\n                {mapElements && (\n                    <div>\n                        {mapElements.description && (\n                            <div>\n                                <label htmlFor=\"printDescription\">\n                                    {i18n.addNote}\n                                </label>\n                                <textarea\n                                    id=\"printDescription\"\n                                    name=\"printDescription\"\n                                    rows=\"4\"\n                                ></textarea>\n                            </div>\n                        )}\n                        <div>{i18n.mapElements}</div>\n                        <div className=\"printElements\">\n                            {mapElements.compass && (\n                                <label htmlFor=\"printCompass\">\n                                    <input\n                                        type=\"checkbox\"\n                                        id=\"printCompass\"\n                                        name=\"printCompass\"\n                                        checked\n                                    />\n                                    {i18n.compass}\n                                </label>\n                            )}\n                            {mapElements.scalebar && (\n                                <label htmlFor=\"printScalebar\">\n                                    <input\n                                        type=\"checkbox\"\n                                        id=\"printScalebar\"\n                                        name=\"printScalebar\"\n                                        checked\n                                    />\n                                    {i18n.scale}\n                                </label>\n                            )}\n                            {mapElements.attributions && (\n                                <label htmlFor=\"printAttributions\">\n                                    <input\n                                        type=\"checkbox\"\n                                        id=\"printAttributions\"\n                                        name=\"printAttributions\"\n                                        checked\n                                    />\n                                    {i18n.layersAttributions}\n                                </label>\n                            )}\n                        </div>\n                    </div>\n                )}\n            </form>\n        );\n    }\n\n    /**\n     *\n     * @param i18n\n     * @returns\n     * @protected\n     */\n    Footer(i18n: I18n, options: Options): string {\n        const { mimeTypeExports } = options;\n\n        return (\n            <div>\n                <button\n                    type=\"button\"\n                    className=\"btn-sm btn btn-secondary\"\n                    data-dismiss=\"modal\"\n                >\n                    {i18n.cancel}\n                </button>\n                <div class=\"typeExportContainer\">\n                    <button\n                        type=\"button\"\n                        className=\"btn-sm btn btn-primary\"\n                        data-print=\"true\"\n                        data-dismiss=\"modal\"\n                    >\n                        {i18n.print}\n                    </button>\n                    <select\n                        className=\"typeExport\"\n                        name=\"printTypeExport\"\n                        id=\"printTypeExport\"\n                    >\n                        {mimeTypeExports.map((type) => (\n                            <option\n                                value={type.value}\n                                {...(type.selected\n                                    ? { selected: 'selected' }\n                                    : {})}\n                            >\n                                {type.value}\n                            </option>\n                        ))}\n                    </select>\n                </div>\n            </div>\n        ).outerHTML;\n    }\n\n    hide(): void {\n        this._modal.hide();\n    }\n\n    show(): void {\n        if (!this._modal._visible) this._modal.show();\n    }\n}\n","import Modal from 'modal-vanilla';\nimport { I18n, Options } from 'src/ol-pdf-printer';\n\n/**\n * @private\n */\nexport default class ProcessingModal {\n    protected _modal: Modal;\n    protected _footer: string;\n    protected _i18n: I18n;\n\n    /**\n     *\n     * @param i18n\n     * @param options\n     * @param onEndPrint\n     * @protected\n     */\n    constructor(i18n: I18n, options: Options, onEndPrint: () => void) {\n        this._i18n = i18n;\n\n        this._modal = new Modal({\n            headerClose: false,\n            title: this._i18n.printing,\n            backdrop: 'static', // To prevent close on clicking backdrop\n            content: ' ',\n            footer: `\n            <button\n                type=\"button\"\n                class=\"btn-sm btn btn-secondary\"\n                data-dismiss=\"modal\"\n            >\n                ${this._i18n.cancel}\n            </button>\n            `,\n            ...options.modal\n        });\n\n        this._modal.on('dismiss', () => {\n            onEndPrint();\n        });\n    }\n\n    /**\n     *\n     * @param string\n     * @protected\n     */\n    _setContentModal(string: string): void {\n        this._modal._html.body.innerHTML = string;\n    }\n\n    /**\n     *\n     * @param string\n     * @protected\n     */\n    _setFooterModal(string: string): void {\n        this._modal._html.footer.innerHTML = string;\n    }\n\n    /**\n     *\n     * @param string\n     * @param footer\n     * @protected\n     */\n    show(string: string): void {\n        this._setContentModal(string);\n        if (!this._modal._visible) this._modal.show();\n    }\n\n    /**\n     * @protected\n     */\n    hide(): void {\n        this._modal.hide();\n    }\n}\n","import { I18n } from '../../ol-pdf-printer';\n\nexport const es: I18n = {\n    printPdf: 'Exportar PDF',\n    pleaseWait: 'Por favor espere...',\n    almostThere: 'Ya casi...',\n    error: 'Error al generar pdf',\n    errorImage: 'Ocurrió un error al tratar de cargar una imagen',\n    printing: 'Exportando',\n    cancel: 'Cancelar',\n    close: 'Cerrar',\n    print: 'Exportar',\n    mapElements: 'Elementos en el mapa',\n    compass: 'Brújula',\n    scale: 'Escala',\n    layersAttributions: 'Atribuciones de capas',\n    addNote: 'Agregar nota (opcional)',\n    resolution: 'Resolución',\n    orientation: 'Orientación',\n    paperSize: 'Tamaño de página',\n    landscape: 'Paisaje',\n    portrait: 'Retrato',\n    current: 'Actual',\n    paper: 'Hoja'\n};\n","import { I18n } from '../../ol-pdf-printer';\n\nexport const en: I18n = {\n    printPdf: 'Print PDF',\n    pleaseWait: 'Please wait...',\n    almostThere: 'Almost there...',\n    error: 'An error occurred while printing',\n    errorImage: 'An error ocurred while loading an image',\n    printing: 'Exporting',\n    cancel: 'Cancel',\n    close: 'Close',\n    print: 'Export',\n    mapElements: 'Map elements',\n    compass: 'Compass',\n    scale: 'Scale',\n    layersAttributions: 'Layer attributions',\n    addNote: 'Add note (optional)',\n    resolution: 'Resolution',\n    orientation: 'Orientation',\n    paperSize: 'Paper size',\n    landscape: 'Landscape',\n    portrait: 'Portrait',\n    current: 'Current',\n    paper: 'Paper'\n};\n","import { Map, View } from 'ol';\nimport { getPointResolution } from 'ol/proj';\nimport Control, { Options as ControlOptions } from 'ol/control/Control';\nimport TileWMS from 'ol/source/TileWMS';\nimport Tile from 'ol/layer/Tile';\n\nimport { EventsKey } from 'ol/events';\nimport { unByKey } from 'ol/Observable';\n\nimport domtoimage from 'dom-to-image-improved';\n\nimport Pdf from './components/Pdf';\nimport SettingsModal from './components/SettingsModal';\nimport ProcessingModal from './components/ProcessingModal';\nimport * as i18n from './components/i18n/index.js';\n\nimport compassIcon from './assets/images/compass.svg';\nimport pdfIcon from './assets/images/pdf.svg';\n\nimport { Locale } from 'locale-enum';\n\nimport './assets/css/ol-pdf-printer.css';\n\n/**\n * @protected\n */\nconst DEFAULT_LANGUAGE = 'en';\n\n/**\n * @protected\n */\nconst CLASS_PRINT_MODE = 'printMode';\n\n/**\n * @protected\n */\nfunction deepObjectAssign(target, ...sources) {\n    sources.forEach((source) => {\n        Object.keys(source).forEach((key) => {\n            const s_val = source[key];\n            const t_val = target[key];\n            target[key] =\n                t_val &&\n                s_val &&\n                typeof t_val === 'object' &&\n                typeof s_val === 'object' &&\n                !Array.isArray(t_val) // Don't merge arrays\n                    ? deepObjectAssign(t_val, s_val)\n                    : s_val;\n        });\n    });\n    return target;\n}\n\nexport default class PdfPrinter extends Control {\n    protected _i18n: I18n;\n\n    protected _map: Map;\n    protected _view: View;\n    protected _mapTarget: HTMLElement;\n\n    protected _pdf: Pdf;\n\n    protected _processingModal: ProcessingModal;\n    protected _settingsModal: SettingsModal;\n\n    protected _initialized: boolean;\n\n    protected _timeoutProcessing: ReturnType<typeof setTimeout>;\n\n    protected _initialViewResolution: number;\n\n    protected _options: Options;\n\n    protected _renderCompleteKey: EventsKey | EventsKey[];\n\n    protected _isCanceled: boolean;\n\n    constructor(opt_options?: Options) {\n        const controlElement = document.createElement('button');\n\n        super({\n            target: opt_options.target,\n            element: controlElement\n        });\n\n        // Check if the selected language exists\n        this._i18n =\n            opt_options.language && opt_options.language in i18n\n                ? i18n[opt_options.language]\n                : i18n[DEFAULT_LANGUAGE];\n\n        if (opt_options.i18n) {\n            // Merge custom translations\n            this._i18n = {\n                ...this._i18n,\n                ...opt_options.i18n\n            };\n        }\n\n        // Default options\n        this._options = {\n            language: DEFAULT_LANGUAGE,\n            filename: 'Ol Pdf Printer',\n            style: {\n                paperMargin: 10,\n                brcolor: '#000000',\n                bkcolor: '#273f50',\n                txcolor: '#ffffff'\n            },\n            extraInfo: {\n                date: true,\n                url: true,\n                specs: true\n            },\n            mapElements: {\n                description: true,\n                attributions: true,\n                scalebar: true,\n                compass: compassIcon() as SVGElement\n            },\n            watermark: {\n                title: 'Ol Pdf Printer',\n                titleColor: '#d65959',\n                subtitle: 'https://github.com/GastonZalba/ol-pdf-printer',\n                subtitleColor: '#444444',\n                logo: false\n            },\n            paperSizes: [\n                // { size: [1189, 841], value: 'A0' },\n                // { size: [841, 594], value: 'A1' },\n                { size: [594, 420], value: 'A2' },\n                { size: [420, 297], value: 'A3' },\n                { size: [297, 210], value: 'A4', selected: true },\n                { size: [210, 148], value: 'A5' }\n            ],\n            dpi: [\n                { value: 72 },\n                { value: 96 },\n                { value: 150, selected: true },\n                { value: 200 },\n                { value: 300 }\n            ],\n            scales: [10000, 5000, 1000, 500, 250, 100, 50, 25, 10],\n            mimeTypeExports: [\n                { value: 'pdf', selected: true },\n                { value: 'png' },\n                { value: 'jpeg' },\n                { value: 'webp' }\n            ],\n            units: 'metric',\n            dateFormat: undefined,\n            ctrlBtnClass: '',\n            modal: {\n                animateClass: 'fade',\n                animateInClass: 'show',\n                transition: 150,\n                backdropTransition: 100,\n                templates: {\n                    dialog: '<div class=\"modal-dialog modal-dialog-centered\"></div>',\n                    headerClose: `<button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"${this._i18n.close}\"><span aria-hidden=\"true\">×</span></button>`\n                }\n            }\n        };\n\n        // Merge options\n        this._options = deepObjectAssign(this._options, opt_options);\n\n        controlElement.className = `ol-print-btn-menu ${this._options.ctrlBtnClass}`;\n        controlElement.title = this._i18n.printPdf;\n        controlElement.onclick = () => this.showPrintSettingsModal();\n        controlElement.append(pdfIcon());\n    }\n\n    /**\n     * @protected\n     */\n    _init(): void {\n        this._map = this.getMap();\n        this._view = this._map.getView();\n        this._mapTarget = this._map.getTargetElement();\n        this._settingsModal = new SettingsModal(\n            this._map,\n            this._options,\n            this._i18n,\n            this._printMap.bind(this)\n        );\n\n        this._processingModal = new ProcessingModal(\n            this._i18n,\n            this._options,\n            this._onEndPrint.bind(this)\n        );\n\n        this._initialized = true;\n    }\n\n    /**\n     * @protected\n     */\n    _setMapSizForPrint(\n        width: number,\n        height: number,\n        resolution: number\n    ): number[] {\n        const pixelsPerMapMillimeter = resolution / 25.4;\n        return [\n            Math.round(width * pixelsPerMapMillimeter),\n            Math.round(height * pixelsPerMapMillimeter)\n        ];\n    }\n\n    /**\n     * Restore inital view, remove classes, disable loading\n     * @protected\n     */\n    _onEndPrint(): void {\n        this._mapTarget.style.width = '';\n        this._mapTarget.style.height = '';\n        this._map.updateSize();\n        this._view.setResolution(this._initialViewResolution);\n        this._mapTarget.classList.remove(CLASS_PRINT_MODE);\n\n        this._view.setConstrainResolution(true);\n\n        clearTimeout(this._timeoutProcessing);\n\n        this._cancel();\n    }\n    /**\n     * @protected\n     */\n    _prepareLoading(): void {\n        this._processingModal.show(this._i18n.pleaseWait);\n\n        this._timeoutProcessing = setTimeout(() => {\n            this._processingModal.show(this._i18n.almostThere);\n        }, 4000);\n    }\n\n    /**\n     * @protected\n     */\n    _disableLoading(): void {\n        this._processingModal.hide();\n    }\n\n    /**\n     * This could be used to increment the DPI before printing\n     * @protected\n     */\n    _setFormatOptions(string = ''): void {\n        const layers = this._map.getLayers();\n        layers.forEach((layer) => {\n            if (layer instanceof Tile) {\n                const source = layer.getSource();\n                // Set WMS DPI\n                if (source instanceof TileWMS) {\n                    source.updateParams({\n                        FORMAT_OPTIONS: string\n                    });\n                }\n            }\n        });\n    }\n\n    /**\n     *\n     * @param form\n     * @param showLoading\n     * @param delay Delay to prevent glitching with modals animation\n     * @protected\n     */\n    _printMap(form: IPrintOptions, showLoading = true, delay = 0): void {\n        if (showLoading) {\n            this._mapTarget.classList.add(CLASS_PRINT_MODE);\n        }\n\n        setTimeout(() => {\n            if (showLoading) {\n                this._prepareLoading();\n            }\n\n            this._isCanceled = false;\n\n            // To allow intermediate zoom levels\n            this._view.setConstrainResolution(false);\n\n            let dim = this._options.paperSizes.find(\n                (e) => e.value === form.format\n            ).size;\n\n            dim =\n                form.orientation === 'landscape'\n                    ? dim\n                    : ([...dim].reverse() as [number, number]);\n\n            const widthPaper = dim[0];\n            const heightPaper = dim[1];\n\n            const mapSizeForPrint = this._setMapSizForPrint(\n                widthPaper,\n                heightPaper,\n                form.resolution\n            );\n            const [width, height] = mapSizeForPrint;\n\n            // Save current resolution to restore it later\n            this._initialViewResolution = this._view.getResolution();\n\n            const pixelsPerMapMillimeter = form.resolution / 25.4;\n\n            const scaleResolution =\n                form.scale /\n                getPointResolution(\n                    this._view.getProjection(),\n                    pixelsPerMapMillimeter,\n                    this._view.getCenter()\n                );\n\n            this._renderCompleteKey = this._map.once('rendercomplete', () => {\n                domtoimage\n                    .toJpeg(\n                        this._mapTarget.querySelector(\n                            '.ol-unselectable.ol-layers'\n                        ),\n                        {\n                            width,\n                            height\n                        }\n                    )\n                    .then(async (dataUrl) => {\n                        if (this._isCanceled) return;\n\n                        this._pdf = new Pdf({\n                            view: this._view,\n                            i18n: this._i18n,\n                            config: this._options,\n                            form: form,\n                            height: heightPaper,\n                            width: widthPaper,\n                            scaleResolution\n                        });\n\n                        this._pdf.addMapImage(dataUrl);\n                        await this._pdf.addMapHelpers();\n\n                        if (this._isCanceled) return;\n\n                        await this._pdf.savePdf();\n\n                        // Reset original map size\n                        this._onEndPrint();\n\n                        if (showLoading) this._disableLoading();\n                    })\n                    .catch((err: Error) => {\n                        const message =\n                            typeof err === 'string' ? err : this._i18n.error;\n                        console.error(err);\n                        this._onEndPrint();\n                        this._processingModal.show(message);\n                    });\n            });\n\n            // Set print size\n            this._mapTarget.style.width = width + 'px';\n            this._mapTarget.style.height = height + 'px';\n            this._map.updateSize();\n            this._map.getView().setResolution(scaleResolution);\n        }, delay);\n    }\n\n    /**\n     * @protected\n     */\n    _cancel(): void {\n        if (this._renderCompleteKey) {\n            unByKey(this._renderCompleteKey);\n        }\n\n        this._isCanceled = true;\n    }\n    /**\n     * Show the Settings Modal\n     * @public\n     */\n    showPrintSettingsModal(): void {\n        if (!this._initialized) this._init();\n        this._settingsModal.show();\n    }\n\n    /**\n     * Hide the Settings Modal\n     * @public\n     */\n    hidePrintSettingsModal(): void {\n        this._settingsModal.hide();\n    }\n\n    /**\n     * Create PDF programatically without displaying the Settings Modal\n     * @param options\n     * @public\n     */\n    createPdf(options: IPrintOptions, showLoading: boolean): void {\n        options = {\n            format: (\n                this._options.paperSizes.find((p) => p.selected) ||\n                this._options.paperSizes[0]\n            ).value,\n            resolution: (\n                this._options.dpi.find((p) => p.selected) ||\n                this._options.dpi[0]\n            ).value,\n            orientation: 'landscape',\n            compass: true,\n            attributions: true,\n            scale: true,\n            ...options\n        };\n        this._printMap(options, showLoading);\n    }\n}\n\n/**\n * **_[interface]_**\n */\nexport interface IPrintOptions {\n    /**\n     *\n     */\n    format?: IPaperSize['value'];\n    /**\n     *\n     */\n    orientation?: 'landscape' | 'portrait';\n    /**\n     *\n     */\n    resolution?: IDpi['value'];\n    /**\n     *\n     */\n    scale: IScale;\n    /**\n     *\n     */\n    description?: string;\n    /**\n     *\n     */\n    compass?: boolean;\n    /**\n     *\n     */\n    attributions?: boolean;\n    /**\n     *\n     */\n    scalebar?: boolean;\n    /**\n     *\n     */\n    typeExport?: IMimeTypeExport['value'];\n}\n\n/**\n * **_[interface]_** - Custom translations specified when creating an instance\n */\nexport interface IValues {\n    format: FormDataEntryValue;\n    orientation: FormDataEntryValue;\n    resolution: FormDataEntryValue;\n    scale: FormDataEntryValue;\n    description: FormDataEntryValue;\n    compass: FormDataEntryValue;\n    attributions: FormDataEntryValue;\n    scalebar: FormDataEntryValue;\n    typeExport: FormDataEntryValue;\n}\n\n/**\n * **_[interface]_** - Custom translations specified when creating an instance\n */\nexport interface I18n {\n    printPdf: string;\n    pleaseWait: string;\n    almostThere: string;\n    error: string;\n    errorImage: string;\n    printing: string;\n    cancel: string;\n    close: string;\n    print: string;\n    mapElements: string;\n    compass: string;\n    scale: string;\n    layersAttributions: string;\n    addNote: string;\n    resolution: string;\n    orientation: string;\n    paperSize: string;\n    landscape: string;\n    portrait: string;\n    current: string;\n    paper: string;\n}\n\n/**\n * **_[interface]_**\n */\ninterface IPaperSize {\n    /**\n     *\n     */\n    size: [number, number];\n    /**\n     *\n     */\n    value: string;\n    /**\n     *\n     */\n    selected?: boolean;\n}\n\n/**\n * **_[type]_**\n */\ntype IScale = number;\n\n/**\n * **_[interface]_**\n */\ninterface IDpi {\n    /**\n     *\n     */\n    value: number;\n    /**\n     *\n     */\n    selected?: boolean;\n}\n\n/**\n * **_[interface]_**\n */\ninterface IStyle {\n    /**\n     *\n     */\n    paperMargin?: number;\n    /**\n     *\n     */\n    brcolor?: string;\n    /**\n     *\n     */\n    bkcolor?: string;\n    /**\n     *\n     */\n    txcolor?: string;\n}\n\n/**\n * **_[interface]_**\n */\ninterface IMimeTypeExport {\n    value: 'pdf' | 'png' | 'jpeg' | 'webp';\n    selected?: boolean;\n}\n\n/**\n * **_[interface]_**\n */\ninterface IModal {\n    /**\n     *\n     */\n    animateClass?: string;\n    /**\n     *\n     */\n    animateInClass?: string;\n    /**\n     *\n     */\n    transition?: number;\n    /**\n     *\n     */\n    backdropTransition?: number;\n    /**\n     *\n     */\n    templates?: {\n        dialog?: string | HTMLElement;\n        headerClose?: string | HTMLElement;\n    };\n}\n\n/**\n * **_[interface]_**\n */\nexport interface IWatermark {\n    /**\n     *\n     */\n    title?: string;\n    /**\n     *\n     */\n    titleColor?: string;\n    /**\n     *\n     */\n    subtitle?: string;\n    /**\n     *\n     */\n    subtitleColor?: string;\n    /**\n     *\n     */\n    logo?: false | string | HTMLImageElement | SVGElement;\n}\n\n/**\n * **_[interface]_** - Print information at the bottom of the PDF\n */\ninterface IExtraInfo {\n    /**\n     * Print Date\n     */\n    date?: boolean;\n    /**\n     * Current site url\n     */\n    url?: boolean;\n    /**\n     * DPI, Format and Scale information\n     */\n    specs?: boolean;\n}\n\n/**\n * **_[interface]_** - MapElements\n * @public\n */\nexport interface IMapElements {\n    /**\n     * Print description\n     */\n    description?: boolean;\n    /**\n     * Layers attributions\n     */\n    attributions?: boolean;\n    /**\n     * Scalebar\n     */\n    scalebar?: boolean;\n    /**\n     * Compass image. North must be pointing to the top\n     */\n    compass?: false | string | HTMLImageElement | SVGElement;\n}\n\n/**\n * **_[interface]_** - Options specified when creating an instance\n */\nexport interface Options extends ControlOptions {\n    /**\n     * Export filename\n     */\n    filename?: string;\n\n    /**\n     * Map unit mode\n     */\n    units?: 'metric' | 'imperial';\n\n    /**\n     * Some basic PDF style configuration\n     */\n    style?: IStyle;\n\n    /**\n     * Information to be inserted at the bottom of the PDF\n     * False to disable\n     */\n    extraInfo?: false | IExtraInfo;\n\n    /**\n     * Elements to be showed on the PDF and in the Settings Modal.\n     * False to disable\n     */\n    mapElements?: false | IMapElements;\n\n    /**\n     * Watermark to be inserted in the PDF.\n     * False to disable\n     */\n    watermark?: false | IWatermark;\n\n    /**\n     * Paper sizes options to be shown in the settings modal\n     */\n    paperSizes?: IPaperSize[];\n\n    /**\n     * DPI resolutions options to be shown in the settings modal\n     */\n    dpi?: IDpi[];\n\n    /**\n     * Map scales options to be shown in the settings modal\n     */\n    scales?: IScale[];\n\n    /**\n     * Export format\n     */\n    mimeTypeExports?: IMimeTypeExport[];\n\n    /**\n     * Locale time zone. Default varies according to browser locale\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString#using_locales\n     */\n    dateFormat?: Locale;\n\n    /**\n     * ClassName to add to the Btn Control\n     */\n    ctrlBtnClass?: string;\n\n    /**\n     * Modal configuration\n     */\n    modal?: IModal;\n\n    /**\n     * Language support\n     */\n    language?: 'es' | 'en';\n\n    /**\n     * Add custom translations\n     */\n    i18n?: I18n;\n}\n"],"names":["createElement","tagName","attrs","children","elem","document","Object","entries","forEach","name","value","startsWith","toLowerCase","window","addEventListener","substr","setAttribute","toString","child","Array","isArray","append","appendChild","nodeType","undefined","createTextNode","myPragma"],"mappings":"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"}